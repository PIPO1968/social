{"version":3,"sources":["turbopack:///[project]/src/app/estadisticas/page.tsx"],"sourcesContent":["\"use client\";\r\nimport React from \"react\";\r\nimport { renderNick } from \"@/utils/renderNick\";\r\nimport { useTranslation } from '@/utils/i18n';\r\nimport { UserLink } from \"@/components/UserLink\";\r\n\r\nexport default function Estadisticas() {\r\n    const { t } = useTranslation();\r\n    // Estado para detectar si el usuario es Premium\r\n    const [isPremium, setIsPremium] = React.useState(false);\r\n    const [currentUser, setCurrentUser] = React.useState<any>(null);\r\n    const [users, setUsers] = React.useState<any[]>([]);\r\n    const [historias, setHistorias] = React.useState<any[]>([]);\r\n    const [concursos, setConcursos] = React.useState<any[]>([]);\r\n    const [loading, setLoading] = React.useState(true);\r\n\r\n    // Funci√≥n para calcular puntos totales de un usuario\r\n    function calcularPuntosTotales(user: any): number {\r\n        if (!user || !user.nick) return 0;\r\n\r\n        let puntosTotales = 0;\r\n\r\n        // Puntos por asignaturas (desde la DB ahora)\r\n        const asignaturas = ['matematicas', 'lenguaje', 'geografia', 'historia', 'literatura', 'ingles', 'naturaleza'];\r\n        asignaturas.forEach(asignatura => {\r\n            // Los puntos ahora vienen de la DB en el campo stats_individual\r\n            const stats = user.stats_individual ? JSON.parse(user.stats_individual) : {};\r\n            const puntosAsignatura = stats[asignatura] || 0;\r\n            puntosTotales += puntosAsignatura;\r\n        });\r\n\r\n        // Puntos por likes (cada like cuenta como punto)\r\n        puntosTotales += user.likes || 0;\r\n\r\n        // Puntos por competiciones superadas (cada competici√≥n superada vale 10 puntos)\r\n        puntosTotales += (user.competicionesSuperadas || 0) * 10;\r\n\r\n        // Puntos por preguntas acertadas (cada pregunta acertada vale 2 puntos)\r\n        puntosTotales += (user.respuestasAcertadas || 0) * 2;\r\n\r\n        return puntosTotales;\r\n    }\r\n\r\n    React.useEffect(() => {\r\n        const loadData = async () => {\r\n            try {\r\n                setLoading(true);\r\n\r\n                // Obtener usuario actual\r\n                const userResponse = await fetch('/api/auth/me');\r\n                if (userResponse.ok) {\r\n                    const userData = await userResponse.json();\r\n                    if (userData.user) {\r\n                        setCurrentUser(userData.user);\r\n                        setIsPremium(userData.user.premium || false);\r\n                    }\r\n                }\r\n\r\n                // Obtener todos los usuarios\r\n                const usersResponse = await fetch('/api/users');\r\n                if (usersResponse.ok) {\r\n                    const usersData = await usersResponse.json();\r\n                    setUsers(usersData);\r\n                }\r\n\r\n                // Obtener historias (si existe la API)\r\n                try {\r\n                    const historiasResponse = await fetch('/api/historias');\r\n                    if (historiasResponse.ok) {\r\n                        const historiasData = await historiasResponse.json();\r\n                        setHistorias(historiasData);\r\n                    }\r\n                } catch (error) {\r\n                    console.warn('API de historias no disponible:', error);\r\n                }\r\n\r\n                // Obtener concursos (si existe la API)\r\n                try {\r\n                    const concursosResponse = await fetch('/api/concursos');\r\n                    if (concursosResponse.ok) {\r\n                        const concursosData = await concursosResponse.json();\r\n                        setConcursos(concursosData);\r\n                    }\r\n                } catch (error) {\r\n                    console.warn('API de concursos no disponible:', error);\r\n                }\r\n\r\n            } catch (error) {\r\n                console.error('Error loading data:', error);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        loadData();\r\n    }, []);\r\n\r\n    if (loading) {\r\n        return (\r\n            <div className=\"min-h-screen bg-green-100 flex items-center justify-center\">\r\n                <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-900 mx-auto mb-4\"></div>\r\n                <p>Cargando estad√≠sticas...</p>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-green-100 p-8\">\r\n            <div className=\"text-center mb-4\">\r\n                <h1 className=\"text-2xl font-bold\">\r\n                    {isPremium ? (\r\n                        <>\r\n                            <span className=\"text-yellow-600\">{t('estadisticasPremium')}</span>\r\n                            <div className=\"text-sm text-gray-600 mt-1\">\r\n                                ¬°Hola {currentUser?.nick}! Disfrutas de estad√≠sticas avanzadas\r\n                            </div>\r\n                        </>\r\n                    ) : (\r\n                        <>\r\n                            Estad√≠sticas\r\n                            <div className=\"text-sm text-blue-600 mt-1\">\r\n                                <button\r\n                                    onClick={() => window.location.href = '/premium-nuevo'}\r\n                                    className=\"bg-gradient-to-r from-yellow-400 to-orange-500 text-white px-3 py-1 rounded-full text-xs hover:shadow-lg transform hover:scale-105 transition-all\"\r\n                                >\r\n                                    ‚ú® {t('haztePremiumParaVer')} ‚ú®\r\n                                </button>\r\n                            </div>\r\n                        </>\r\n                    )}\r\n                </h1>\r\n            </div>\r\n\r\n            {/* Bloque 1: Estad√≠sticas Globales */}\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-8 max-w-5xl mx-auto\">\r\n                <div className=\"bg-white rounded-lg shadow-md p-6\">\r\n                    <h2 className=\"text-lg font-bold mb-4 text-center\">{t('estadisticasGlobales')}</h2>\r\n                    <ul className=\"space-y-2\">\r\n                        <li><span className=\"mr-2 text-xl\">üèÜ</span><b>{t('totalCompeticionesSuperadas')}:</b> {(() => {\r\n                            let total = 0;\r\n                            users.forEach((u: any) => {\r\n                                total += u.competicionesSuperadas || 0;\r\n                            });\r\n                            return total;\r\n                        })()}</li>\r\n                        <li><span className=\"mr-2 text-xl\">üë•</span><b>{t('totalUsuarios')}:</b> {users.length}</li>\r\n                        <li><span className=\"mr-2 text-xl\">üìñ</span><b>{t('totalHistoriasCreadas')}:</b> {historias.length}</li>\r\n                        <li><span className=\"mr-2 text-xl\">üèÜ</span><b>{t('totalConcursosCreados')}:</b> {concursos.length}</li>\r\n                        <li><span className=\"mr-2 text-xl\">üí¨</span><b>Total de comentarios realizados:</b> {(() => {\r\n                            let total = 0;\r\n                            historias.forEach((h: any) => {\r\n                                // Asumiendo que los comentarios est√°n en la relaci√≥n de historias\r\n                                total += h.comentarios ? h.comentarios.length : 0;\r\n                            });\r\n                            return total;\r\n                        })()}</li>\r\n                        <li><span className=\"mr-2 text-xl\">üè´</span><b>Total de centros escolares registrados:</b> {(() => {\r\n                            const centros = new Set(users.map((u: any) => u.centro).filter(Boolean));\r\n                            return centros.size;\r\n                        })()}</li>\r\n                        <li><span className=\"mr-2 text-xl\">üë®‚Äçüè´</span><b>Total de docentes registrados:</b> {(() => {\r\n                            const docentesArr = users.filter((u: any) => (u.tipo || \"\").toLowerCase() === \"docente\");\r\n                            return docentesArr.length || 0;\r\n                        })()}</li>\r\n                        <li><span className=\"mr-2 text-xl\">ü§ù</span><b>Total de amigos creados:</b> {(() => {\r\n                            let total = 0;\r\n                            users.forEach((u: any) => {\r\n                                // Contar amigos desde las relaciones\r\n                                const amigosComoUser = u.amigosComoUser?.length || 0;\r\n                                total += amigosComoUser;\r\n                            });\r\n                            return total > 0 ? total : 0;\r\n                        })()}</li>\r\n                        <li><span className=\"mr-2 text-xl\">üèÖ</span><b>Total de historias ganadoras:</b> {(() => {\r\n                            return concursos.filter((c: any) => c.historiaGanadora).length || 0;\r\n                        })()}</li>\r\n                        <li><span className=\"mr-2 text-xl\">üë®‚Äçüë©‚Äçüëß‚Äçüë¶</span><b>Total de participantes en concursos:</b> {(() => {\r\n                            let count = 0;\r\n                            users.forEach((u: any) => {\r\n                                if (u.historias && Array.isArray(u.historias) && u.historias.length > 0) {\r\n                                    count++;\r\n                                }\r\n                            });\r\n                            return count;\r\n                        })()}</li>\r\n                        <li><span className=\"mr-2 text-xl\">‚ù§Ô∏è</span><b>Total de likes:</b> {(() => {\r\n                            let total = 0;\r\n                            users.forEach((u: any) => {\r\n                                total += (u.likes || 0);\r\n                            });\r\n                            return total;\r\n                        })()}</li>\r\n                        <li><span className=\"mr-2 text-xl\">‚ùì</span><b>Total de preguntas respondidas:</b> {(() => {\r\n                            let totalAcertadas = 0;\r\n                            let totalFalladas = 0;\r\n                            users.forEach((u: any) => {\r\n                                totalAcertadas += u.respuestasAcertadas || 0;\r\n                                // Si hay estad√≠sticas adicionales en JSON\r\n                                if (u.stats_individual) {\r\n                                    const stats = JSON.parse(u.stats_individual);\r\n                                    totalFalladas += stats.preguntasFalladas || 0;\r\n                                }\r\n                            });\r\n                            return totalAcertadas + totalFalladas;\r\n                        })()}</li>\r\n                        <li><span className=\"mr-2 text-xl\">‚ùì</span><b>{t('totalPreguntasAcertadas')}:</b> {(() => {\r\n                            let total = 0;\r\n                            users.forEach((u: any) => {\r\n                                total += u.respuestasAcertadas || 0;\r\n                            });\r\n                            return total;\r\n                        })()}</li>\r\n                        <li><span className=\"mr-2 text-xl\">‚ùì</span><b>Total de preguntas falladas:</b> {(() => {\r\n                            let total = 0;\r\n                            users.forEach((u: any) => {\r\n                                // Si hay estad√≠sticas adicionales en JSON\r\n                                if (u.stats_individual) {\r\n                                    const stats = JSON.parse(u.stats_individual);\r\n                                    total += stats.preguntasFalladas || 0;\r\n                                }\r\n                            });\r\n                            return total;\r\n                        })()}</li>\r\n                        <li><span className=\"mr-2 text-xl\">üèÜ</span><b>Total de concursos ganados:</b> {(() => {\r\n                            let total = 0;\r\n                            users.forEach((u: any) => {\r\n                                total += u.concursosGanados || 0;\r\n                            });\r\n                            return total;\r\n                        })()}</li>\r\n                    </ul>\r\n                </div>\r\n                {/* Bloque 2: Rankings */}\r\n                <div className=\"bg-white rounded-lg shadow-md p-6\">\r\n                    <h2 className=\"text-lg font-bold mb-4 text-center\">Rankings</h2>\r\n                    <ul className=\"space-y-2\">\r\n                        <li><span className=\"mr-2 text-xl\">‚ù§Ô∏è</span><b>{t('usuariosMasLikes')}:</b> {(() => {\r\n                            const ranking = users.map((u: any) => {\r\n                                return {\r\n                                    nick: u.nick,\r\n                                    nombre: u.nombre,\r\n                                    totalLikes: (u.likes || 0)\r\n                                };\r\n                            })\r\n                                .filter((u: { nick: string; nombre: string; totalLikes: number }) => u.nick && u.totalLikes > 0) // Solo usuarios con al menos 1 like\r\n                                .sort((a: { totalLikes: number }, b: { totalLikes: number }) => b.totalLikes - a.totalLikes)\r\n                                .slice(0, 5);\r\n                            if (ranking.length === 0) return <span className=\"block\">No hay usuarios con likes.</span>;\r\n                            return ranking.map((u: { nick: string; totalLikes: number }, i: number) => (\r\n                                <span key={u.nick} className=\"block\">{i + 1}. <b><UserLink nick={u.nick} /></b> ({u.totalLikes} likes)</span>\r\n                            ));\r\n                        })()}</li>\r\n                        <li><span className=\"mr-2 text-xl\">üí¨</span><b>{t('usuariosMasComentarios')}:</b> {(() => {\r\n                            const comentariosPorAutor: Record<string, number> = {};\r\n                            historias.forEach((h: any) => {\r\n                                if (h.autor) {\r\n                                    comentariosPorAutor[h.autor] = (comentariosPorAutor[h.autor] || 0) + (h.comentarios ? h.comentarios.length : 0);\r\n                                }\r\n                            });\r\n                            const ranking = Object.entries(comentariosPorAutor)\r\n                                .map(([nick, totalComentarios]: [string, number]) => ({ nick, totalComentarios }))\r\n                                .filter((u: { nick: string; totalComentarios: number }) => u.nick && u.totalComentarios > 0)\r\n                                .sort((a: { totalComentarios: number }, b: { totalComentarios: number }) => b.totalComentarios - a.totalComentarios)\r\n                                .slice(0, 5);\r\n                            if (ranking.length === 0) return <span className=\"block\">No hay usuarios con comentarios a√∫n.</span>;\r\n                            return ranking.map((u: { nick: string; totalComentarios: number }, i: number) => (\r\n                                <span key={u.nick} className=\"block\">{i + 1}. <b><UserLink nick={u.nick} /></b> ({u.totalComentarios} comentarios)</span>\r\n                            ));\r\n                        })()}</li>\r\n                        <li><span className=\"mr-2 text-xl\">ü§ù</span><b>Usuarios con m√°s amigos:</b> {(() => {\r\n                            const ranking = users\r\n                                .map((u: any) => {\r\n                                    const numAmigos = u.amigosComoUser?.length || 0;\r\n                                    return {\r\n                                        nick: u.nick,\r\n                                        numAmigos\r\n                                    };\r\n                                })\r\n                                .filter((u: { nick: string; numAmigos: number }) => u.nick && u.numAmigos > 0)\r\n                                .sort((a: { numAmigos: number }, b: { numAmigos: number }) => b.numAmigos - a.numAmigos)\r\n                                .slice(0, 5);\r\n                            if (ranking.length === 0) return <span className=\"block\">No hay usuarios con amigos a√∫n.</span>;\r\n                            return ranking.map((u: { nick: string; numAmigos: number }, i: number) => (\r\n                                <span key={u.nick} className=\"block\">{i + 1}. <b><UserLink nick={u.nick} /></b> ({u.numAmigos} amigos)</span>\r\n                            ));\r\n                        })()}</li>\r\n                        <li><span className=\"mr-2 text-xl\">üìñ</span><b>Usuarios con m√°s historias:</b> {(() => {\r\n                            const historiasPorAutor: Record<string, number> = {};\r\n                            historias.forEach((h: any) => {\r\n                                if (h.autor) {\r\n                                    historiasPorAutor[h.autor] = (historiasPorAutor[h.autor] || 0) + 1;\r\n                                }\r\n                            });\r\n                            const ranking = Object.entries(historiasPorAutor)\r\n                                .map(([nick, totalHistorias]: [string, number]) => ({ nick, totalHistorias }))\r\n                                .filter((u: { nick: string; totalHistorias: number }) => u.nick && u.totalHistorias > 0)\r\n                                .sort((a: { totalHistorias: number }, b: { totalHistorias: number }) => b.totalHistorias - a.totalHistorias)\r\n                                .slice(0, 5);\r\n                            if (ranking.length === 0) return <span className=\"block\">No hay usuarios con historias a√∫n.</span>;\r\n                            return ranking.map((u: { nick: string; totalHistorias: number }, i: number) => (\r\n                                <span key={u.nick} className=\"block\">{i + 1}. <b><UserLink nick={u.nick} /></b> ({u.totalHistorias} historias)</span>\r\n                            ));\r\n                        })()}</li>\r\n                        <li><span className=\"mr-2 text-xl\">üèÜ</span><b>Usuarios con m√°s concursos ganados:</b> {(() => {\r\n                            const ranking = users.map((u: any) => ({\r\n                                nick: u.nick,\r\n                                nombre: u.nombre,\r\n                                totalConcursos: u.concursosGanados || 0\r\n                            }))\r\n                                .filter((u: { nick: string; nombre: string; totalConcursos: number }) => u.totalConcursos > 0)\r\n                                .sort((a: { totalConcursos: number }, b: { totalConcursos: number }) => b.totalConcursos - a.totalConcursos)\r\n                                .slice(0, 5);\r\n                            if (ranking.length === 0) return <span className=\"block\">No hay usuarios con concursos ganados a√∫n.</span>;\r\n                            return ranking.map((u: { nick: string; totalConcursos: number }, i: number) => (\r\n                                <span key={u.nick} className=\"block\">{i + 1}. <b><UserLink nick={u.nick} /></b> ({u.totalConcursos} concursos)</span>\r\n                            ));\r\n                        })()}</li>\r\n                        <li><span className=\"mr-2 text-xl\">üèÜ</span><b>Usuarios con m√°s competiciones superadas:</b> {(() => {\r\n                            const ranking = users\r\n                                .map((u: any) => ({\r\n                                    nick: u.nick,\r\n                                    nombre: u.nombre,\r\n                                    totalCompeticiones: u.competicionesSuperadas || 0\r\n                                }))\r\n                                .filter((u: { totalCompeticiones: number }) => u.totalCompeticiones > 0)\r\n                                .sort((a: { totalCompeticiones: number }, b: { totalCompeticiones: number }) => b.totalCompeticiones - a.totalCompeticiones)\r\n                                .slice(0, 5);\r\n                            if (ranking.length === 0) return <span className=\"block\">No hay usuarios con competiciones superadas a√∫n.</span>;\r\n                            return ranking.map((u: { nick: string; totalCompeticiones: number }, i: number) => (\r\n                                <span key={u.nick} className=\"block\">{i + 1}. <b><UserLink nick={u.nick} /></b> ({u.totalCompeticiones} competiciones)</span>\r\n                            ));\r\n                        })()}</li>\r\n\r\n                    </ul>\r\n                </div>\r\n            </div>\r\n            {/* Bloque Premium: Estad√≠sticas Avanzadas Solo para Premium */}\r\n            {isPremium && (\r\n                <div className=\"max-w-5xl mx-auto mt-8\">\r\n                    <div className=\"bg-gradient-to-r from-yellow-400 via-orange-500 to-red-500 rounded-2xl p-1 shadow-2xl\">\r\n                        <div className=\"bg-white rounded-2xl p-6\">\r\n                            <h2 className=\"text-xl font-bold text-center mb-6 text-transparent bg-clip-text bg-gradient-to-r from-yellow-500 to-orange-600\">\r\n                                üëë Estad√≠sticas Premium Avanzadas üëë\r\n                            </h2>\r\n\r\n                            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n                                {/* An√°lisis Personal Premium */}\r\n                                <div className=\"bg-gradient-to-br from-blue-50 to-indigo-100 rounded-xl p-4\">\r\n                                    <h3 className=\"font-bold text-blue-800 mb-3 text-center\">üìà Tu An√°lisis Personal</h3>\r\n                                    <ul className=\"space-y-2 text-sm\">\r\n                                        <li className=\"flex justify-between\">\r\n                                            <span>üéØ Precisi√≥n promedio:</span>\r\n                                            <span className=\"font-bold text-blue-600\">{(() => {\r\n                                                if (currentUser) {\r\n                                                    const acertadas = currentUser.respuestasAcertadas || 0;\r\n                                                    const falladas = 0; // No hay campo en DB\r\n                                                    const total = acertadas + falladas;\r\n                                                    return total > 0 ? ((acertadas / total) * 100).toFixed(1) + '%' : '0%';\r\n                                                }\r\n                                                return '0%';\r\n                                            })()}</span>\r\n                                        </li>\r\n                                        <li className=\"flex justify-between\">\r\n                                            <span>‚ö° Racha actual:</span>\r\n                                            <span className=\"font-bold text-blue-600\">{currentUser?.racha || 0} d√≠as</span>\r\n                                        </li>\r\n                                        <li className=\"flex justify-between\">\r\n                                            <span>üìÖ D√≠as activo:</span>\r\n                                            <span className=\"font-bold text-blue-600\">{(() => {\r\n                                                if (currentUser?.fechaRegistro) {\r\n                                                    const fechaReg = new Date(currentUser.fechaRegistro);\r\n                                                    const ahora = new Date();\r\n                                                    const diffTime = Math.abs(ahora.getTime() - fechaReg.getTime());\r\n                                                    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\r\n                                                    return diffDays;\r\n                                                }\r\n                                                return 0;\r\n                                            })()}</span>\r\n                                        </li>\r\n                                        <li className=\"flex justify-between\">\r\n                                            <span>üèÜ Tu ranking:</span>\r\n                                            <span className=\"font-bold text-blue-600\">{(() => {\r\n                                                // Ranking basado en respuestasAcertadas\r\n                                                if (users.length > 0 && currentUser) {\r\n                                                    const usersWithPoints = users.map((u: any) => ({\r\n                                                        ...u,\r\n                                                        puntosTotales: u.respuestasAcertadas || 0\r\n                                                    }));\r\n                                                    const sorted = usersWithPoints.sort((a: any, b: any) => b.puntosTotales - a.puntosTotales);\r\n                                                    const position = sorted.findIndex((u: any) => u.nick === currentUser.nick) + 1;\r\n                                                    return position > 0 ? `#${position}` : '-';\r\n                                                }\r\n                                                return '-';\r\n                                            })()}</span>\r\n                                        </li>\r\n                                    </ul>\r\n                                </div>\r\n\r\n                                {/* An√°lisis de Materias Premium */}\r\n                                <div className=\"bg-gradient-to-br from-green-50 to-emerald-100 rounded-xl p-4\">\r\n                                    <h3 className=\"font-bold text-green-800 mb-3 text-center\">üìö An√°lisis por Materias</h3>\r\n                                    <ul className=\"space-y-2 text-sm\">\r\n                                        <li className=\"flex justify-between\">\r\n                                            <span>üî¨ Matem√°ticas:</span>\r\n                                            <span className=\"font-bold text-green-600\">Datos no disponibles</span>\r\n                                        </li>\r\n                                        <li className=\"flex justify-between\">\r\n                                            <span>üìñ Lenguaje:</span>\r\n                                            <span className=\"font-bold text-green-600\">Datos no disponibles</span>\r\n                                        </li>\r\n                                        <li className=\"flex justify-between\">\r\n                                            <span>üåç Geograf√≠a:</span>\r\n                                            <span className=\"font-bold text-green-600\">Datos no disponibles</span>\r\n                                        </li>\r\n                                        <li className=\"flex justify-between\">\r\n                                            <span>üìö Historia:</span>\r\n                                            <span className=\"font-bold text-green-600\">Datos no disponibles</span>\r\n                                        </li>\r\n                                        <li className=\"flex justify-between\">\r\n                                            <span>üé® Tu fuerte:</span>\r\n                                            <span className=\"font-bold text-green-600\">Datos no disponibles</span>\r\n                                        </li>\r\n                                    </ul>\r\n                                </div>\r\n\r\n                                {/* Logros y Proyecci√≥n Premium */}\r\n                                <div className=\"bg-gradient-to-br from-purple-50 to-violet-100 rounded-xl p-4\">\r\n                                    <h3 className=\"font-bold text-purple-800 mb-3 text-center\">üéØ Logros y Proyecci√≥n</h3>\r\n                                    <ul className=\"space-y-2 text-sm\">\r\n                                        <li className=\"flex justify-between\">\r\n                                            <span>üìà Crecimiento:</span>\r\n                                            <span className=\"font-bold text-purple-600\">{(() => {\r\n                                                if (currentUser) {\r\n                                                    const acertadas = currentUser.respuestasAcertadas || 0;\r\n                                                    const falladas = 0;\r\n                                                    const total = acertadas + falladas;\r\n                                                    if (total > 0) {\r\n                                                        const precision = (acertadas / total) * 100;\r\n                                                        const crecimiento = Math.max(0, Math.floor(precision - 50));\r\n                                                        return `+${crecimiento}% sem.`;\r\n                                                    }\r\n                                                }\r\n                                                return '+0% sem.';\r\n                                            })()}</span>\r\n                                        </li>\r\n                                        <li className=\"flex justify-between\">\r\n                                            <span>üéØ Meta semanal:</span>\r\n                                            <span className=\"font-bold text-purple-600\">{(() => {\r\n                                                if (currentUser) {\r\n                                                    const acertadas = currentUser.respuestasAcertadas || 0;\r\n                                                    const falladas = 0;\r\n                                                    const total = acertadas + falladas;\r\n                                                    if (total > 0) {\r\n                                                        const precision = (acertadas / total) * 100;\r\n                                                        return precision >= 75 ? '75% ‚úÖ' : `${precision.toFixed(1)}% ‚ùå`;\r\n                                                    }\r\n                                                }\r\n                                                return '0% ‚ùå';\r\n                                            })()}</span>\r\n                                        </li>\r\n                                        <li className=\"flex justify-between\">\r\n                                            <span>‚≠ê Pr√≥ximo nivel:</span>\r\n                                            <span className=\"font-bold text-purple-600\">{(() => {\r\n                                                if (currentUser) {\r\n                                                    const puntosActuales = calcularPuntosTotales(currentUser);\r\n                                                    const nivelActual = Math.floor(puntosActuales / 100);\r\n                                                    const puntosParaSiguiente = ((nivelActual + 1) * 100) - puntosActuales;\r\n                                                    return `${puntosParaSiguiente} pts`;\r\n                                                }\r\n                                                return '100 pts';\r\n                                            })()}</span>\r\n                                        </li>\r\n                                    </ul>\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Gr√°fico de Progreso Premium */}\r\n                            <div className=\"mt-6 bg-gradient-to-r from-indigo-50 to-purple-50 rounded-xl p-4\">\r\n                                <h3 className=\"font-bold text-indigo-800 mb-3 text-center\">üìä Gr√°fico de Progreso Semanal</h3>\r\n                                <div className=\"flex items-end justify-between h-32 gap-2\">\r\n                                    {[...Array(7)].map((_, i) => {\r\n                                        const dayActivities = (() => {\r\n                                            if (currentUser) {\r\n                                                const acertadas = currentUser.respuestasAcertadas || 0;\r\n                                                const total = acertadas;\r\n\r\n                                                // Simular actividad distribuida a lo largo de la semana\r\n                                                const baseActivity = Math.floor(total / 7);\r\n                                                const variation = Math.floor(Math.random() * 5) - 2; // -2 a +2\r\n                                                return Math.max(0, baseActivity + variation);\r\n                                            }\r\n                                            return Math.floor(Math.random() * 5) + 1;\r\n                                        })();\r\n\r\n                                        const maxHeight = 25; // altura m√°xima esperada\r\n                                        const height = Math.max(20, Math.min(100, (dayActivities / maxHeight) * 80 + 20));\r\n                                        const day = ['L', 'M', 'X', 'J', 'V', 'S', 'D'][i];\r\n                                        const isToday = i === new Date().getDay() - 1 || (new Date().getDay() === 0 && i === 6);\r\n\r\n                                        return (\r\n                                            <div key={i} className=\"flex flex-col items-center\">\r\n                                                <div\r\n                                                    className={`w-8 rounded-t-md ${isToday ? 'bg-gradient-to-t from-orange-500 to-red-500' : 'bg-gradient-to-t from-blue-500 to-purple-500'}`}\r\n                                                    style={{ height: `${height}%` }}\r\n                                                ></div>\r\n                                                <span className={`text-xs mt-1 font-semibold ${isToday ? 'text-orange-600' : 'text-indigo-600'}`}>\r\n                                                    {day}\r\n                                                </span>\r\n                                                <span className=\"text-xs text-gray-500\">\r\n                                                    {dayActivities}\r\n                                                </span>\r\n                                            </div>\r\n                                        );\r\n                                    })}\r\n                                </div>\r\n                                <div className=\"text-center mt-3 text-sm text-indigo-600\">\r\n                                    üìà <strong>Tendencia:</strong> {(() => {\r\n                                        if (currentUser) {\r\n                                            const acertadas = currentUser.respuestasAcertadas || 0;\r\n                                            const falladas = 0;\r\n                                            const precision = falladas + acertadas > 0 ? (acertadas / (falladas + acertadas)) * 100 : 0;\r\n\r\n                                            if (precision >= 80) return '¬°Excelente! Mant√©n este nivel de precisi√≥n.';\r\n                                            if (precision >= 60) return '¬°Vas muy bien! Mant√©n el ritmo esta semana.';\r\n                                            if (precision >= 40) return 'Buen progreso. ¬°Sigue practicando!';\r\n                                            return 'Empezando bien. ¬°Cada respuesta cuenta!';\r\n                                        }\r\n                                        return '¬°Empieza tu aventura de aprendizaje!';\r\n                                    })()}\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Comparativa Premium */}\r\n                            <div className=\"mt-6 bg-gradient-to-r from-orange-50 to-red-50 rounded-xl p-4\">\r\n                                <h3 className=\"font-bold text-orange-800 mb-3 text-center\">‚öîÔ∏è Tu Posici√≥n vs. Mejores</h3>\r\n                                <div className=\"grid grid-cols-3 gap-4 text-center\">\r\n                                    <div className=\"bg-white rounded-lg p-3\">\r\n                                        <div className=\"text-2xl\">ü•á</div>\r\n                                        <div className=\"text-xs text-gray-600\">1¬∫ Lugar</div>\r\n                                        <div className=\"font-bold text-yellow-600\">{(() => {\r\n                                            const usersWithPoints = users.map((u: any) => ({\r\n                                                ...u,\r\n                                                puntosTotales: u.respuestasAcertadas || 0\r\n                                            }));\r\n                                            const sorted = usersWithPoints.sort((a: any, b: any) => b.puntosTotales - a.puntosTotales);\r\n                                            return sorted[0]?.puntosTotales || 0;\r\n                                        })()}</div>\r\n                                        <div className=\"text-xs text-gray-500\">{(() => {\r\n                                            const usersWithPoints = users.map((u: any) => ({\r\n                                                ...u,\r\n                                                puntosTotales: u.respuestasAcertadas || 0\r\n                                            }));\r\n                                            const sorted = usersWithPoints.sort((a: any, b: any) => b.puntosTotales - a.puntosTotales);\r\n                                            return sorted[0]?.nick || 'Nadie';\r\n                                        })()}</div>\r\n                                    </div>\r\n                                    <div className=\"bg-gradient-to-r from-blue-100 to-purple-100 rounded-lg p-3 border-2 border-blue-300\">\r\n                                        <div className=\"text-2xl\">üëë</div>\r\n                                        <div className=\"text-xs text-blue-600 font-bold\">T√ö</div>\r\n                                        <div className=\"font-bold text-blue-600\">{currentUser ? (currentUser.respuestasAcertadas || 0) : 0}</div>\r\n                                        <div className=\"text-xs text-blue-500\">{(() => {\r\n                                            if (currentUser) {\r\n                                                const usersWithPoints = users.map((u: any) => ({\r\n                                                    ...u,\r\n                                                    puntosTotales: u.respuestasAcertadas || 0\r\n                                                }));\r\n                                                const sorted = usersWithPoints.sort((a: any, b: any) => b.puntosTotales - a.puntosTotales);\r\n                                                const position = sorted.findIndex((u: any) => u.nick === currentUser.nick) + 1;\r\n                                                return position > 0 ? `Posici√≥n #${position}` : 'Sin clasificar';\r\n                                            }\r\n                                            return 'Sin clasificar';\r\n                                        })()}</div>\r\n                                    </div>\r\n                                    <div className=\"bg-white rounded-lg p-3\">\r\n                                        <div className=\"text-2xl\">üéØ</div>\r\n                                        <div className=\"text-xs text-gray-600\">Promedio</div>\r\n                                        <div className=\"font-bold text-gray-600\">{(() => {\r\n                                            const total = users.reduce((sum: number, u: any) => sum + (u.respuestasAcertadas || 0), 0);\r\n                                            return Math.floor(total / users.length);\r\n                                        })()}</div>\r\n                                        <div className=\"text-xs text-gray-500\">{(() => {\r\n                                            return `${users.length} usuarios`;\r\n                                        })()}</div>\r\n                                    </div>\r\n                                </div>\r\n                                {/* Indicador de diferencia con el promedio */}\r\n                                <div className=\"mt-3 text-center text-sm\">\r\n                                    {(() => {\r\n                                        if (currentUser) {\r\n                                            const total = users.reduce((sum: number, u: any) => sum + (u.respuestasAcertadas || 0), 0);\r\n                                            const promedio = Math.floor(total / users.length);\r\n                                            const tusPuntos = currentUser.respuestasAcertadas || 0;\r\n                                            const diferencia = tusPuntos - promedio;\r\n\r\n                                            if (diferencia > 0) {\r\n                                                return <span className=\"text-green-600\">üìà +{diferencia} puntos sobre el promedio</span>;\r\n                                            } else if (diferencia < 0) {\r\n                                                return <span className=\"text-red-600\">üìâ {Math.abs(diferencia)} puntos bajo el promedio</span>;\r\n                                            } else {\r\n                                                return <span className=\"text-blue-600\">üéØ Exactamente en el promedio</span>;\r\n                                            }\r\n                                        }\r\n                                        return <span className=\"text-gray-500\">Sin datos para comparar</span>;\r\n                                    })()}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {/* Bloque 3: Mejores estad√≠sticas y curiosidades */}\r\n            <div className=\"bg-white rounded-lg shadow-md p-6 max-w-5xl mx-auto mt-8\" >\r\n                <h2 className=\"text-lg font-bold mb-4 text-center\">Mejores estad√≠sticas</h2>\r\n                <ul className=\"space-y-2 text-center\">\r\n                    <li><span className=\"mr-2 text-xl\">üìñ</span><b>Historia con m√°s likes:</b> {(() => {\r\n                        if (historias.length === 0) return \"-\";\r\n                        const top = historias.reduce((max: any, h: any) => {\r\n                            if ((h.likes || 0) > (max.likes || 0)) return h;\r\n                            return max;\r\n                        }, historias[0]);\r\n                        return (\r\n                            <span>\r\n                                <b>{top.titulo}</b> por <b><UserLink nick={top.autor} /></b> <span className=\"text-pink-600\">‚ù§Ô∏è {top.likes || 0}</span>\r\n                            </span>\r\n                        );\r\n                    })()}</li>\r\n                    <li><span className=\"mr-2 text-xl\">üí¨</span><b>Historia m√°s comentada:</b> {(() => {\r\n                        if (historias.length === 0) return \"-\";\r\n                        const top = historias.reduce((max: any, h: any) => {\r\n                            const comentarios = h.comentarios ? h.comentarios.length : 0;\r\n                            const maxComentarios = max.comentarios ? max.comentarios.length : 0;\r\n                            if (comentarios > maxComentarios) return h;\r\n                            return max;\r\n                        }, historias[0]);\r\n                        return (\r\n                            <span>\r\n                                <b>{top.titulo}</b> por <b><UserLink nick={top.autor} /></b> <span className=\"text-blue-600\">üí¨ {top.comentarios ? top.comentarios.length : 0}</span>\r\n                            </span>\r\n                        );\r\n                    })()}</li>\r\n                    <li><span className=\"mr-2 text-xl\">üè´</span><b>Centro con m√°s historias creadas:</b> {(() => {\r\n                        if (historias.length === 0 || users.length === 0) return \"-\";\r\n                        const nickToCentro: Record<string, string> = {};\r\n                        users.forEach((u: any) => {\r\n                            if (u.nick && u.centro) {\r\n                                nickToCentro[u.nick] = u.centro;\r\n                            }\r\n                        });\r\n                        const historiasPorCentro: Record<string, number> = {};\r\n                        historias.forEach((h: any) => {\r\n                            const centro = h.centro || nickToCentro[h.autor] || null;\r\n                            if (centro) {\r\n                                historiasPorCentro[centro] = (historiasPorCentro[centro] || 0) + 1;\r\n                            }\r\n                        });\r\n                        const top = Object.entries(historiasPorCentro).sort((a, b) => b[1] - a[1])[0];\r\n                        if (!top) return \"-\";\r\n                        return (\r\n                            <span>\r\n                                <b>{top[0]}</b> <span className=\"text-purple-600\">üè´ {top[1]}</span>\r\n                            </span>\r\n                        );\r\n                    })()}</li>\r\n                    <li><span className=\"mr-2 text-xl\">üè´</span><b>Centro Escolar con m√°s usuarios activos:</b> {(() => {\r\n                        if (users.length === 0) return \"-\";\r\n                        const usuariosPorCentro: Record<string, number> = {};\r\n                        users.forEach((u: any) => {\r\n                            if (u.centro) {\r\n                                usuariosPorCentro[u.centro] = (usuariosPorCentro[u.centro] || 0) + 1;\r\n                            }\r\n                        });\r\n                        const top = Object.entries(usuariosPorCentro).sort((a, b) => b[1] - a[1])[0];\r\n                        if (!top) return \"-\";\r\n                        return (\r\n                            <span>\r\n                                <b>{top[0]}</b> <span className=\"text-blue-600\">üè´ {top[1]}</span>\r\n                            </span>\r\n                        );\r\n                    })()}</li>\r\n                </ul>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}