module.exports=[56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},56677,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944);a.s(["default",0,()=>{let a=(0,d.useRouter)(),[e,f]=(0,c.useState)(null),[g,h]=(0,c.useState)(!1),[i,j]=(0,c.useState)(!0),[k,l]=(0,c.useState)([]),[m,n]=(0,c.useState)(null),[o,p]=(0,c.useState)(1);(0,c.useEffect)(()=>{(async()=>{try{let b=await fetch("/api/auth/me");if(!b.ok)return void a.push("/");let c=await b.json();f(c);let d=1;if(c.esProfesor||"docente"===c.tipo||"Docente"===c.tipo)d=6;else if(c.curso)if("string"==typeof c.curso){let a=c.curso.match(/(\d)/);a&&(d=parseInt(a[1]))}else"number"==typeof c.curso&&(d=c.curso);d<1&&(d=1),d>6&&(d=6),p(d);let e=await fetch("/api/premium/data");if(e.ok){let b=await e.json();b.activo&&b.fechaExpiracion&&new Date(b.fechaExpiracion)>new Date?(h(!0),await r()):a.push("/premium-nuevo")}else a.push("/premium-nuevo")}catch(b){console.error("Error loading user:",b),a.push("/")}j(!1)})()},[]);let q=a=>{let b=a.match(/torneo-mensual-(\d)primaria/);return!!b&&parseInt(b[1])===o},r=async()=>{try{let a=await fetch("/api/premium/torneos");if(a.ok){let b=await a.json();if(b.torneos)return void l(b.torneos)}}catch(a){console.error("Error loading torneos:",a)}let a=new Date().getMonth(),b=new Date().getFullYear(),c=[{id:"torneo-mensual-1primaria",nombre:"Torneo Mensual 1¬∫ Primaria",descripcion:"Compite en el torneo mensual de 1¬∫ Primaria. 25 preguntas de asignaturas generales.",fechaInicio:new Date().toISOString(),fechaFin:new Date(b,a+1,0).toISOString(),categoria:"general",premio:"Medalla Especial + 200 puntos Liga Premium",maxParticipantes:16,participantes:[],estado:"registro"},{id:"torneo-mensual-2primaria",nombre:"Torneo Mensual 2¬∫ Primaria",descripcion:"Compite en el torneo mensual de 2¬∫ Primaria. 25 preguntas de asignaturas generales.",fechaInicio:new Date().toISOString(),fechaFin:new Date(b,a+1,0).toISOString(),categoria:"general",premio:"Medalla Especial + 200 puntos Liga Premium",maxParticipantes:16,participantes:[],estado:"registro"},{id:"torneo-mensual-3primaria",nombre:"Torneo Mensual 3¬∫ Primaria",descripcion:"Compite en el torneo mensual de 3¬∫ Primaria. 25 preguntas de asignaturas generales.",fechaInicio:new Date().toISOString(),fechaFin:new Date(b,a+1,0).toISOString(),categoria:"general",premio:"Medalla Especial + 200 puntos Liga Premium",maxParticipantes:16,participantes:[],estado:"registro"},{id:"torneo-mensual-4primaria",nombre:"Torneo Mensual 4¬∫ Primaria",descripcion:"Compite en el torneo mensual de 4¬∫ Primaria. 25 preguntas de asignaturas generales.",fechaInicio:new Date().toISOString(),fechaFin:new Date(b,a+1,0).toISOString(),categoria:"general",premio:"Medalla Especial + 200 puntos Liga Premium",maxParticipantes:16,participantes:[],estado:"registro"},{id:"torneo-mensual-5primaria",nombre:"Torneo Mensual 5¬∫ Primaria",descripcion:"Compite en el torneo mensual de 5¬∫ Primaria. 25 preguntas de asignaturas generales.",fechaInicio:new Date().toISOString(),fechaFin:new Date(b,a+1,0).toISOString(),categoria:"general",premio:"Medalla Especial + 200 puntos Liga Premium",maxParticipantes:16,participantes:[],estado:"registro"},{id:"torneo-mensual-6primaria",nombre:"Torneo Mensual 6¬∫ Primaria",descripcion:"Compite en el torneo mensual de 6¬∫ Primaria. 25 preguntas de asignaturas generales.",fechaInicio:new Date().toISOString(),fechaFin:new Date(b,a+1,0).toISOString(),categoria:"general",premio:"Medalla Especial + 200 puntos Liga Premium",maxParticipantes:16,participantes:[],estado:"registro"}];l(c),await fetch("/api/premium/torneos",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({torneos:c,lastReset:new Date().toISOString()})})},s=async a=>{if(!e)return;let b=k.map(b=>b.id===a?b.participantes.includes(e.nick)||b.participantes.length>=b.maxParticipantes?b:{...b,participantes:[...b.participantes,e.nick]}:b);l(b),await fetch("/api/premium/torneos",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({torneos:b})})},t=async b=>{await fetch("/api/premium/torneos",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({torneoActivo:{torneoId:b.id,curso:b.id.split("-")[2],startTime:new Date().toISOString()}})}),a.push("/aprende-con-pipo?modo=torneo")};return i?(0,b.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-blue-600 to-indigo-700 flex items-center justify-center",children:(0,b.jsx)("div",{className:"text-white text-xl",children:"Cargando Torneos Premium..."})}):g?(0,b.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-blue-600 to-indigo-700 p-8",children:(0,b.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,b.jsxs)("div",{className:"text-center mb-8",children:[(0,b.jsx)("h1",{className:"text-4xl font-bold text-white mb-2",children:"üéØ Torneos Premium"}),(0,b.jsx)("p",{className:"text-purple-100 text-lg",children:"Compite en torneos exclusivos y gana premios especiales"})]}),m?(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow-xl p-8 text-center",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold mb-4",children:m.nombre}),(0,b.jsx)("div",{className:"text-6xl mb-4",children:"üéØ"}),(0,b.jsx)("p",{className:"text-gray-600 mb-6",children:"Torneo en progreso..."}),(0,b.jsx)("div",{className:"animate-spin text-4xl",children:"‚è≥"}),(0,b.jsx)("p",{className:"text-sm text-gray-500 mt-4",children:"Calculando resultados..."})]}):(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:k.map(a=>(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow-xl overflow-hidden",children:[(0,b.jsx)("div",{className:"bg-gradient-to-r from-purple-500 to-blue-500 p-4",children:(0,b.jsx)("h3",{className:"text-lg font-bold text-white",children:a.nombre})}),(0,b.jsxs)("div",{className:"p-6",children:[(0,b.jsx)("p",{className:"text-gray-600 mb-4",children:a.descripcion}),(0,b.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,b.jsx)("span",{className:"text-gray-500",children:"Categor√≠a:"}),(0,b.jsx)("span",{className:"font-semibold text-purple-600",children:a.categoria})]}),(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,b.jsx)("span",{className:"text-gray-500",children:"Participantes:"}),(0,b.jsxs)("span",{className:"font-semibold",children:[a.participantes.length,"/",a.maxParticipantes]})]}),(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,b.jsx)("span",{className:"text-gray-500",children:"Estado:"}),(0,b.jsx)("span",{className:`font-semibold ${"registro"===a.estado?"text-green-600":"finalizado"===a.estado?"text-gray-600":"text-blue-600"}`,children:"registro"===a.estado?"Abierto":"finalizado"===a.estado?"Finalizado":"Disponible"})]})]}),(0,b.jsxs)("div",{className:"bg-yellow-50 p-3 rounded mb-4",children:[(0,b.jsx)("p",{className:"text-sm font-semibold text-yellow-800",children:"üèÜ Premio:"}),(0,b.jsx)("p",{className:"text-sm text-yellow-700",children:a.premio})]}),"finalizado"===a.estado&&a.ganador&&(0,b.jsxs)("div",{className:"bg-green-50 p-3 rounded mb-4",children:[(0,b.jsx)("p",{className:"text-sm font-semibold text-green-800",children:"ü•á Ganador:"}),(0,b.jsx)("p",{className:"text-sm text-green-700",children:a.ganador}),a.resultados&&a.resultados.length>0&&(0,b.jsxs)("div",{className:"mt-2",children:[(0,b.jsx)("p",{className:"text-xs text-green-600",children:"Top 3:"}),a.resultados.slice(0,3).map((a,c)=>(0,b.jsxs)("p",{className:"text-xs",children:[c+1,". ",a.nick," - ",a.aciertos,"/25 (",a.puntuacion,"pts)"]},c))]})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:["registro"===a.estado&&!a.participantes.includes(e.nick)&&q(a.id)&&(0,b.jsx)("button",{onClick:()=>s(a.id),disabled:a.participantes.length>=a.maxParticipantes,className:"flex-1 bg-purple-600 text-white px-4 py-2 rounded font-semibold hover:bg-purple-700 disabled:bg-gray-400 transition-colors",children:"Registrarse"}),"registro"===a.estado&&!a.participantes.includes(e.nick)&&!q(a.id)&&(0,b.jsxs)("span",{className:"flex-1 text-center bg-gray-100 text-gray-600 px-4 py-2 rounded font-semibold",children:["Solo para ",a.nombre.split(" ")[2]," ",a.nombre.split(" ")[3]]}),a.participantes.includes(e.nick)&&"registro"===a.estado&&(0,b.jsx)("span",{className:"flex-1 text-center bg-green-100 text-green-800 px-4 py-2 rounded font-semibold",children:"‚úì Registrado"}),a.participantes.includes(e.nick)&&(0,b.jsx)("button",{onClick:()=>t(a),className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded font-semibold hover:bg-blue-700 transition-colors",children:"Comenzar Torneo"})]})]})]},a.id))}),(0,b.jsxs)("div",{className:"mt-8 bg-white/10 backdrop-blur-sm rounded-lg p-6",children:[(0,b.jsx)("h3",{className:"text-xl font-bold text-white mb-4",children:"üìä Tus Estad√≠sticas en Torneos"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:[(0,b.jsxs)("div",{className:"bg-white/20 rounded p-4",children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-white",children:(()=>{let[a,b]=(0,c.useState)({victorias:0,participaciones:0,puntuacionTotal:0});return(0,c.useEffect)(()=>{fetch("/api/premium/competiciones").then(a=>a.ok?a.json():{victorias:0,participaciones:0,puntuacionTotal:0}).then(b)},[]),a.victorias})()}),(0,b.jsx)("div",{className:"text-purple-100",children:"Victorias"})]}),(0,b.jsxs)("div",{className:"bg-white/20 rounded p-4",children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-white",children:(()=>{let[a,b]=(0,c.useState)({victorias:0,participaciones:0,puntuacionTotal:0});return(0,c.useEffect)(()=>{fetch("/api/premium/competiciones").then(a=>a.ok?a.json():{victorias:0,participaciones:0,puntuacionTotal:0}).then(b)},[]),a.participaciones})()}),(0,b.jsx)("div",{className:"text-purple-100",children:"Participaciones"})]}),(0,b.jsxs)("div",{className:"bg-white/20 rounded p-4",children:[(0,b.jsxs)("div",{className:"text-2xl font-bold text-white",children:[(()=>{let[a,b]=(0,c.useState)({victorias:0,participaciones:0,puntuacionTotal:0});return(0,c.useEffect)(()=>{fetch("/api/premium/competiciones").then(a=>a.ok?a.json():{victorias:0,participaciones:0,puntuacionTotal:0}).then(b)},[]),a.participaciones>0?Math.round(a.victorias/a.participaciones*100):0})(),"%"]}),(0,b.jsx)("div",{className:"text-purple-100",children:"Tasa de Victoria"})]}),(0,b.jsxs)("div",{className:"bg-white/20 rounded p-4",children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-white",children:(()=>{let[a,b]=(0,c.useState)({victorias:0,participaciones:0,puntuacionTotal:0});return(0,c.useEffect)(()=>{fetch("/api/premium/competiciones").then(a=>a.ok?a.json():{victorias:0,participaciones:0,puntuacionTotal:0}).then(b)},[]),a.puntuacionTotal})()}),(0,b.jsx)("div",{className:"text-purple-100",children:"Puntuaci√≥n Total"})]})]})]}),(0,b.jsx)("div",{className:"text-center mt-8",children:(0,b.jsx)("button",{onClick:()=>a.push("/premium-nuevo"),className:"bg-white text-purple-600 px-8 py-3 rounded-lg font-bold hover:bg-purple-50 transition-colors",children:"‚Üê Volver a Premium"})})]})}):null}])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__cd69cdaa._.js.map