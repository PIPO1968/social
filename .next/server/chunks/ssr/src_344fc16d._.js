module.exports=[59722,a=>{"use strict";a.s(["BUTTON_STYLES",0,{primary:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 transition-colors",primaryBold:"bg-blue-500 text-white px-4 py-2 rounded font-semibold hover:bg-blue-600 transition-colors",primaryLarge:"bg-blue-500 text-white px-6 py-3 rounded font-semibold hover:bg-blue-600 transition-colors",secondary:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600 transition-colors",secondaryLarge:"bg-gray-500 text-white px-6 py-3 rounded font-semibold hover:bg-gray-600 transition-colors",lightGray:"bg-gray-200 text-gray-700 px-4 py-2 rounded font-semibold border hover:bg-gray-300 transition-colors",success:"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600 transition-colors",successBold:"bg-green-500 text-white px-4 py-2 rounded font-semibold hover:bg-green-600 transition-colors",successLarge:"bg-green-500 text-white px-6 py-3 rounded font-semibold hover:bg-green-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",danger:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600 transition-colors",dangerBold:"bg-red-500 text-white px-4 py-2 rounded font-semibold hover:bg-red-600 transition-colors",warning:"bg-yellow-500 text-white px-4 py-2 rounded hover:bg-yellow-600 transition-colors",warningBold:"bg-yellow-500 text-white px-4 py-2 rounded font-semibold hover:bg-yellow-600 transition-colors",purple:"bg-purple-500 text-white px-4 py-2 rounded hover:bg-purple-600 transition-colors",orange:"bg-orange-500 text-white px-4 py-2 rounded hover:bg-orange-600 transition-colors",pink:"bg-pink-500 text-white px-4 py-2 rounded hover:bg-pink-600 transition-colors",pinkBold:"bg-pink-500 text-white px-4 py-2 rounded font-semibold hover:bg-pink-600 transition-colors"},"CARD_STYLES",0,{default:"bg-white rounded-lg shadow-md p-6",bordered:"bg-white rounded-lg shadow-md p-6 border",premium:"bg-white rounded-lg shadow-md p-6 border-4 border-yellow-400 shadow-2xl shadow-yellow-400/50"}])},68384,55223,a=>{"use strict";var b=a.i(87924),c=a.i(72131);function d(a={}){let{timeLimit:b=300,onTimeUp:e,onCorrectAnswer:f,onWrongAnswer:g}=a,[h,i]=(0,c.useState)(""),[j,k]=(0,c.useState)(null),[l,m]=(0,c.useState)(""),[n,o]=(0,c.useState)(""),[p,q]=(0,c.useState)(""),[r,s]=(0,c.useState)([]),[t,u]=(0,c.useState)(b),[v,w]=(0,c.useState)(!1),[x,y]=(0,c.useState)(0),[z,A]=(0,c.useState)(0),[B,C]=(0,c.useState)(1);function D(a){return a.toLowerCase().normalize("NFD").replace(/\p{Diacritic}/gu,"").replace(/\s+/g,"").trim()}return(0,c.useEffect)(()=>{if(!h||v)return;if(0===t){w(!0),A(z-15),q("â° Tiempo agotado. -15 puntos"),e?.();return}let a=setTimeout(()=>u(t-1),1e3);return()=>clearTimeout(a)},[t,h,v,z,e]),{preguntaActual:h,setPreguntaActual:i,objetoPreguntaActual:j,setObjetoPreguntaActual:k,respuestaCorrecta:l,setRespuestaCorrecta:m,respuestaUsuario:n,setRespuestaUsuario:o,feedback:p,setFeedback:q,preguntasUsadas:r,setPreguntasUsadas:s,timeLeft:t,setTimeLeft:u,bloqueado:v,setBloqueado:w,aciertos:x,setAciertos:y,puntuacionTotal:z,setPuntuacionTotal:A,preguntaNumero:B,setPreguntaNumero:C,comprobarRespuesta:a=>{if(v)return;let b=D(n)===D(l);if(w(!0),b){let a=1;a=t>120?1:.5,q(`\xa1Correcto! ðŸŽ‰ +${a} punto${1!==a?"s":""}`),y(x+1),A(z+a),f?.(a)}else{let a=-.5;t<=120&&(a=-1),q(`Incorrecto. La respuesta era: ${l} ${a} punto${1!==Math.abs(a)?"s":""}`),A(z+a),g?.(a)}a?.(b)},generarPregunta:(a,c=25,d)=>{if(r.length>=c)return void d?.();if(0===a.length){i(""),k(null),m(""),q("No hay preguntas disponibles."),w(!1),u(b),s([]);return}let e=a.filter(a=>!r.includes(a.pregunta));if(0===e.length){i(""),k(null),m(""),q("Â¡Has respondido todas las preguntas disponibles!"),w(!0),u(b),s([]);return}let f=Math.floor(Math.random()*e.length),g=e[f];i(g.pregunta),k(g),m(g.respuesta),o(""),q(""),w(!1),u(b),s([...r,g.pregunta]),C(B+1)},resetQuiz:()=>{i(""),k(null),m(""),o(""),q(""),s([]),u(b),w(!1),y(0),A(0),C(1)}}}a.s(["useQuizLogic",()=>d],55223);var e=a.i(59722);a.s(["default",0,({userGrade:f,userSchool:g})=>{let{preguntaActual:h,setPreguntaActual:i,objetoPreguntaActual:j,setObjetoPreguntaActual:k,respuestaCorrecta:l,setRespuestaCorrecta:m,respuestaUsuario:n,setRespuestaUsuario:o,feedback:p,setFeedback:q,preguntasUsadas:r,setPreguntasUsadas:s,timeLeft:t,setTimeLeft:u,bloqueado:v,setBloqueado:w,aciertos:x,setAciertos:y,puntuacionTotal:z,setPuntuacionTotal:A,preguntaNumero:B,setPreguntaNumero:C,comprobarRespuesta:D,generarPregunta:E,resetQuiz:F}=d({timeLimit:300,onTimeUp:()=>{}}),[G,H]=c.default.useState(null),[I,J]=c.default.useState([]);c.default.useEffect(()=>{(async()=>{try{let a=await fetch("/api/auth/me");if(a.ok){let b=await a.json();H(b)}}catch(a){console.error("Error loading user:",a)}})()},[]);let K=async a=>{if(G)try{let b=await fetch("/api/user/update-likes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({likesDelta:a})});if(b.ok){let a=await b.json();H(a),window.dispatchEvent(new Event("profileUpdate"))}}catch(a){console.error("Error updating likes:",a)}},L=async a=>{try{(await fetch("/api/stats/championship",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).ok||console.error("Error updating championship stats")}catch(a){console.error("Error updating championship stats:",a)}},M=[];try{M=a.f({"../questions/campeonato-1primaria.json":{id:()=>5251,module:()=>a.r(5251)},"../questions/campeonato-2primaria.json":{id:()=>31668,module:()=>a.r(31668)},"../questions/campeonato-3primaria.json":{id:()=>85700,module:()=>a.r(85700)},"../questions/campeonato-4primaria.json":{id:()=>8433,module:()=>a.r(8433)},"../questions/campeonato-5primaria.json":{id:()=>59447,module:()=>a.r(59447)},"../questions/campeonato-6primaria.json":{id:()=>6959,module:()=>a.r(6959)}})(`../questions/campeonato-${f}primaria.json`)}catch{M=[]}return(0,b.jsxs)("div",{className:"p-4 bg-yellow-100 rounded-lg",children:[(0,b.jsx)("h2",{className:"text-xl font-bold mb-2",children:"Modo Campeonato"}),(0,b.jsxs)("p",{children:["Curso seleccionado: ",f,"Âº Primaria"]}),(0,b.jsxs)("p",{children:["Centro escolar: ",g||"No especificado"]}),(0,b.jsx)("button",{className:e.BUTTON_STYLES.primary+" mt-2",onClick:()=>{if(r.length>=25){if(i(""),m(""),q("Â¡Has completado las 25 preguntas del campeonato!"),w(!0),G){let a=new Date,b=a.getFullYear();a.getMonth()+1>=10&&(b+=1);let c=`t${b}`,d=I.filter(a=>a.correcta).length,e=I.filter(a=>!a.correcta).length,f=I.reduce((a,b)=>a+(b.likes||0),0);L({nick:G.nick,centro:G.centro,curso:G.curso,temporada:c,acertadas:d,falladas:e,likes:f,ganado:+(d>12),perdido:+(d<=12),tipo:G.tipo}),J([])}return}E(M,25)},children:"Generar pregunta de campeonato"}),h&&(0,b.jsxs)("div",{className:"mt-4",children:[(0,b.jsx)("div",{className:"font-semibold mb-2",children:h}),(0,b.jsxs)("div",{className:"font-bold text-lg mb-2",children:["â° Tiempo: ",Math.floor(t/60),":",(t%60).toString().padStart(2,"0")," min"]}),(0,b.jsx)("input",{type:"text",className:"border rounded px-2 py-1 w-full mb-2",value:n,onChange:a=>o(a.target.value),placeholder:"Escribe tu respuesta aquÃ­",disabled:v}),(0,b.jsx)("button",{className:e.BUTTON_STYLES.success,onClick:()=>{if(v)return;let a=n.toLowerCase().trim()===l.toLowerCase().trim();w(!0);let b=0;a?(q("Â¡Correcto! ðŸŽ‰"),b=t>120?2:1):(q(`Incorrecto. La respuesta era: ${l}`),b=t>120?-1:-2),K(b);let c={pregunta:h,respuestaUsuario:n,respuestaCorrecta:l,correcta:a,tiempo:t,likes:b};J(a=>[...a,c])},disabled:v,children:"Enviar respuesta"}),p&&(0,b.jsx)("div",{className:"mt-2 font-bold",children:p})]}),p&&!h&&(0,b.jsx)("div",{className:"mt-2 font-bold text-red-600",children:p})]})}],68384)}];

//# sourceMappingURL=src_344fc16d._.js.map