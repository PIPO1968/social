{"version":3,"sources":["turbopack:///[project]/src/components/UserLink.tsx","turbopack:///[project]/src/utils/renderNick.tsx","turbopack:///[project]/src/app/concursos/page.tsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\n\r\ninterface UserLinkProps {\r\n    nick: string;\r\n    className?: string;\r\n}\r\n\r\nexport const UserLink: React.FC<UserLinkProps> = ({ nick, className }) => {\r\n    const [isPremium, setIsPremium] = useState(false);\r\n\r\n    useEffect(() => {\r\n        const checkPremium = async () => {\r\n            if (nick) {\r\n                try {\r\n                    const response = await fetch(`/api/user/premium-status?nick=${encodeURIComponent(nick)}`);\r\n                    const data = await response.json();\r\n                    setIsPremium(data.isPremium || false);\r\n                } catch (error) {\r\n                    setIsPremium(false);\r\n                }\r\n            }\r\n        };\r\n\r\n        // Verificar inicialmente\r\n        checkPremium();\r\n    }, [nick]);\r\n\r\n    const normalized = (nick || \"\").trim().toLowerCase();\r\n    if (!nick || normalized === \"anonimo\" || normalized === \"anÃ³nimo\") {\r\n        return <span className={className || \"text-gray-500\"}>{nick || \"(sin nick)\"}</span>;\r\n    }\r\n\r\n    return (\r\n        <a\r\n            href={`/perfil/${encodeURIComponent(nick)}`}\r\n            className={className || \"text-blue-600 underline hover:text-blue-800\"}\r\n            title={`Ver perfil de ${nick}${isPremium ? ' (Usuario Premium)' : ''}`}\r\n        >\r\n            {nick}\r\n            {isPremium && (\r\n                <span className=\"ml-1 inline-flex items-center\">\r\n                    <span\r\n                        className=\"bg-gradient-to-r from-sky-100 to-blue-100 text-amber-900 text-xs px-2 py-1 rounded-full font-bold shadow-md border border-sky-300\"\r\n                        title=\"Usuario Premium\"\r\n                    >\r\n                        ðŸ‘‘\r\n                    </span>\r\n                </span>\r\n            )}\r\n        </a>\r\n    );\r\n};\r\n","import React from \"react\";\r\nimport { UserLink } from \"@/components/UserLink\";\r\n\r\nexport function renderNick(nick: string, className?: string) {\r\n    return <UserLink nick={nick} className={className} />;\r\n}\r\n","\"use client\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { renderNick } from \"@/utils/renderNick\";\r\nimport { useTranslation } from \"@/utils/i18n\";\r\n\r\nexport default function Concursos() {\r\n    const [concursos, setConcursos] = useState<any[]>([]);\r\n\r\n    const { t } = useTranslation();\r\n\r\n    useEffect(() => {\r\n        const fetchConcursos = async () => {\r\n            try {\r\n                const response = await fetch('/api/concursos');\r\n                const data = await response.json();\r\n                setConcursos(data.concursos || []);\r\n            } catch (error) {\r\n                console.error('Error cargando concursos:', error);\r\n                setConcursos([]);\r\n            }\r\n        };\r\n        fetchConcursos();\r\n    }, []);\r\n\r\n    const hoy = new Date();\r\n    const activos = concursos.filter(c => new Date(c.fin) >= hoy).slice(0, 10);\r\n    const finalizados = concursos.filter(c => new Date(c.fin) < hoy).slice(0, 10);\r\n\r\n    const mostrarActivos = activos.length > 0\r\n        ? activos\r\n        : Array.from({ length: 10 }, (_, idx) => ({\r\n            titulo: t('aunNoHayConcursoActivo'),\r\n            autor: '',\r\n            inicio: '',\r\n            fin: '',\r\n        }));\r\n    const mostrarFinalizados = finalizados.length > 0\r\n        ? finalizados\r\n        : Array.from({ length: 10 }, (_, idx) => ({\r\n            titulo: t('aunNoHayConcursoFinalizado'),\r\n            autor: '',\r\n            inicio: '',\r\n            fin: '',\r\n        }));\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-green-100 p-8\">\r\n            <h1 className=\"text-2xl font-bold mb-4 text-center\">{t('concursosTitle')}</h1>\r\n            <div className=\"flex w-full max-w-5xl mx-auto gap-8\">\r\n                {/* Bloque Concursos Activos */}\r\n                <div className=\"flex-1 bg-white rounded-lg shadow-md p-6\">\r\n                    <h2 className=\"text-xl font-bold text-center mb-4\">{t('concursosActivos')}</h2>\r\n                    <ul className=\"divide-y\">\r\n                        {mostrarActivos.map((concurso, idx) => (\r\n                            <li key={idx} className=\"py-2\">\r\n                                <span className=\"font-bold\">{idx + 1}Âº </span>\r\n                                <a href={`/concurso/${concurso.numero}`} className=\"text-blue-700 font-semibold underline\" target=\"_blank\" rel=\"noopener noreferrer\">{concurso.titulo}</a>\r\n                                {concurso.autor && (\r\n                                    <span className=\"ml-2 text-gray-700\">{renderNick(concurso.autor)}</span>\r\n                                )}\r\n                                {concurso.inicio && (\r\n                                    <span className=\"ml-2 text-gray-500 text-sm\">Inicio: {concurso.inicio}</span>\r\n                                )}\r\n                                {concurso.fin && (\r\n                                    <span className=\"ml-2 text-gray-500 text-sm\">Final: {concurso.fin}</span>\r\n                                )}\r\n                            </li>\r\n                        ))}\r\n                    </ul>\r\n                </div>\r\n                {/* Bloque Concursos Finalizados */}\r\n                <div className=\"flex-1 bg-white rounded-lg shadow-md p-6\">\r\n                    <h2 className=\"text-xl font-bold text-center mb-4\">Concursos Finalizados</h2>\r\n                    <ul className=\"divide-y\">\r\n                        {mostrarFinalizados.map((concurso, idx) => (\r\n                            <li key={idx} className=\"py-2\">\r\n                                <span className=\"font-bold\">{idx + 1}Âº </span>\r\n                                <a href={`/concurso/${concurso.numero}`} className=\"text-blue-700 font-semibold underline\" target=\"_blank\" rel=\"noopener noreferrer\">{concurso.titulo}</a>\r\n                                {concurso.autor && (\r\n                                    <span className=\"ml-2 text-gray-700\">{renderNick(concurso.autor)}</span>\r\n                                )}\r\n                                {concurso.inicio && (\r\n                                    <span className=\"ml-2 text-gray-500 text-sm\">Inicio: {concurso.inicio}</span>\r\n                                )}\r\n                                {concurso.fin && (\r\n                                    <span className=\"ml-2 text-gray-500 text-sm\">Final: {concurso.fin}</span>\r\n                                )}\r\n                            </li>\r\n                        ))}\r\n                    </ul>\r\n                </div>\r\n            </div>\r\n            {/* Bloque Ãšltimos Ganadores de Concursos */}\r\n            <div className=\"max-w-3xl mx-auto mt-10 bg-white rounded-lg shadow-md p-6\">\r\n                <h2 className=\"text-xl font-bold text-center mb-4\">{t('ultimosGanadores')}</h2>\r\n                <ul className=\"divide-y\">\r\n                    {(() => {\r\n                        // Filtrar los que tengan ganador y mostrar los 25 mÃ¡s recientes\r\n                        const ganadores = concursos.filter((c: any) => c.ganador && c.ganador !== \"\").slice(0, 25);\r\n                        if (ganadores.length === 0) {\r\n                            return <li className=\"py-2 text-gray-500\">{t('aunNoHayGanadores')}</li>;\r\n                        }\r\n                        return ganadores.map((c: any, idx: number) => (\r\n                            <li key={idx} className=\"py-2\">\r\n                                <span className=\"font-bold\">{idx + 1}Âº </span>\r\n                                <span className=\"text-blue-700 font-semibold\">{c.titulo}</span>\r\n                                {c.autor && (\r\n                                    <span className=\"ml-2 text-gray-700\">{renderNick(c.autor)}</span>\r\n                                )}\r\n                                {c.ganador && (\r\n                                    <span className=\"ml-2\">\r\n                                        {renderNick(c.ganador, \"text-green-700 underline\")}\r\n                                    </span>\r\n                                )}\r\n                                {c.fechaFinal && (\r\n                                    <span className=\"ml-2 text-gray-500 text-sm\">Finalizado: {c.fechaFinal}</span>\r\n                                )}\r\n                            </li>\r\n                        ));\r\n                    })()}\r\n                </ul>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}