{"version":3,"sources":["turbopack:///[project]/node_modules/next/src/server/route-modules/app-page/vendored/contexts/hooks-client-context.ts","turbopack:///[project]/node_modules/next/src/server/route-modules/app-page/vendored/contexts/server-inserted-html.ts","turbopack:///[project]/src/utils/styles.ts","turbopack:///[project]/src/app/perfil/avatar/page.tsx"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].HooksClientContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].ServerInsertedHtml\n","// Constantes CSS reutilizables para mantener consistencia y eliminar duplicados\r\n\r\nexport const BUTTON_STYLES = {\r\n    primary: \"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 transition-colors\",\r\n    primaryBold: \"bg-blue-500 text-white px-4 py-2 rounded font-semibold hover:bg-blue-600 transition-colors\",\r\n    primaryLarge: \"bg-blue-500 text-white px-6 py-3 rounded font-semibold hover:bg-blue-600 transition-colors\",\r\n    secondary: \"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600 transition-colors\",\r\n    secondaryLarge: \"bg-gray-500 text-white px-6 py-3 rounded font-semibold hover:bg-gray-600 transition-colors\",\r\n    lightGray: \"bg-gray-200 text-gray-700 px-4 py-2 rounded font-semibold border hover:bg-gray-300 transition-colors\",\r\n    success: \"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600 transition-colors\",\r\n    successBold: \"bg-green-500 text-white px-4 py-2 rounded font-semibold hover:bg-green-600 transition-colors\",\r\n    successLarge: \"bg-green-500 text-white px-6 py-3 rounded font-semibold hover:bg-green-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed\",\r\n    danger: \"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600 transition-colors\",\r\n    dangerBold: \"bg-red-500 text-white px-4 py-2 rounded font-semibold hover:bg-red-600 transition-colors\",\r\n    warning: \"bg-yellow-500 text-white px-4 py-2 rounded hover:bg-yellow-600 transition-colors\",\r\n    warningBold: \"bg-yellow-500 text-white px-4 py-2 rounded font-semibold hover:bg-yellow-600 transition-colors\",\r\n    purple: \"bg-purple-500 text-white px-4 py-2 rounded hover:bg-purple-600 transition-colors\",\r\n    orange: \"bg-orange-500 text-white px-4 py-2 rounded hover:bg-orange-600 transition-colors\",\r\n    pink: \"bg-pink-500 text-white px-4 py-2 rounded hover:bg-pink-600 transition-colors\",\r\n    pinkBold: \"bg-pink-500 text-white px-4 py-2 rounded font-semibold hover:bg-pink-600 transition-colors\",\r\n} as const; export const INPUT_STYLES = {\r\n    default: \"border rounded px-3 py-2 w-full focus:outline-none focus:ring-2 focus:ring-blue-500\",\r\n    small: \"border rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500\",\r\n} as const;\r\n\r\nexport const CARD_STYLES = {\r\n    default: \"bg-white rounded-lg shadow-md p-6\",\r\n    bordered: \"bg-white rounded-lg shadow-md p-6 border\",\r\n    premium: \"bg-white rounded-lg shadow-md p-6 border-4 border-yellow-400 shadow-2xl shadow-yellow-400/50\",\r\n} as const;\r\n\r\nexport const TEXT_STYLES = {\r\n    label: \"block text-sm font-medium text-gray-700 mb-2\",\r\n    error: \"text-red-600 text-sm mt-1\",\r\n    success: \"text-green-600 text-sm mt-1\",\r\n} as const;","\"use client\";\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { BUTTON_STYLES } from \"../../../utils/styles\";\r\n\r\nconst AvatarSelector: React.FC = () => {\r\n    const router = useRouter();\r\n    const [user, setUser] = useState<any>(null);\r\n    const [loading, setLoading] = useState(true);\r\n    const [saving, setSaving] = useState(false);\r\n\r\n    useEffect(() => {\r\n        const loadUser = async () => {\r\n            try {\r\n                const response = await fetch('/api/auth/me');\r\n                if (response.ok) {\r\n                    const data = await response.json();\r\n                    setUser(data.user);\r\n                } else {\r\n                    router.push('/login');\r\n                    return;\r\n                }\r\n            } catch (error) {\r\n                console.error('Error loading user:', error);\r\n                router.push('/login');\r\n                return;\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        loadUser();\r\n    }, [router]);\r\n\r\n    if (loading) {\r\n        return (\r\n            <div className=\"min-h-screen bg-green-100 flex items-center justify-center\">\r\n                <div className=\"text-center\">\r\n                    <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-900 mx-auto mb-4\"></div>\r\n                    <p>Cargando...</p>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (!user) {\r\n        return (\r\n            <div className=\"min-h-screen bg-green-100 flex items-center justify-center\">\r\n                <div className=\"text-center\">\r\n                    <p>No se pudo cargar la informaciÃ³n del usuario.</p>\r\n                    <button\r\n                        className={BUTTON_STYLES.primary}\r\n                        onClick={() => router.push('/login')}\r\n                    >\r\n                        Ir al login\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    const isPremium = user.premium || false;\r\n\r\n    const simpleAvatars = [\r\n        '/avatars/simple1.png',\r\n        ...Array.from({ length: 29 }, (_, i) => `/avatars/simple${i + 2}.jpg`)\r\n    ];\r\n    const premiumAvatars = Array.from({ length: 50 }, (_, i) => `/avatars/apremium${i + 1}.jpg`);\r\n\r\n    // Mostrar todos los avatares siempre, pero marcar cuÃ¡les son premium\r\n    const allAvatars = [...simpleAvatars, ...premiumAvatars];\r\n    const premiumAvatarIndices = simpleAvatars.length; // Ãndice donde empiezan los premium\r\n\r\n    const handleSelectAvatar = async (avatar: string) => {\r\n        if (saving) return;\r\n\r\n        // Verificar si el avatar seleccionado es premium y el usuario no es premium\r\n        const isSelectedPremium = premiumAvatars.includes(avatar);\r\n        if (isSelectedPremium && !isPremium) {\r\n            alert('Solo usuarios premium pueden seleccionar avatares premium.');\r\n            return;\r\n        }\r\n\r\n        setSaving(true);\r\n        try {\r\n            const response = await fetch('/api/users/update', {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                },\r\n                body: JSON.stringify({ nick: user.nick, avatar }),\r\n            });\r\n\r\n            if (response.ok) {\r\n                router.push(\"/perfil\");\r\n            } else {\r\n                const error = await response.json();\r\n                alert('Error al actualizar el avatar: ' + (error.error || 'Desconocido'));\r\n            }\r\n        } catch (error) {\r\n            console.error('Error saving avatar:', error);\r\n            alert('Error al actualizar el avatar.');\r\n        } finally {\r\n            setSaving(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-green-100 flex flex-col items-center pt-8\">\r\n            <h1 className=\"text-3xl font-bold mb-4\">Seleccionar Avatar</h1>\r\n\r\n            {/* Indicador de avatares premium */}\r\n            <div className=\"mb-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg max-w-md\">\r\n                <div className=\"flex items-center gap-2 text-yellow-800\">\r\n                    <span className=\"text-lg\">ðŸ‘‘</span>\r\n                    <span className=\"font-semibold\">Avatares Premium</span>\r\n                </div>\r\n                <p className=\"text-sm text-yellow-700 mt-1\">\r\n                    Los avatares con corona dorada son exclusivos para usuarios Premium.\r\n                    {!isPremium && \" Â¡Hazte Premium para desbloquearlos!\"}\r\n                </p>\r\n            </div>\r\n\r\n            {saving && (\r\n                <div className=\"mb-4 text-center\">\r\n                    <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-900 mx-auto mb-2\"></div>\r\n                    <p>Guardando avatar...</p>\r\n                </div>\r\n            )}\r\n\r\n            <div className=\"grid grid-cols-5 gap-4 mb-8\">\r\n                {allAvatars.map((avatar, idx) => {\r\n                    const isPremiumAvatar = idx >= premiumAvatarIndices;\r\n                    const canSelect = !isPremiumAvatar || isPremium;\r\n\r\n                    return (\r\n                        <div key={idx} className=\"relative\">\r\n                            <img\r\n                                src={avatar}\r\n                                alt={`Avatar ${idx + 1}${isPremiumAvatar ? ' (Premium)' : ''}`}\r\n                                className={`w-16 h-16 rounded-full border-2 transition-all duration-200 ${!canSelect\r\n                                    ? 'cursor-not-allowed opacity-60 grayscale'\r\n                                    : 'cursor-pointer border-gray-300 hover:border-blue-400'\r\n                                    } ${isPremiumAvatar ? 'ring-2 ring-yellow-400 ring-opacity-50' : ''}`}\r\n                                onClick={() => canSelect && handleSelectAvatar(avatar)}\r\n                                title={isPremiumAvatar && !isPremium ? 'Avatar Premium - Hazte Premium para usarlo' : `Avatar ${idx + 1}`}\r\n                            />\r\n                            {isPremiumAvatar && (\r\n                                <div className=\"absolute -top-1 -right-1 w-5 h-5 bg-gradient-to-r from-yellow-400 to-yellow-600 rounded-full flex items-center justify-center text-xs font-bold text-white shadow-lg\">\r\n                                    ðŸ‘‘\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    );\r\n                })}\r\n            </div>\r\n            <div className=\"flex gap-4\">\r\n                <button\r\n                    className={BUTTON_STYLES.secondaryLarge}\r\n                    onClick={() => router.push(\"/perfil\")}\r\n                    disabled={saving}\r\n                >\r\n                    Volver\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default AvatarSelector;"],"names":["module","exports","require","vendored","HooksClientContext","ServerInsertedHtml"],"mappings":"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","ignoreList":[0,1]}