{"version":3,"sources":["turbopack:///[project]/src/app/crea-noticia/page.tsx"],"sourcesContent":["\"use client\";\r\nimport React, { useState } from \"react\";\r\n\r\nexport default function CreaNoticia() {\r\n    const [titulo, setTitulo] = useState(\"\");\r\n    const [contenido, setContenido] = useState(\"\");\r\n    const [enviando, setEnviando] = useState(false);\r\n\r\n    const handleEnviar = async () => {\r\n        setEnviando(true);\r\n        // Obtener usuario actual\r\n        try {\r\n            const response = await fetch('/api/auth/me');\r\n            const data = await response.json();\r\n            if (!data.user) {\r\n                alert(\"No se ha detectado usuario. Inicia sesión.\");\r\n                setEnviando(false);\r\n                return;\r\n            }\r\n            const autorNick = data.user.nick;\r\n\r\n            await fetch('/api/noticias', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({\r\n                    titulo,\r\n                    contenido,\r\n                    autorNick\r\n                })\r\n            });\r\n\r\n            alert(\"Noticia enviada!\");\r\n            setTitulo(\"\");\r\n            setContenido(\"\");\r\n        } catch (error) {\r\n            console.error('Error creando noticia:', error);\r\n            alert(\"Error enviando noticia\");\r\n        } finally {\r\n            setEnviando(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-blue-50 p-8\">\r\n            <h1 className=\"text-2xl font-bold mb-4 text-center\">Crear Noticia</h1>\r\n            <div className=\"bg-white rounded-lg shadow-md p-6 max-w-xl mx-auto flex flex-col gap-4\">\r\n                <input\r\n                    type=\"text\"\r\n                    placeholder=\"Título de la noticia\"\r\n                    className=\"w-full border rounded px-3 py-2 font-semibold text-lg mb-2\"\r\n                    value={titulo}\r\n                    onChange={e => setTitulo(e.target.value)}\r\n                />\r\n                <textarea\r\n                    placeholder=\"Escribe la noticia aquí...\"\r\n                    className=\"w-full border rounded px-3 py-2 min-h-[120px] mb-2\"\r\n                    value={contenido}\r\n                    onChange={e => setContenido(e.target.value)}\r\n                />\r\n                <button\r\n                    className=\"bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-6 rounded self-end\"\r\n                    onClick={handleEnviar}\r\n                    disabled={enviando}\r\n                >Enviar</button>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"uDACA,EAAA,EAAA,CAAA,CAAA,OAEe,SAAS,IACpB,GAAM,CAAC,EAAQ,EAAU,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IAC/B,CAAC,EAAW,EAAa,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IACrC,CAAC,EAAU,EAAY,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GAEnC,EAAe,UACjB,GAAY,GAEZ,GAAI,CACA,IAAM,EAAW,MAAM,MAAM,gBACvB,EAAO,MAAM,EAAS,IAAI,GAChC,GAAI,CAAC,EAAK,IAAI,CAAE,CACZ,MAAM,8CACN,GAAY,GACZ,MACJ,CACA,IAAM,EAAY,EAAK,IAAI,CAAC,IAAI,AAEhC,OAAM,MAAM,gBAAiB,CACzB,OAAQ,OACR,QAAS,CAAE,eAAgB,kBAAmB,EAC9C,KAAM,KAAK,SAAS,CAAC,QACjB,YACA,YACA,CACJ,EACJ,GAEA,MAAM,oBACN,EAAU,IACV,EAAa,GACjB,CAAE,MAAO,EAAO,CACZ,QAAQ,KAAK,CAAC,yBAA0B,GACxC,MAAM,yBACV,QAAU,CACN,GAAY,EAChB,CACJ,EAEA,MACI,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,wCACX,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,+CAAsC,kBACpD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mFACX,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACG,KAAK,OACL,YAAY,uBACZ,UAAU,6DACV,MAAO,EACP,SAAU,GAAK,EAAU,EAAE,MAAM,CAAC,KAAK,IAE3C,CAAA,EAAA,EAAA,GAAA,EAAC,WAAA,CACG,YAAY,6BACZ,UAAU,qDACV,MAAO,EACP,SAAU,GAAK,EAAa,EAAE,MAAM,CAAC,KAAK,IAE9C,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACG,UAAU,gFACV,QAAS,EACT,SAAU,WACb,gBAIjB"}