module.exports=[45246,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(57259);let e=a.i(85315).default.map(a=>({src:a.imagen,texto:a.titulo,tipo:"manual"}));var f=a.i(44355),g=a.i(50944),h=a.i(35475),i=a.i(54925);a.s(["default",0,()=>{let a;(0,g.useRouter)();let{user:j,setUser:k}=(0,h.useUser)(),[l,m]=(0,c.useState)(!1),[n,o]=(0,c.useState)(""),[p,q]=(0,c.useState)(""),[r,s]=(0,c.useState)(""),[t,u]=(0,c.useState)(""),[v,w]=(0,c.useState)(""),[x,y]=(0,c.useState)(""),[z,A]=(0,c.useState)(""),[B,C]=(0,c.useState)(1),[D,E]=(0,c.useState)(""),[F,G]=(0,c.useState)([]),[H,I]=(0,c.useState)(""),[J,K]=(0,c.useState)(""),[L,M]=(0,c.useState)([]),[N,O]=(0,c.useState)(!1),[P,Q]=(0,c.useState)(""),[R,S]=(0,c.useState)(""),[T,U]=(0,c.useState)(""),[V,W]=(0,c.useState)(""),[X,Y]=(0,c.useState)(""),[Z,$]=(0,c.useState)(""),[_,aa]=(0,c.useState)(null),[ab,ac]=(0,c.useState)(null),[ad,ae]=(0,c.useState)({trofeosDesbloqueados:[],trofeosBloqueados:[]}),[af,ag]=(0,c.useState)(null),[ah,ai]=(0,c.useState)([]),[aj,ak]=(0,c.useState)("1primaria"),[al,am]=(0,c.useState)("matematicas"),[an,ao]=(0,c.useState)(""),[ap,aq]=(0,c.useState)(""),[ar,as]=(0,c.useState)([]),{t:at}=(0,f.useTranslation)(),au=(0,c.useMemo)(()=>H&&_||{...j,trofeosDesbloqueados:ad.trofeosDesbloqueados,trofeosBloqueados:ad.trofeosBloqueados},[H,_,j,ad]);(0,c.useEffect)(()=>{fetch("/api/concursos").then(a=>a.json()).then(a=>{ai(a)}).catch(a=>{console.warn("No se pudo cargar la lista de concursos:",a)})},[]),(0,c.useEffect)(()=>{j&&j.nick&&(fetch("/api/premium/data?nick="+j.nick).then(a=>a.json()).then(a=>{a&&!a.error?ac(a):(ac(null),console.warn("No hay datos premium para este usuario."))}).catch(a=>{ac(null),console.warn("No se pudo cargar datos premium:",a)}),fetch("/api/user/profile?nick="+j.nick).then(a=>a.json()).then(a=>{a&&a.user&&(ag(a.user),fetch("/api/trofeos/user-trofeos?nick="+j.nick).then(a=>a.json()).then(b=>{b&&!b.error?(ae(b),aD(a.user,b)):(ae({trofeosDesbloqueados:[],trofeosBloqueados:[]}),aD(a.user,{trofeosDesbloqueados:[],trofeosBloqueados:[]}))}).catch(b=>{ae({trofeosDesbloqueados:[],trofeosBloqueados:[]}),console.warn("No se pudo cargar trofeos:",b),aD(a.user,{trofeosDesbloqueados:[],trofeosBloqueados:[]})}))}).catch(a=>{console.warn("No se pudo cargar datos del perfil:",a)}),fetch("/api/friends?action=requests&nick="+j.nick).then(a=>a.json()).then(a=>{a.requests?as(a.requests):as([])}).catch(a=>{as([]),console.warn("No se pudo cargar solicitudes:",a)}))},[j]),(0,c.useEffect)(()=>{j&&j.nick&&fetch("/api/chat?nick="+j.nick).then(a=>a.json()).then(a=>{M(a)}).catch(a=>{console.warn("No se pudo cargar los mensajes del chat:",a)})},[j]);let av=()=>{J.trim()&&j&&fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({from:j.nick,to:au.nick,text:J.trim()})}).then(()=>{K(""),fetch("/api/chat?nick="+j.nick).then(a=>a.json()).then(a=>M(a)).catch(a=>console.warn("No se pudo refrescar los mensajes:",a))}).catch(a=>{console.error("Error enviando mensaje:",a)})},aw=async a=>{if(j)try{(await fetch("/api/friends",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"accept",userNick:j.nick,requestId:a})})).ok?(as(b=>b.filter(b=>b.id!==a)),window.location.reload()):alert("Error al aceptar solicitud")}catch(a){alert("Error al aceptar solicitud")}},ax=async a=>{if(j)try{(await fetch("/api/friends",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"reject",userNick:j.nick,requestId:a})})).ok?(as(b=>b.filter(b=>b.id!==a)),window.location.reload()):alert("Error al rechazar solicitud")}catch(a){alert("Error al rechazar solicitud")}},ay=async()=>{if(X&&Z)try{await fetch("/api/concursos",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:X,ganador:Z})}),((a,b)=>{if(!a)return;let c=F.find(b=>b.nick===a)?.likes||0;fetch("/api/users/update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({nick:a,likes:c+10})}).then(a=>a.json()).then(b=>{G(F.map(c=>c.nick===a?b:c)),j&&j.nick===a&&k(b)}).catch(a=>console.error("Error updating likes:",a))})(Z,0),Y(""),$(""),fetch("/api/concursos").then(a=>a.json()).then(ai)}catch(a){console.error("Error asignando ganador:",a)}},az=async()=>{if(an.trim()&&ap.trim())try{let a=await fetch("/api/add-question",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({curso:aj,asignatura:al,pregunta:an.trim(),respuesta:ap.trim()})});await a.json(),a.ok&&(ao(""),aq(""))}catch(a){console.error("Error al enviar pregunta:",a)}},aA=[{src:"/trofeo25.jpg",texto:"Trofeo 1",tipo:"auto"},{src:"/trofeo7.jpg",texto:"Trofeo 2",tipo:"auto"},{src:"/trofeo12.jpg",texto:"Trofeo 3",tipo:"auto"},{src:"/trofeo5.jpg",texto:"Trofeo 4",tipo:"auto"},{src:"/trofeo13.png",texto:"Trofeo 5",tipo:"auto"},{src:"/trofeo17.jpg",texto:"Trofeo 6",tipo:"auto"},{src:"/trofeo27.jpg",texto:"Trofeo 7",tipo:"auto"},{src:"/trofeo10.jpg",texto:"Trofeo 8",tipo:"auto"},{src:"/trofeo23.jpg",texto:"Trofeo 9",tipo:"auto"},{src:"/trofeo15.jpg",texto:"Trofeo 10",tipo:"auto"},{src:"/trofeo26.jpg",texto:"Trofeo 11",tipo:"auto"},{src:"/trofeo1.jpg",texto:"Trofeo 12",tipo:"auto"},{src:"/trofeo22.jpg",texto:"Trofeo 13",tipo:"auto"},{src:"/trofeo14.jpg",texto:"Trofeo 14",tipo:"auto"},{src:"/trofeo20.jpg",texto:"Trofeo 15",tipo:"auto"},{src:"/trofeo11.jpg",texto:"Trofeo 16",tipo:"auto"},{src:"/trofeo24.jpg",texto:"Trofeo 17",tipo:"auto"},{src:"/trofeo18.jpg",texto:"Trofeo 18",tipo:"auto"},{src:"/trofeo19.jpg",texto:"Trofeo 19",tipo:"auto"},{src:"/trofeo15.jpg",texto:"Trofeo 20",tipo:"auto"},{src:"/trofeo9.jpg",texto:"Trofeo 21",tipo:"auto"},{src:"/trofeo8.jpg",texto:"Trofeo 22",tipo:"auto"},{src:"/trofeo21.jpg",texto:"Trofeo 23",tipo:"auto"},{src:"/trofeo16.jpg",texto:"Trofeo 24",tipo:"auto"},{src:"/trofeo1.jpg",texto:"ðŸ† CampeÃ³n Mensual",tipo:"asignado"},{src:"/trofeo2.jpg",texto:"ðŸ¥ˆ SubcampeÃ³n Mensual",tipo:"asignado"},{src:"/trofeo3.jpg",texto:"ðŸ¥‰ Tercer Lugar Mensual",tipo:"asignado"},{src:"/trofeo4.jpg",texto:"ðŸ… Top 10 Mensual",tipo:"asignado"},{src:"/trofeo5.jpg",texto:"ðŸ“š Participante Activo",tipo:"asignado"}],aB=[{src:"/trofeo25.jpg",texto:"Trofeo 1",tipo:"auto",condicion:a=>(a.likes||0)>=10},{src:"/trofeo7.jpg",texto:"Trofeo 2",tipo:"auto",condicion:a=>Array.isArray(a.amigos)&&a.amigos.length>=1},{src:"/trofeo12.jpg",texto:"Trofeo 3",tipo:"auto",condicion:a=>(a.comentariosRecibidos||0)>=1},{src:"/trofeo5.jpg",texto:"Trofeo 4",tipo:"auto",condicion:a=>(a.historiasCreadas||0)>=1},{src:"/trofeo13.png",texto:"Trofeo 5",tipo:"auto",condicion:a=>(a.respuestasAcertadas||0)>=20},{src:"/trofeo17.jpg",texto:"Trofeo 6",tipo:"auto",condicion:a=>(a.competicionesSuperadas||0)>=1},{src:"/trofeo27.jpg",texto:"Trofeo 7",tipo:"auto",condicion:a=>(a.respuestasAcertadas||0)>=1||(a.likes||0)>=1||(a.historiasCreadas||0)>=1},{src:"/trofeo10.jpg",texto:"Trofeo 8",tipo:"auto",condicion:a=>(a.concursosGanados||0)>=1},{src:"/trofeo23.jpg",texto:"Trofeo 9",tipo:"auto",condicion:a=>(a.likes||0)>=100},{src:"/trofeo15.jpg",texto:"Trofeo 10",tipo:"auto",condicion:a=>Array.isArray(a.amigos)&&a.amigos.length>=10},{src:"/trofeo26.jpg",texto:"Trofeo 11",tipo:"auto",condicion:a=>(a.historiasCreadas||0)>=3},{src:"/trofeo1.jpg",texto:"Trofeo 12",tipo:"auto",condicion:a=>(a.comentariosRecibidos||0)>=3},{src:"/trofeo22.jpg",texto:"Trofeo 13",tipo:"auto",condicion:a=>(a.competicionesSuperadas||0)>=1},{src:"/trofeo14.jpg",texto:"Trofeo 14",tipo:"auto",condicion:a=>(a.likes||0)>=500},{src:"/trofeo20.jpg",texto:"Trofeo 15",tipo:"auto",condicion:a=>Array.isArray(a.amigos)&&a.amigos.length>=30},{src:"/trofeo11.jpg",texto:"Trofeo 16",tipo:"auto",condicion:a=>(a.comentariosRecibidos||0)>=10},{src:"/trofeo24.jpg",texto:"Trofeo 17",tipo:"auto",condicion:a=>(a.historiasCreadas||0)>=15},{src:"/trofeo18.jpg",texto:"Trofeo 18",tipo:"auto",condicion:a=>(a.concursosGanados||0)>=3},{src:"/trofeo19.jpg",texto:"Trofeo 19",tipo:"auto",condicion:a=>(a.respuestasAcertadas||0)>=1e3},{src:"/trofeo15.jpg",texto:"Trofeo 20",tipo:"auto",condicion:a=>(a.anosEnStoryUp||0)>=1},{src:"/trofeo9.jpg",texto:"Trofeo 21",tipo:"auto",condicion:a=>(a.historiasCreadas||0)>=30},{src:"/trofeo8.jpg",texto:"Trofeo 22",tipo:"auto",condicion:a=>(a.likes||0)>=1e3},{src:"/trofeo21.jpg",texto:"Trofeo 23",tipo:"auto",condicion:a=>Array.isArray(a.amigos)&&a.amigos.length>=50},{src:"/trofeo16.jpg",texto:"Trofeo 24",tipo:"auto",condicion:a=>(a.likes||0)>=500&&Array.isArray(a.amigos)&&a.amigos.length>=10&&(a.historiasCreadas||0)>=5&&(a.respuestasAcertadas||0)>=100}];[...aA,...e];let aC=a=>{let b={...a,amigos:Array.isArray(a.amigos)?a.amigos:[]};console.log("getAutoTrofeos: Evaluating user data:",b);let c=aB.map((a,c)=>{let d="function"==typeof a.condicion&&a.condicion(b);return console.log(`getAutoTrofeos: Trofeo ${c} condition result:`,d,"for user data:",{likes:b.likes,amigos:b.amigos,comentariosRecibidos:b.comentariosRecibidos,historias:b.historias,respuestasAcertadas:b.respuestasAcertadas}),d?c+1:null}).filter(a=>null!==a);console.log("getAutoTrofeos: Final auto trofeos:",c);let d=!0===b.premium||!0===b.isPremium||"premium"===b.tipo,e=Array.isArray(b.historias)?b.historias.length:b.historiasCreadas||0,f=b.respuestasAcertadas||0;d&&e>=35&&c.push(101),d&&f>=1200&&c.push(102);let g=Array.isArray(b.amigos)?b.amigos.length:0;d&&g>=60&&c.push(103);let h=!1;d&&Array.isArray(b.historias)&&(h=b.historias.some(a=>{if(!a||!a.titulo||!a.fecha||!a.modo)return!1;let b=a.titulo.toLowerCase(),c=b.includes("navidad")||b.includes("navideÃ±o")||b.includes("navideÃ±a"),d=new Date(a.fecha),e=d.getFullYear(),f=new Date(e,11,20),g=new Date(e+1,0,6,23,59,59);return"My Live"===a.modo&&c&&d>=f&&d<=g})),d&&h&&c.push(104);let i=!1;d&&Array.isArray(b.historias)&&(i=b.historias.some(a=>{if(!a||!a.fecha||!a.modo)return!1;let b=new Date(a.fecha),c=b.getFullYear(),d=new Date(c,5,15),e=new Date(c,8,15,23,59,59);return"My Live"===a.modo&&b>=d&&b<=e})),d&&i&&c.push(105);let j=0;if(b.premiumInicio&&b.premiumExpiracion){let a=new Date(b.premiumInicio),c=new Date(b.premiumExpiracion);j=(c.getFullYear()-a.getFullYear())*12+(c.getMonth()-a.getMonth()),c.getDate()<a.getDate()&&j--}d&&j>=6&&c.push(106);let k=!1;d&&Array.isArray(b.historias)&&(k=b.historias.some(a=>!!a&&!!a.titulo&&!!a.imagen&&a.titulo.toLowerCase().includes("logo storyup")&&!!a.imagen)),d&&k&&c.push(107),d&&e>=50&&c.push(108);let l=Array.isArray(b.trofeosDesbloqueados)?b.trofeosDesbloqueados.length:0,m=c.length;d&&l+m>=30&&c.push(109),d&&f>=2500&&c.push(110);let n=b.nivelesMaterias||{},o=["matematicas","lenguaje","ciencias","ingles","historia","geografia","literatura"].every(a=>n[a]>=3);return d&&o&&c.push(111),d&&g>=100&&c.push(112),c},aD=async(a,b)=>{if(!a||!a.nick)return void console.log("syncAutoTrofeos: No userData or nick",a);console.log("syncAutoTrofeos: Starting for user",a.nick,"with data:",a),console.log("syncAutoTrofeos: Checking conditions manually:"),console.log("- amigos:",a.amigos,">= 1?",a.amigos>=1),console.log("- likes:",a.likes,">= 10?",a.likes>=10),console.log("- historias:",a.historias,">= 1?",a.historias>=1),console.log("- respuestasAcertadas:",a.respuestasAcertadas,">= 20?",a.respuestasAcertadas>=20),console.log("- comentariosRecibidos:",a.comentariosRecibidos,">= 1?",a.comentariosRecibidos>=1);try{let c=aC(a);console.log("syncAutoTrofeos: Auto trofeos calculated:",c);let d=Array.isArray(b.trofeosDesbloqueados)?b.trofeosDesbloqueados:[],e=Array.isArray(b.trofeosBloqueados)?b.trofeosBloqueados:[];console.log("syncAutoTrofeos: Current trofeos - manual:",d,"bloqueados:",e);let f=c.filter(a=>!d.includes(a)&&!e.includes(a)),g=d.filter(a=>!c.includes(a));console.log("syncAutoTrofeos: Trofeos to remove:",g);if(f.length>0||g.length>0){let b={trofeosDesbloqueados:[...d,...f].filter(a=>!g.includes(a)),trofeosBloqueados:e};console.log("syncAutoTrofeos: Saving updated trofeos:",b),await fetch("/api/trofeos/user-trofeos",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({nick:a.nick,...b})}),ae(b),console.log(`Sincronizados ${f.length} trofeos autom\xe1ticos y removidos ${g.length} trofeos para ${a.nick}`)}else console.log("syncAutoTrofeos: No changes needed")}catch(a){console.error("Error sincronizando trofeos automÃ¡ticos:",a)}},aE=(a,b)=>{console.log("isTrofeoUnlocked called with user:",a,"idx:",b),console.log("displayedUser:",au),console.log("userTrofeos:",ad);let c=aC(a);console.log("Auto trofeos for this user:",c);let d=Array.isArray(ad.trofeosDesbloqueados)?ad.trofeosDesbloqueados:[],e=Array.isArray(ad.trofeosBloqueados)?ad.trofeosBloqueados:[];console.log("Manual trofeos:",d,"Bloqueados:",e);let f=b<aA.length?b+1:101+(b-aA.length),g=(c.includes(f)||d.includes(f))&&!e.includes(f);return console.log("Trofeo",b,"id:",f,"is unlocked:",g),g};if(!j)return(0,b.jsx)("div",{className:"min-h-screen bg-green-100 flex items-center justify-center",children:(0,b.jsxs)("div",{className:"max-w-md w-full bg-white shadow rounded p-6 text-center",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Perfil"}),(0,b.jsx)("p",{className:"text-gray-600",children:"No se ha iniciado sesiÃ³n."})]})});let aF=!!au&&(!0===au.premium||!0===au.isPremium||"premium"===au.tipo);return(0,b.jsxs)("div",{className:"min-h-screen bg-green-100 flex flex-col pt-4",children:[ar.length>0&&(0,b.jsx)("div",{className:"w-full max-w-4xl mx-auto mb-4",children:(0,b.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[(0,b.jsx)("h3",{className:"text-lg font-bold text-yellow-800 mb-2",children:"Solicitudes de Amistad Pendientes"}),ar.map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between bg-white p-3 rounded mb-2 shadow",children:[(0,b.jsxs)("span",{className:"text-gray-700",children:["Solicitud de ",(0,b.jsx)("strong",{children:(0,d.renderNick)(a.solicitante.nick)})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("button",{onClick:()=>aw(a.id),className:"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded font-semibold",children:"Aceptar"}),(0,b.jsx)("button",{onClick:()=>ax(a.id),className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded font-semibold",children:"Rechazar"})]})]},a.id))]})}),(0,b.jsx)("div",{className:"w-full max-w-6xl mx-auto mt-4 mb-4",children:(0,b.jsxs)("h1",{className:"text-3xl font-bold text-center",children:["Perfil de: ",(0,b.jsx)(i.UserLink,{nick:au.nick})]})}),(0,b.jsxs)("div",{className:"w-full max-w-6xl mx-auto mt-8 grid grid-cols-2 gap-8",children:[(0,b.jsxs)("div",{className:`bg-white rounded-lg shadow-md p-6 flex flex-col items-center relative transition-all duration-500 ${aF?"border-4 border-yellow-400 shadow-2xl shadow-yellow-400/50 animate-pulse overflow-hidden":""}`,children:[aF&&(0,b.jsxs)("div",{className:"absolute inset-0 pointer-events-none",children:[(0,b.jsx)("div",{className:"absolute top-2 right-2 w-2 h-2 bg-yellow-400 rounded-full animate-ping opacity-75"}),(0,b.jsx)("div",{className:"absolute top-4 left-4 w-1 h-1 bg-yellow-300 rounded-full animate-bounce opacity-60"}),(0,b.jsx)("div",{className:"absolute bottom-4 right-6 w-1.5 h-1.5 bg-yellow-500 rounded-full animate-pulse opacity-80"})]}),(0,b.jsx)("div",{className:"flex justify-between items-center mb-4 relative",children:(0,b.jsxs)("h3",{className:`text-xl font-bold text-center w-full transition-all duration-300 ${aF?"text-yellow-600":""}`,children:["InformaciÃ³n Personal",aF&&(0,b.jsx)("span",{className:"ml-2 animate-spin",children:"ðŸ‘‘"})]})}),(0,b.jsxs)("div",{className:"flex flex-col items-center mb-4 relative",children:[(0,b.jsxs)("div",{className:"relative ",children:[(0,b.jsx)("img",{src:au.avatar||"/avatars/simple1.png",alt:"Avatar",className:`w-20 h-20 rounded-full mb-2 transition-all duration-300 ${aF?"ring-4 ring-yellow-400 ring-opacity-70 shadow-lg shadow-yellow-400/50 hover:scale-110":""}`}),aF&&(0,b.jsx)("div",{className:"absolute -top-1 -right-1 w-6 h-6 bg-gradient-to-r from-yellow-400 to-yellow-600 rounded-full flex items-center justify-center text-xs animate-bounce",children:"âœ¨"})]}),(0,b.jsx)("div",{className:"mt-4",children:(0,b.jsx)("a",{href:"/perfil/avatar",className:"bg-blue-500 text-white px-4 py-2 rounded font-semibold hover:bg-blue-600 transition",children:"Seleccionar y Cambiar Avatar"})})]}),(0,b.jsxs)("p",{children:[(0,b.jsx)("strong",{children:"Nick:"})," ",(0,d.renderNick)(au.nick)]}),(0,b.jsxs)("p",{children:[(0,b.jsx)("strong",{children:"Email:"})," ",au.email]}),(0,b.jsxs)("p",{children:[(0,b.jsx)("strong",{children:"Centro Educativo:"})," ",au.centro]}),(0,b.jsxs)("p",{children:[(0,b.jsx)("strong",{children:"Curso:"})," ",au.curso]}),(0,b.jsxs)("p",{children:[(0,b.jsx)("strong",{children:"Tipo de Usuario:"})," ",au.tipo]}),(0,b.jsxs)("p",{children:[(0,b.jsx)("strong",{children:"Fecha de InscripciÃ³n:"})," ",au.fechaInscripcion?new Date(au.fechaInscripcion).toLocaleDateString("es-ES"):""]}),(0,b.jsx)("div",{className:"mb-2 flex items-center",children:(0,b.jsxs)("div",{className:"flex flex-col mt-2 gap-y-4",children:[(0,b.jsxs)("div",{className:"flex flex-row gap-x-12",children:[(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)("span",{className:"mr-2 text-lg",children:"ðŸ‘"}),(0,b.jsx)("strong",{children:"Likes:"}),(0,b.jsx)("span",{className:"ml-2 inline-flex items-center justify-center w-8 h-8 rounded-full bg-green-300 text-green-900 font-bold text-sm",children:au.likes||0})]}),(0,b.jsxs)("div",{className:"flex items-center ml-8",children:[(0,b.jsx)("span",{className:"mr-2 text-lg",children:"ðŸ‘¥"}),(0,b.jsx)("strong",{children:"Total de Amigos:"}),(0,b.jsx)("span",{className:"ml-2 inline-flex items-center justify-center w-8 h-8 rounded-full bg-blue-300 text-blue-900 font-bold text-sm",children:au.amigos||0})]})]}),(0,b.jsxs)("div",{className:"flex flex-row gap-x-12",children:[(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)("span",{className:"mr-2 text-lg",children:"ðŸ“–"}),(0,b.jsx)("strong",{children:"Total de Historias:"}),(0,b.jsx)("span",{className:"ml-2 inline-flex items-center justify-center w-8 h-8 rounded-full bg-purple-200 text-purple-900 font-bold text-sm",children:au.historias?au.historias.length:0})]}),(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)("span",{className:"mr-2 text-lg",children:"ðŸ’¬"}),(0,b.jsx)("strong",{children:"Total de Comentarios:"}),(0,b.jsx)("span",{className:"ml-2 inline-flex items-center justify-center w-8 h-8 rounded-full bg-yellow-200 text-yellow-900 font-bold text-sm",children:au.comentariosRecibidos||0})]})]}),(0,b.jsxs)("div",{className:"flex flex-row gap-x-12",children:[(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)("span",{className:"mr-2 text-lg",children:"ðŸ†"}),(0,b.jsx)("strong",{children:"Trofeos Desbloqueados:"}),(a=(Array.isArray(au.trofeosDesbloqueados)?au.trofeosDesbloqueados:[]).length,(0,b.jsx)("span",{className:"ml-2 inline-flex items-center justify-center w-8 h-8 rounded-full bg-pink-200 text-pink-900 font-bold text-sm",children:a}))]}),(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)("span",{className:"mr-2 text-lg",children:"âœ…"}),(0,b.jsx)("strong",{children:"Respuestas acertadas:"}),(0,b.jsx)("span",{className:"ml-2 inline-flex items-center justify-center w-8 h-8 rounded-full bg-indigo-200 text-indigo-900 font-bold text-sm",children:au.respuestasAcertadas||0})]})]}),(0,b.jsxs)("div",{className:"flex flex-row gap-x-12",children:[(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)("span",{className:"mr-2 text-lg",children:"ðŸ¥‡"}),(0,b.jsx)("strong",{children:"Competiciones:"}),(0,b.jsx)("span",{className:"ml-2 inline-flex items-center justify-center w-8 h-8 rounded-full bg-teal-200 text-teal-900 font-bold text-sm",children:au.competicionesSuperadas||0})]}),(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)("span",{className:"mr-2 text-lg",children:"ðŸŽ‰"}),(0,b.jsx)("strong",{children:"Concursos:"}),(0,b.jsx)("span",{className:"ml-2 inline-flex items-center justify-center w-8 h-8 rounded-full bg-red-200 text-red-900 font-bold text-sm",children:au.concursosGanados||0})]})]})]})})]}),(0,b.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,b.jsxs)("div",{className:"bg-white shadow-lg rounded-lg p-6",children:[(0,b.jsx)("h3",{className:"text-xl font-bold text-center mb-4",children:"Trofeos"}),(0,b.jsx)("div",{className:"grid grid-cols-4 md:grid-cols-8 gap-4",children:aA.slice(0,24).map((a,c)=>(0,b.jsxs)("div",{className:`relative aspect-square flex flex-col items-center justify-center p-1 rounded-lg overflow-hidden ${aE(au,c)?"bg-yellow-100 border-2 border-yellow-400":"bg-gray-100 border-2 border-gray-300"}`,children:[(0,b.jsx)("img",{src:a.src,alt:a.texto,className:`w-[50px] h-[50px] ${!aE(au,c)?"opacity-25":""}`}),!aE(au,c)&&(0,b.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,b.jsx)("span",{className:"text-red-600 text-4xl font-bold",children:"âœ•"})})]},c))})]}),(0,b.jsxs)("div",{className:"bg-white shadow-lg rounded-lg p-6",children:[(0,b.jsx)("h3",{className:"text-xl font-bold text-center mb-4",children:"Trofeos Premium"}),(0,b.jsx)("div",{className:"grid grid-cols-4 md:grid-cols-6 gap-4",children:e.map((a,c)=>(0,b.jsxs)("div",{className:`relative aspect-square flex flex-col items-center justify-center p-1 rounded-lg overflow-hidden ${aE(au,aA.length+c)?"bg-purple-100 border-2 border-purple-400":"bg-gray-100 border-2 border-gray-300"}`,children:[(0,b.jsx)("img",{src:a.src,alt:a.texto,className:`w-[50px] h-[50px] ${!aE(au,aA.length+c)?"opacity-25":""}`}),!aE(au,aA.length+c)&&(0,b.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,b.jsx)("span",{className:"text-red-600 text-4xl font-bold",children:"âœ•"})})]},c))})]})]})]}),(0,b.jsx)("div",{className:"w-full max-w-6xl mx-auto mt-8",children:(0,b.jsxs)("div",{className:"bg-white shadow-lg rounded-lg p-6 flex flex-row gap-6",children:[(0,b.jsxs)("div",{className:"w-1/4 min-w-[180px] flex flex-col gap-2",children:[(0,b.jsx)("label",{htmlFor:"user-selector",className:"font-semibold mb-2",children:"Selecciona usuario:"}),(0,b.jsxs)("select",{id:"user-selector",className:"border rounded px-3 py-2",value:H,onChange:a=>I(a.target.value),children:[(0,b.jsx)("option",{value:"",children:"-- Elige un usuario --"}),F.filter(a=>a.nick!==j.nick).map(a=>(0,b.jsx)("option",{value:a.nick,children:a.nick},a.nick))]})]}),(0,b.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,b.jsx)("h3",{className:"text-xl font-bold text-center mb-4",children:"Chat"}),(0,b.jsx)("div",{className:"h-64 overflow-y-auto border rounded p-4 mb-4 bg-gray-50",children:L.map((a,c)=>(0,b.jsxs)("div",{className:`mb-2 ${a.from===j.nick?"text-right":"text-left"}`,children:[(0,b.jsxs)("span",{className:"font-semibold",children:[a.from,":"]})," ",a.text,a.fecha&&(0,b.jsxs)("span",{className:"text-xs text-gray-500 ml-2",children:["(",new Date(a.fecha).toLocaleString(),")"]})]},c))}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("input",{type:"text",value:J,onChange:a=>K(a.target.value),placeholder:"Escribe un mensaje...",className:"flex-1 border rounded px-3 py-2",onKeyPress:a=>"Enter"===a.key&&av(),disabled:!H}),(0,b.jsx)("button",{onClick:av,className:"bg-blue-500 text-white px-4 py-2 rounded font-semibold",disabled:!H||!J.trim(),children:"Enviar"})]})]})]})}),j.tipo&&"docente"===j.tipo.toLowerCase()&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"w-full max-w-6xl mx-auto mt-20",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-12",children:[(0,b.jsxs)("div",{className:"bg-white shadow-lg rounded-lg p-6",children:[(0,b.jsx)("h3",{className:"text-xl font-bold text-center mb-2",children:"Crear noticia"}),(0,b.jsxs)("form",{className:"w-full flex flex-col gap-4",onSubmit:a=>{a.preventDefault(),fetch("/api/noticias",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({titulo:P,contenido:R,autorNick:j?j.nick:""})}).then(a=>a.json()).then(()=>{Q(""),S(""),U("")}).catch(a=>{console.error("Error creando noticia:",a)})},children:[(0,b.jsx)("input",{type:"text",className:"border rounded px-3 py-2 w-full",placeholder:"TÃ­tulo de la noticia",value:P,onChange:a=>Q(a.target.value)}),(0,b.jsxs)("div",{className:"relative w-full",children:[(0,b.jsx)("textarea",{className:"border rounded px-3 py-2 w-full min-h-[80px]",placeholder:"Escribe la noticia aquÃ­...",value:R,onChange:a=>S(a.target.value)}),T&&(0,b.jsx)("img",{src:T,alt:"PrevisualizaciÃ³n",className:"absolute left-0 top-0 w-full h-full object-contain rounded shadow pointer-events-none",style:{zIndex:1,opacity:.7}})]}),(0,b.jsxs)("div",{className:"flex items-center gap-4 mt-2",children:[(0,b.jsx)("input",{id:"noticia-imagen",type:"file",accept:"image/*",className:"hidden",onChange:a=>{let b=a.target.files?.[0];if(b){E(b.name);let a=new FileReader;a.onload=a=>{U(a.target?.result)},a.readAsDataURL(b)}else E(""),U("")}}),(0,b.jsx)("button",{type:"button",className:"bg-gray-200 text-gray-700 px-4 py-2 rounded font-semibold border",onClick:()=>document.getElementById("noticia-imagen")?.click(),children:"Seleccionar imagen"}),(0,b.jsx)("button",{type:"submit",className:"bg-blue-500 text-white px-4 py-2 rounded font-semibold",children:"Publicar noticia"})]})]})]}),(0,b.jsxs)("div",{className:"bg-white shadow-lg rounded-lg p-6",children:[(0,b.jsx)("h3",{className:"text-xl font-bold text-center mb-2",children:"Crear concurso"}),(0,b.jsxs)("form",{className:"w-full flex flex-col gap-4",onSubmit:a=>{a.preventDefault(),fetch("/api/concursos",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({numero:B,titulo:r,texto:t,inicio:v,fin:x,autor:j?j.nick:"",ganador:z,fechaFinal:x})}).then(a=>a.json()).then(()=>{C(B+1),s(""),u(""),w(""),y(""),A(""),fetch("/api/concursos").then(a=>a.json()).then(ai)}).catch(a=>{console.error("Error creando concurso:",a)})},children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("input",{type:"text",className:"border rounded px-3 py-2 flex-1",placeholder:at("titulo"),value:r,onChange:a=>s(a.target.value)}),(0,b.jsxs)("span",{className:"text-sm text-gray-500",children:["ID: ",B]})]}),(0,b.jsx)("textarea",{className:"border rounded px-3 py-2 w-full min-h-[80px]",placeholder:at("descripcion"),value:t,onChange:a=>u(a.target.value)}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)("div",{className:"flex flex-col flex-1",children:[(0,b.jsx)("label",{className:"text-sm mb-1",children:at("fechaInicio")}),(0,b.jsx)("input",{type:"date",className:"border rounded px-3 py-2",value:v,onChange:a=>w(a.target.value)})]}),(0,b.jsxs)("div",{className:"flex flex-col flex-1",children:[(0,b.jsx)("label",{className:"text-sm mb-1",children:at("fechaFin")}),(0,b.jsx)("input",{type:"date",className:"border rounded px-3 py-2",value:x,onChange:a=>y(a.target.value)})]}),(0,b.jsx)("button",{type:"submit",className:"bg-blue-500 text-white px-4 py-2 rounded font-semibold",children:at("enviar")})]})]})]})]}),(0,b.jsxs)("div",{className:"w-full mt-6 pt-4 border-t border-gray-200",children:[(0,b.jsx)("h4",{className:"text-lg font-semibold text-center mb-3 text-gray-700",children:at("gestionarConcursosFinalizados")}),(0,b.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,b.jsxs)("select",{className:"border rounded px-3 py-2 text-sm",value:X,onChange:a=>Y(a.target.value),children:[(0,b.jsx)("option",{value:"",children:at("seleccionarConcurso")}),ah.filter(a=>!!a.fin&&new Date(a.fin)<new Date&&a.autor===j.nick&&!a.ganador).map(a=>(0,b.jsxs)("option",{value:a.id,children:[a.titulo," (ID: ",a.numero,") - Sin ganador"]},a.id))]}),(0,b.jsxs)("select",{className:"border rounded px-3 py-2 text-sm",value:Z,onChange:a=>$(a.target.value),children:[(0,b.jsx)("option",{value:"",children:at("seleccionarGanador")}),F.sort((a,b)=>a.nick.localeCompare(b.nick)).map((a,c)=>(0,b.jsx)("option",{value:a.nick,children:a.nick},c))]}),(0,b.jsx)("button",{className:"bg-green-500 text-white px-4 py-2 rounded font-semibold text-sm",onClick:ay,disabled:!X||!Z,children:at("asignarGanador")})]})]}),(0,b.jsxs)("div",{className:"bg-white shadow-lg rounded-lg p-6 flex flex-col gap-4 mt-6",children:[(0,b.jsx)("h3",{className:"text-xl font-bold text-center mb-2",children:"Agregar Pregunta - Aprende con Pipo"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-blue-700 mb-2",children:"Curso:"}),(0,b.jsxs)("select",{value:aj,onChange:a=>ak(a.target.value),className:"w-full px-3 py-2 border border-blue-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,b.jsx)("option",{value:"1primaria",children:"1Âº Primaria"}),(0,b.jsx)("option",{value:"2primaria",children:"2Âº Primaria"}),(0,b.jsx)("option",{value:"3primaria",children:"3Âº Primaria"}),(0,b.jsx)("option",{value:"4primaria",children:"4Âº Primaria"}),(0,b.jsx)("option",{value:"5primaria",children:"5Âº Primaria"}),(0,b.jsx)("option",{value:"6primaria",children:"6Âº Primaria"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-blue-700 mb-2",children:"Asignatura:"}),(0,b.jsxs)("select",{value:al,onChange:a=>am(a.target.value),className:"w-full px-3 py-2 border border-blue-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,b.jsx)("option",{value:"campeonato",children:"Campeonato"}),(0,b.jsx)("option",{value:"general",children:"General"}),(0,b.jsx)("option",{value:"matematicas",children:"MatemÃ¡ticas"}),(0,b.jsx)("option",{value:"lenguaje",children:"Lenguaje"}),(0,b.jsx)("option",{value:"literatura",children:"Literatura"}),(0,b.jsx)("option",{value:"historia",children:"Historia"}),(0,b.jsx)("option",{value:"geografia",children:"GeografÃ­a"}),(0,b.jsx)("option",{value:"ingles",children:"InglÃ©s"}),(0,b.jsx)("option",{value:"naturaleza",children:"Naturaleza"})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-blue-700 mb-2",children:"Pregunta:"}),(0,b.jsx)("textarea",{value:an,onChange:a=>ao(a.target.value),placeholder:"Escribe la pregunta aquÃ­...",className:"w-full px-3 py-2 border border-blue-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 h-20 resize-none"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-blue-700 mb-2",children:"Respuesta:"}),(0,b.jsx)("input",{type:"text",value:ap,onChange:a=>aq(a.target.value),placeholder:"Escribe la respuesta aquÃ­...",className:"w-full px-3 py-2 border border-blue-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,b.jsx)("div",{className:"text-center",children:(0,b.jsx)("button",{onClick:az,className:"bg-gradient-to-r from-green-500 to-green-600 text-white px-8 py-3 rounded-lg font-bold hover:shadow-lg transform hover:scale-105 transition-all",children:"âœ… Enviar Pregunta"})}),(0,b.jsx)("div",{className:"mt-4 p-3 bg-blue-100 border border-blue-300 rounded",children:(0,b.jsxs)("p",{className:"text-sm text-blue-800",children:[(0,b.jsx)("strong",{children:"ðŸ’¡ InformaciÃ³n:"})," Las preguntas se agregan automÃ¡ticamente al archivo correspondiente",(0,b.jsxs)("code",{className:"bg-blue-200 px-1 rounded",children:[al,"-",aj,".json"]})]})})]})]}),j.tipo&&"docente"===j.tipo.toLowerCase()&&(0,b.jsx)("div",{className:"w-full max-w-6xl mx-auto mt-16 bg-white shadow-lg rounded-lg p-6 flex flex-col items-center",children:(0,b.jsxs)("div",{className:"w-full",children:[(0,b.jsx)("h3",{className:"text-xl font-bold mb-4 text-center",children:at("panelAdministracion")}),(0,b.jsx)("form",{className:"w-full flex flex-col items-center gap-4",onSubmit:a=>{a.preventDefault(),q("")},children:(0,b.jsxs)("div",{className:"flex w-full max-w-xs items-center gap-2",children:[(0,b.jsx)("input",{type:"text",className:"border rounded px-3 py-2 min-w-[280px] max-w-full",placeholder:at("palabraProhibida"),value:p,onChange:a=>q(a.target.value)}),(0,b.jsx)("button",{type:"submit",className:"bg-red-500 text-white px-4 py-2 rounded font-semibold whitespace-nowrap",children:"Seleccionar"})]})}),(0,b.jsx)("h4",{className:"text-lg font-semibold mt-6 text-center",children:at("sistemaAntibullying")}),(0,b.jsx)("div",{className:"mt-4 bg-yellow-50 border-l-4 border-yellow-400 p-4 rounded-md text-gray-700 max-w-2xl mx-auto",children:(0,b.jsxs)("div",{className:"flex flex-row items-start gap-8",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"font-semibold mb-2",children:at("avisoAntibullying")}),(0,b.jsxs)("ol",{className:"list-decimal ml-6 space-y-1",children:[(0,b.jsx)("li",{children:at("historiasTerror")}),(0,b.jsx)("li",{children:at("perdidaLikes")}),(0,b.jsx)("li",{children:at("mensajesUsuario")}),(0,b.jsx)("li",{children:at("palabrasProhibidasChat")}),(0,b.jsx)("li",{children:at("actividadConsecutiva")})]})]}),(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center min-w-[180px]",children:[(0,b.jsxs)("button",{type:"button",className:`relative w-32 h-32 rounded-full font-bold text-white text-lg mb-2 transition-all flex items-center justify-center ${l?"bg-red-600 opacity-100 shadow-lg animate-blink":"bg-green-600 opacity-40"}`,disabled:!l,onClick:()=>{m(!1),o("")},children:[l?"Aviso Antibullying":at("sinPeligro"),(0,b.jsx)("span",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:(0,b.jsxs)("svg",{width:"100%",height:"100%",viewBox:"0 0 100 100",className:"opacity-70",children:[(0,b.jsx)("line",{x1:"10",y1:"10",x2:"90",y2:"90",stroke:"white",strokeWidth:"10"}),(0,b.jsx)("line",{x1:"90",y1:"10",x2:"10",y2:"90",stroke:"white",strokeWidth:"10"})]})})]}),n&&(0,b.jsx)("div",{className:"text-center text-red-700 font-semibold text-base",children:n})]})]})})]})})]})]})}],45246)}];

//# sourceMappingURL=src_app_perfil_page_tsx_09ef21a0._.js.map