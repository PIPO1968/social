{"version":3,"sources":["turbopack:///[project]/src/components/UserLink.tsx","turbopack:///[project]/src/utils/renderNick.tsx","turbopack:///[project]/src/app/competiciones/page.tsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\n\r\ninterface UserLinkProps {\r\n    nick: string;\r\n    className?: string;\r\n}\r\n\r\nexport const UserLink: React.FC<UserLinkProps> = ({ nick, className }) => {\r\n    const [isPremium, setIsPremium] = useState(false);\r\n\r\n    useEffect(() => {\r\n        const checkPremium = async () => {\r\n            if (nick) {\r\n                try {\r\n                    const response = await fetch(`/api/user/premium-status?nick=${encodeURIComponent(nick)}`);\r\n                    const data = await response.json();\r\n                    setIsPremium(data.isPremium || false);\r\n                } catch (error) {\r\n                    setIsPremium(false);\r\n                }\r\n            }\r\n        };\r\n\r\n        // Verificar inicialmente\r\n        checkPremium();\r\n    }, [nick]);\r\n\r\n    const normalized = (nick || \"\").trim().toLowerCase();\r\n    if (!nick || normalized === \"anonimo\" || normalized === \"an√≥nimo\") {\r\n        return <span className={className || \"text-gray-500\"}>{nick || \"(sin nick)\"}</span>;\r\n    }\r\n\r\n    return (\r\n        <a\r\n            href={`/perfil/${encodeURIComponent(nick)}`}\r\n            className={className || \"text-blue-600 underline hover:text-blue-800\"}\r\n            title={`Ver perfil de ${nick}${isPremium ? ' (Usuario Premium)' : ''}`}\r\n        >\r\n            {nick}\r\n            {isPremium && (\r\n                <span className=\"ml-1 inline-flex items-center\">\r\n                    <span\r\n                        className=\"bg-gradient-to-r from-sky-100 to-blue-100 text-amber-900 text-xs px-2 py-1 rounded-full font-bold shadow-md border border-sky-300\"\r\n                        title=\"Usuario Premium\"\r\n                    >\r\n                        üëë\r\n                    </span>\r\n                </span>\r\n            )}\r\n        </a>\r\n    );\r\n};\r\n","import React from \"react\";\r\nimport { UserLink } from \"@/components/UserLink\";\r\n\r\nexport function renderNick(nick: string, className?: string) {\r\n    return <UserLink nick={nick} className={className} />;\r\n}\r\n","\r\n\"use client\";\r\n// Obtener datos reales de docentes por temporada\r\nasync function getTablaDocentes(temporada: string) {\r\n    try {\r\n        const response = await fetch(`/api/championship/results?season=${temporada}&type=docentes`);\r\n        if (!response.ok) return [];\r\n        const data = await response.json();\r\n        const resultado: { escudo: string; nombre: string; ganados: number; perdidos: number; preguntasAcertadas: number; preguntasFalladas: number; likes: number; }[] = data.map((item: any) => ({\r\n            escudo: item.escudo || 'üë®‚Äçüè´',\r\n            nombre: item.nick,\r\n            ganados: item.ganados ?? 0,\r\n            perdidos: item.perdidos ?? 0,\r\n            preguntasAcertadas: item.preguntasAcertadas ?? 0,\r\n            preguntasFalladas: item.preguntasFalladas ?? 0,\r\n            likes: item.likes ?? 0,\r\n        }));\r\n        // Ordenar y limitar a los 25 mejores\r\n        return resultado.sort((a, b) => b.likes - a.likes).slice(0, 25);\r\n    } catch (error) {\r\n        console.error('Error cargando docentes:', error);\r\n        return [];\r\n    }\r\n}\r\nimport React from \"react\";\r\nimport { renderNick } from \"@/utils/renderNick\";\r\n\r\nexport default function Competiciones() {\r\n    type Centro = {\r\n        escudo: string; // URL o emoji\r\n        nombre: string;\r\n        ganados: number;\r\n        perdidos: number;\r\n        preguntasAcertadas: number;\r\n        preguntasFalladas: number;\r\n        likes: number;\r\n    };\r\n    type Alumno = {\r\n        escudo: string; // emoji/avatar\r\n        nombre: string;\r\n        ganados: number;\r\n        perdidos: number;\r\n        preguntasAcertadas: number;\r\n        preguntasFalladas: number;\r\n        likes: number;\r\n    };\r\n\r\n    // Estado para datos y carga\r\n    const [loading, setLoading] = React.useState(true);\r\n    const [temporadasDisponibles, setTemporadasDisponibles] = React.useState<string[]>([]);\r\n    const [temporadaSeleccionada, setTemporadaSeleccionada] = React.useState<string>(\"\");\r\n    const [mostrarCentros, setMostrarCentros] = React.useState<any[]>([]);\r\n    const [mostrarAlumnos, setMostrarAlumnos] = React.useState<any[]>([]);\r\n    const [mostrarDocentes, setMostrarDocentes] = React.useState<any[]>([]);\r\n    const [usuario, setUsuario] = React.useState<any>(null);\r\n\r\n    React.useEffect(() => {\r\n        if (typeof window === \"undefined\") return;\r\n\r\n        // Cargar usuario actual\r\n        fetch('/api/auth/me')\r\n            .then(response => response.ok ? response.json() : null)\r\n            .then(user => {\r\n                setUsuario(user);\r\n            })\r\n            .catch(error => {\r\n                console.error('Error cargando usuario:', error);\r\n            });\r\n\r\n        // Funci√≥n para calcular la temporada actual basada en el a√±o escolar\r\n        const getTemporadaActual = () => {\r\n            const now = new Date();\r\n            const year = now.getFullYear();\r\n            const month = now.getMonth() + 1; // getMonth() devuelve 0-11\r\n            const day = now.getDate();\r\n\r\n            // Si estamos antes del 30 de septiembre, usamos el a√±o anterior como base\r\n            // Si estamos despu√©s del 30 de septiembre, usamos el a√±o actual como base\r\n            let temporadaYear = year;\r\n            if (month < 9 || (month === 9 && day < 30)) {\r\n                temporadaYear = year - 1;\r\n            }\r\n\r\n            return `t${temporadaYear}`;\r\n        };\r\n\r\n        // Detectar todas las temporadas disponibles en la base de datos\r\n        fetch('/api/championship/seasons')\r\n            .then(response => response.ok ? response.json() : [])\r\n            .then((temporadas: string[]) => {\r\n                // Obtener la temporada actual\r\n                const temporadaActual = getTemporadaActual();\r\n\r\n                // Si no hay ninguna temporada guardada o la actual no existe, a√±adirla\r\n                if (!temporadas.includes(temporadaActual)) {\r\n                    temporadas.push(temporadaActual);\r\n                }\r\n\r\n                // Ordenar temporadas de m√°s reciente a m√°s antigua\r\n                temporadas.sort((a, b) => {\r\n                    const yearA = parseInt(a.replace('t', ''));\r\n                    const yearB = parseInt(b.replace('t', ''));\r\n                    return yearB - yearA;\r\n                });\r\n\r\n                setTemporadasDisponibles(temporadas);\r\n                setTemporadaSeleccionada(temporadaActual);\r\n            })\r\n            .catch(error => {\r\n                console.error('Error cargando temporadas:', error);\r\n                const temporadaActual = getTemporadaActual();\r\n                setTemporadasDisponibles([temporadaActual]);\r\n                setTemporadaSeleccionada(temporadaActual);\r\n            });\r\n    }, []);\r\n\r\n    // Funci√≥n para cargar datos de centros por temporada\r\n    async function getTablaCentros(temporada: string) {\r\n        try {\r\n            const response = await fetch(`/api/championship/results?season=${temporada}&type=centros`);\r\n            if (!response.ok) return [];\r\n            const data = await response.json();\r\n            const resultado: Centro[] = data.map((item: any) => ({\r\n                escudo: item.escudo || 'üè´',\r\n                nombre: item.centro,\r\n                ganados: item.ganados ?? 0,\r\n                perdidos: item.perdidos ?? 0,\r\n                preguntasAcertadas: item.preguntasAcertadas ?? 0,\r\n                preguntasFalladas: item.preguntasFalladas ?? 0,\r\n                likes: item.likes ?? 0,\r\n            }));\r\n            // Ordenar y limitar a los 25 mejores\r\n            return resultado.sort((a, b) => b.likes - a.likes).slice(0, 25);\r\n        } catch (error) {\r\n            console.error('Error cargando centros:', error);\r\n            return [];\r\n        }\r\n    }\r\n\r\n    // Funci√≥n para cargar datos de alumnos por temporada\r\n    async function getTablaAlumnos(temporada: string) {\r\n        try {\r\n            const response = await fetch(`/api/championship/results?season=${temporada}&type=individual`);\r\n            if (!response.ok) return [];\r\n            const data = await response.json();\r\n            const resultado: Alumno[] = data.map((item: any) => ({\r\n                escudo: item.escudo || 'üë§',\r\n                nombre: item.nick,\r\n                ganados: item.ganados ?? 0,\r\n                perdidos: item.perdidos ?? 0,\r\n                preguntasAcertadas: item.preguntasAcertadas ?? 0,\r\n                preguntasFalladas: item.preguntasFalladas ?? 0,\r\n                likes: item.likes ?? 0,\r\n            }));\r\n            // Ordenar y limitar a los 25 mejores\r\n            return resultado.sort((a, b) => b.likes - a.likes).slice(0, 25);\r\n        } catch (error) {\r\n            console.error('Error cargando alumnos:', error);\r\n            return [];\r\n        }\r\n    }\r\n\r\n    // Solo cargar datos al cambiar la temporada\r\n    React.useEffect(() => {\r\n        if (!temporadaSeleccionada) return;\r\n        if (typeof window === \"undefined\") return;\r\n\r\n        const loadData = async () => {\r\n            const centros = await getTablaCentros(temporadaSeleccionada);\r\n            const alumnos = await getTablaAlumnos(temporadaSeleccionada);\r\n            const docentes = await getTablaDocentes(temporadaSeleccionada);\r\n\r\n            setMostrarCentros(centros);\r\n            setMostrarAlumnos(alumnos);\r\n            setMostrarDocentes(docentes);\r\n            setLoading(false);\r\n        };\r\n\r\n        loadData();\r\n    }, [temporadaSeleccionada]);\r\n\r\n    // Handler para resetear datos solo al hacer clic en el nick (funci√≥n de administrador)\r\n    async function handleResetDatos() {\r\n        if (typeof window === \"undefined\") return;\r\n\r\n        const confirmReset = window.confirm(\r\n            `¬øEst√°s seguro de que quieres resetear TODOS los datos de la temporada ${temporadaSeleccionada.replace('t', '')}?\\n\\n` +\r\n            `Esto borrar√°:\\n` +\r\n            `- Tabla de centros\\n` +\r\n            `- Tabla individual de alumnos\\n` +\r\n            `- Tabla de docentes\\n\\n` +\r\n            `Esta acci√≥n NO se puede deshacer.`\r\n        );\r\n\r\n        if (!confirmReset) return;\r\n\r\n        try {\r\n            const response = await fetch(`/api/championship/reset?season=${temporadaSeleccionada}`, {\r\n                method: 'DELETE'\r\n            });\r\n\r\n            if (!response.ok) {\r\n                throw new Error('Error reseteando datos');\r\n            }\r\n\r\n            // Recargar datos (ahora ser√°n tablas vac√≠as)\r\n            const centros = await getTablaCentros(temporadaSeleccionada);\r\n            const alumnos = await getTablaAlumnos(temporadaSeleccionada);\r\n            const docentes = await getTablaDocentes(temporadaSeleccionada);\r\n\r\n            setMostrarCentros(centros);\r\n            setMostrarAlumnos(alumnos);\r\n            setMostrarDocentes(docentes);\r\n\r\n            alert(`Datos de la temporada ${temporadaSeleccionada.replace('t', '')} reseteados correctamente.`);\r\n        } catch (error) {\r\n            console.error('Error reseteando:', error);\r\n            alert('Error al resetear los datos.');\r\n        }\r\n    }\r\n\r\n    // Funci√≥n para obtener informaci√≥n de la temporada actual\r\n    const getInfoTemporada = () => {\r\n        const now = new Date();\r\n        const year = now.getFullYear();\r\n        const month = now.getMonth() + 1;\r\n        const day = now.getDate();\r\n\r\n        // Calcular cu√°ndo termina la temporada actual (30 de septiembre)\r\n        let finTemporada = new Date(year, 8, 30); // Mes 8 = septiembre (0-indexed)\r\n\r\n        // Si ya pas√≥ el 30 de septiembre de este a√±o, la pr√≥xima fecha es el a√±o que viene\r\n        if (month > 9 || (month === 9 && day >= 30)) {\r\n            finTemporada = new Date(year + 1, 8, 30);\r\n        }\r\n\r\n        const diasRestantes = Math.ceil((finTemporada.getTime() - now.getTime()) / (1000 * 60 * 60 * 24));\r\n\r\n        return {\r\n            temporadaActual: temporadaSeleccionada.replace('t', ''),\r\n            finTemporada: finTemporada.toLocaleDateString('es-ES'),\r\n            diasRestantes: diasRestantes > 0 ? diasRestantes : 0\r\n        };\r\n    };\r\n\r\n    const infoTemporada = getInfoTemporada();\r\n    if (loading || !temporadaSeleccionada) {\r\n        return <div className=\"min-h-screen bg-green-100 p-8 text-center text-lg\">Cargando competiciones...</div>;\r\n    }\r\n    return (\r\n        <div className=\"min-h-screen bg-green-100 p-8\">\r\n            <h1 className=\"text-2xl font-bold mb-4 text-center\">Competiciones StoryUp</h1>\r\n\r\n            {/* Informaci√≥n de temporada */}\r\n            <div className=\"max-w-6xl mx-auto mb-6\">\r\n                <div className=\"bg-gradient-to-r from-blue-50 to-green-50 border border-blue-300 rounded-lg p-4\">\r\n                    <div className=\"flex justify-between items-center mb-2\">\r\n                        <h3 className=\"text-lg font-bold text-blue-700\">üìÖ Informaci√≥n de Temporada</h3>\r\n                        <div className=\"flex items-center gap-4\">\r\n                            <label className=\"font-semibold mr-2 text-blue-700\">Ver temporada:</label>\r\n                            <select\r\n                                className=\"border rounded px-3 py-2 bg-white shadow\"\r\n                                value={temporadaSeleccionada}\r\n                                onChange={e => setTemporadaSeleccionada(e.target.value)}\r\n                            >\r\n                                {temporadasDisponibles.map((t, idx) => (\r\n                                    <option key={idx} value={t}>\r\n                                        {`Temporada ${t.replace('t', '')}${t === temporadasDisponibles[0] ? ' (Actual)' : ''}`}\r\n                                    </option>\r\n                                ))}\r\n                            </select>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm\">\r\n                        <div className=\"bg-white rounded p-3 border border-blue-200\">\r\n                            <div className=\"font-semibold text-blue-600\">Temporada Actual:</div>\r\n                            <div className=\"text-lg font-bold\">{infoTemporada.temporadaActual}</div>\r\n                        </div>\r\n                        <div className=\"bg-white rounded p-3 border border-green-200\">\r\n                            <div className=\"font-semibold text-green-600\">Fin de Temporada:</div>\r\n                            <div className=\"text-lg font-bold\">{infoTemporada.finTemporada}</div>\r\n                        </div>\r\n                        <div className=\"bg-white rounded p-3 border border-orange-200\">\r\n                            <div className=\"font-semibold text-orange-600\">D√≠as Restantes:</div>\r\n                            <div className=\"text-lg font-bold\">{infoTemporada.diasRestantes} d√≠as</div>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"mt-3 text-xs text-gray-600\">\r\n                        üí° <strong>Sistema de Temporadas:</strong> Cada temporada termina el 30 de septiembre.\r\n                        Los datos se mantienen guardados y puedes consultar temporadas anteriores usando el selector de arriba.\r\n                        {temporadasDisponibles.length > 1 && ` Hay ${temporadasDisponibles.length} temporada${temporadasDisponibles.length > 1 ? 's' : ''} disponible${temporadasDisponibles.length > 1 ? 's' : ''}.`}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Bot√≥n de reset temporada eliminado por solicitud del usuario */}\r\n            <div className=\"max-w-5xl mx-auto mb-6\">\r\n                <div className=\"bg-blue-50 border border-blue-300 rounded p-3 text-sm text-gray-700\">\r\n                    <b>Importante:</b> Solo se contabilizan en estas tablas los datos obtenidos en <span className=\"font-bold text-blue-700\">modo competicion</span>.<br />\r\n                    Las partidas en modo cl√°sico no afectan los rankings ni las estad√≠sticas de competici√≥n.\r\n                </div>\r\n            </div>\r\n            <div className=\"flex flex-col gap-8 max-w-5xl mx-auto\">\r\n                <div className=\"flex flex-row gap-8 w-full max-w-7xl mx-auto\">\r\n                    {/* Bloque Competici√≥n Centros */}\r\n                    <div className=\"bg-white rounded-lg shadow-md p-3 w-1/2 text-[11px]\">\r\n                        <h2 className=\"text-xl font-bold text-center mb-4\">Competici√≥n Centros</h2>\r\n                        <table className=\"w-full text-sm\">\r\n                            <thead>\r\n                                <tr className=\"bg-green-100\">\r\n                                    <th className=\"py-2 text-center\">PG</th>\r\n                                    <th className=\"py-2 text-center\">EC</th>\r\n                                    <th className=\"py-2 text-center\">CE</th>\r\n                                    <th className=\"py-2 text-center\">G</th>\r\n                                    <th className=\"py-2 text-center\">P</th>\r\n                                    <th className=\"py-2 text-center\">PA</th>\r\n                                    <th className=\"py-2 text-center\">PF</th>\r\n                                    <th className=\"py-2 text-center\">‚ù§Ô∏è</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                {mostrarCentros.map((centro, idx) => (\r\n                                    <tr key={idx} className=\"border-b\">\r\n                                        <td className=\"py-0 text-center font-bold\">{idx + 1}</td>\r\n                                        <td className=\"py-0 text-center\">\r\n                                            <span className=\"inline-block w-8 h-8 text-2xl align-middle\">{centro.escudo}</span>\r\n                                        </td>\r\n                                        <td className=\"py-0 font-semibold\">\r\n                                            <span style={{ color: '#007bff' }}>{renderNick(centro.nombre)}</span>\r\n                                        </td>\r\n                                        <td className=\"py-0 text-center\">{centro.ganados}</td>\r\n                                        <td className=\"py-0 text-center\">{centro.perdidos}</td>\r\n                                        <td className=\"py-0 text-center\">{centro.preguntasAcertadas}</td>\r\n                                        <td className=\"py-0 text-center\">{centro.preguntasFalladas}</td>\r\n                                        <td className=\"py-0 text-center\">{centro.likes}</td>\r\n                                    </tr>\r\n                                ))}\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n                    {/* Bloque Competici√≥n Individual */}\r\n                    <div className=\"bg-white rounded-lg shadow-md p-3 w-1/2 text-[11px]\">\r\n                        <h2 className=\"text-xl font-bold text-center mb-4\">Competici√≥n Individual</h2>\r\n                        <table className=\"w-full text-sm\">\r\n                            <thead>\r\n                                <tr className=\"bg-green-100\">\r\n                                    <th className=\"py-2 text-center\">PG</th>\r\n                                    <th className=\"py-2 text-center\">EC</th>\r\n                                    <th className=\"py-2 text-center\">A</th>\r\n                                    <th className=\"py-2 text-center\">G</th>\r\n                                    <th className=\"py-2 text-center\">P</th>\r\n                                    <th className=\"py-2 text-center\">PA</th>\r\n                                    <th className=\"py-2 text-center\">PF</th>\r\n                                    <th className=\"py-2 text-center\">‚ù§Ô∏è</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                {mostrarAlumnos.map((alumno, idx) => (\r\n                                    <tr key={idx} className=\"border-b\">\r\n                                        <td className=\"py-0 text-center font-bold\">{idx + 1}</td>\r\n                                        <td className=\"py-0 text-center\">\r\n                                            <span className=\"inline-block w-8 h-8 text-2xl align-middle\">{alumno.escudo}</span>\r\n                                        </td>\r\n                                        <td className=\"py-0 font-semibold\">\r\n                                            <span style={{ color: '#007bff' }}>{renderNick(alumno.nombre)}</span>\r\n                                        </td>\r\n                                        <td className=\"py-0 text-center\">{alumno.ganados}</td>\r\n                                        <td className=\"py-0 text-center\">{alumno.perdidos}</td>\r\n                                        <td className=\"py-0 text-center\">{alumno.preguntasAcertadas}</td>\r\n                                        <td className=\"py-0 text-center\">{alumno.preguntasFalladas}</td>\r\n                                        <td className=\"py-0 text-center\">{alumno.likes}</td>\r\n                                    </tr>\r\n                                ))}\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n                </div>\r\n                {/* Bloque Competici√≥n Docentes */}\r\n                <div className=\"bg-yellow-50 rounded-lg shadow-md p-3 w-full max-w-7xl mx-auto text-[11px]\">\r\n                    <h2 className=\"text-xl font-bold text-center mb-4\">Competici√≥n Docentes</h2>\r\n                    <table className=\"w-full text-sm\">\r\n                        <thead>\r\n                            <tr className=\"bg-yellow-100\">\r\n                                <th className=\"py-2 text-center\">PG</th>\r\n                                <th className=\"py-2 text-center\">EC</th>\r\n                                <th className=\"py-2 text-center\">Docente</th>\r\n                                <th className=\"py-2 text-center\">G</th>\r\n                                <th className=\"py-2 text-center\">P</th>\r\n                                <th className=\"py-2 text-center\">PA</th>\r\n                                <th className=\"py-2 text-center\">PF</th>\r\n                                <th className=\"py-2 text-center\">‚ù§Ô∏è</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            {mostrarDocentes.map((docente, idx) => (\r\n                                <tr key={idx} className=\"border-b\">\r\n                                    <td className=\"py-1 text-center font-bold\">{idx + 1}</td>\r\n                                    <td className=\"py-1 text-center\">\r\n                                        <span className=\"inline-block w-8 h-8 text-2xl align-middle\">{docente.escudo}</span>\r\n                                    </td>\r\n                                    <td className=\"py-1 font-semibold\">\r\n                                        <span style={{ color: '#007bff' }}>{renderNick(docente.nombre)}</span>\r\n                                    </td>\r\n                                    <td className=\"py-1 text-center\">{docente.ganados}</td>\r\n                                    <td className=\"py-1 text-center\">{docente.perdidos}</td>\r\n                                    <td className=\"py-1 text-center\">{docente.preguntasAcertadas}</td>\r\n                                    <td className=\"py-1 text-center\">{docente.preguntasFalladas}</td>\r\n                                    <td className=\"py-1 text-center\">{docente.likes}</td>\r\n                                </tr>\r\n                            ))}\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n                {/* Resumen de significados de las siglas */}\r\n                <div className=\"bg-green-50 rounded-lg shadow p-4 w-full mt-4\">\r\n                    <h3 className=\"font-bold mb-2\">Significado de las siglas:</h3>\r\n                    <ul className=\"grid grid-cols-2 gap-2 text-sm\">\r\n                        <li><b>PG</b>: Posici√≥n Global</li>\r\n                        <li><b>EC</b>: Escudo Centro / Avatar</li>\r\n                        <li><b>CE</b>: Nombre del Centro</li>\r\n                        <li><b>A</b>: Alumno</li>\r\n                        <li><b>G</b>: Ganados</li>\r\n                        <li><b>P</b>: Perdidos</li>\r\n                        <li><b>PA</b>: Preguntas Acertadas</li>\r\n                        <li><b>PF</b>: Preguntas Falladas</li>\r\n                        <li><b>‚ù§Ô∏è</b>: Likes</li>\r\n                    </ul>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}