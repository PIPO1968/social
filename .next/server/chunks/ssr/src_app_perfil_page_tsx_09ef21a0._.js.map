{"version":3,"sources":["turbopack:///[project]/src/app/perfil/page.tsx","turbopack:///[project]/src/data/trofeosPremiumImport.ts"],"sourcesContent":["\"use client\";\r\nimport React, { useState, useEffect, useMemo } from \"react\";\r\nimport { renderNick } from \"@/utils/renderNick\";\r\nimport { TROFEOS_PREMIUM } from \"@/data/trofeosPremiumImport\";\r\nimport { useTranslation } from \"@/utils/i18n\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { BUTTON_STYLES } from \"../../utils/styles\";\r\nimport { useUser } from \"@/contexts/UserContext\";\r\nimport { UserLink } from \"@/components/UserLink\";\r\n\r\ninterface Usuario {\r\n    nick: string;\r\n    nombre: string;\r\n    email: string;\r\n    centro: string;\r\n    curso: string;\r\n    tipo: string;\r\n    fechaInscripcion: string;\r\n    likes: number;\r\n    amigos: string[];\r\n    respuestasAcertadas: number;\r\n    competicionesSuperadas: number;\r\n    concursosGanados: number;\r\n    comentariosRecibidos: number;\r\n    historiasCreadas: number;\r\n    anosEnStoryUp: number;\r\n    trofeos: any[];\r\n};\r\n\r\nconst PerfilUsuario: React.FC = () => {\r\n    const router = useRouter();\r\n    const { user, setUser } = useUser();\r\n    // Funci√≥n para asignar trofeos al usuario si su centro gan√≥ premios este mes\r\n    const asignarTrofeosUsuario = async (usuario: any) => {\r\n        if (typeof window === \"undefined\") return;\r\n\r\n        const fechaActual = new Date();\r\n        const year = fechaActual.getFullYear();\r\n        const month = fechaActual.getMonth() + 1;\r\n\r\n        try {\r\n            const response = await fetch(`/api/premios/mensuales?year=${year}&month=${month}`);\r\n            const premios = await response.json();\r\n            const premioCentro = premios.find((p: any) => p.centro === usuario.centro);\r\n\r\n            if (premioCentro) {\r\n                let idTrofeo = 0;\r\n                switch (premioCentro.posicion) {\r\n                    case 1: idTrofeo = 25; break; // Campe√≥n Mensual\r\n                    case 2: idTrofeo = 26; break; // Subcampe√≥n Mensual\r\n                    case 3: idTrofeo = 27; break; // Tercer Lugar Mensual\r\n                    default:\r\n                        if (premioCentro.posicion <= 10) {\r\n                            idTrofeo = 28; // Top 10 Mensual\r\n                        } else {\r\n                            idTrofeo = 29; // Participante Activo\r\n                        }\r\n                        break;\r\n                }\r\n\r\n                if (idTrofeo > 0 && !usuario.trofeosDesbloqueados.includes(idTrofeo)) {\r\n                    const updated = {\r\n                        trofeosDesbloqueados: [...usuario.trofeosDesbloqueados, idTrofeo],\r\n                        trofeosBloqueados: usuario.trofeosBloqueados\r\n                    };\r\n                    await fetch('/api/trofeos/user-trofeos', {\r\n                        method: 'POST',\r\n                        headers: { 'Content-Type': 'application/json' },\r\n                        body: JSON.stringify({ nick: usuario.nick, ...updated })\r\n                    });\r\n                }\r\n            }\r\n        } catch (e) {\r\n            console.error('Error asignando trofeos:', e);\r\n        }\r\n    };\r\n\r\n    const [bullyingActivo, setBullyingActivo] = useState(false);\r\n    const [usuarioBullying, setUsuarioBullying] = useState(\"\");\r\n    const [palabraProhibida, setPalabraProhibida] = useState(\"\");\r\n    const [concursoTitulo, setConcursoTitulo] = useState(\"\");\r\n    const [concursoTexto, setConcursoTexto] = useState(\"\");\r\n    const [fechaInicio, setFechaInicio] = useState(\"\");\r\n    const [fechaFin, setFechaFin] = useState(\"\");\r\n    const [usuarioGanador, setUsuarioGanador] = useState(\"\");\r\n    const [concursoId, setConcursoId] = useState(1);\r\n    const [nombreArchivo, setNombreArchivo] = useState(\"\");\r\n    const [usuarios, setUsuarios] = useState<any[]>([]);\r\n    const [selectedUser, setSelectedUser] = useState(\"\");\r\n    const [chatInput, setChatInput] = useState(\"\");\r\n    const [chatMessages, setChatMessages] = useState<{ from: string, to: string, text: string, fecha?: string }[]>([]);\r\n    const [mensajeRecibido, setMensajeRecibido] = useState(false);\r\n    const [noticiaTitulo, setNoticiaTitulo] = useState(\"\");\r\n    const [noticiaTexto, setNoticiaTexto] = useState(\"\");\r\n    const [noticiaImagen, setNoticiaImagen] = useState<string>(\"\");\r\n    // Estado para el trofeo seleccionado por el admin\r\n    const [trofeoSeleccionado, setTrofeoSeleccionado] = useState(\"\");\r\n    // Estados para gestionar concursos finalizados\r\n    const [concursoSeleccionado, setConcursoSeleccionado] = useState(\"\");\r\n    const [ganadorSeleccionado, setGanadorSeleccionado] = useState(\"\");\r\n    const [selectedUserData, setSelectedUserData] = useState<any>(null);\r\n    // Estados para datos de base de datos\r\n    const [premiumData, setPremiumData] = useState<any>(null);\r\n    const [userTrofeos, setUserTrofeos] = useState<{ trofeosDesbloqueados: number[]; trofeosBloqueados: number[] }>({ trofeosDesbloqueados: [], trofeosBloqueados: [] });\r\n    const [displayedUserProfile, setDisplayedUserProfile] = useState<any>(null);\r\n    const [concursos, setConcursos] = useState<any[]>([]);\r\n    // Estados para preguntas\r\n    const [cursoSeleccionado, setCursoSeleccionado] = useState<string>(\"1primaria\");\r\n    const [asignaturaSeleccionada, setAsignaturaSeleccionada] = useState<string>(\"matematicas\");\r\n    const [pregunta, setPregunta] = useState<string>(\"\");\r\n    const [respuesta, setRespuesta] = useState<string>(\"\");\r\n    // Estados para solicitudes de amistad\r\n    const [pendingRequests, setPendingRequests] = useState<any[]>([]);\r\n\r\n    const { t } = useTranslation();\r\n\r\n\r\n    const displayedUser = useMemo(() => selectedUser ? (selectedUserData || { ...user, trofeosDesbloqueados: userTrofeos.trofeosDesbloqueados, trofeosBloqueados: userTrofeos.trofeosBloqueados }) : { ...user, trofeosDesbloqueados: userTrofeos.trofeosDesbloqueados, trofeosBloqueados: userTrofeos.trofeosBloqueados }, [selectedUser, selectedUserData, user, userTrofeos]);\r\n\r\n    // Inicializaci√≥n y sincronizaci√≥n de rankings\r\n    useEffect(() => {\r\n        // Obtener concursos\r\n        fetch('/api/concursos')\r\n            .then(response => response.json())\r\n            .then(concursos => {\r\n                setConcursos(concursos);\r\n            })\r\n            .catch(error => {\r\n                console.warn('No se pudo cargar la lista de concursos:', error);\r\n            });\r\n    }, []);\r\n\r\n    // Manejo seguro de datos premium y trofeos\r\n    useEffect(() => {\r\n        if (user && user.nick) {\r\n            fetch('/api/premium/data?nick=' + user.nick)\r\n                .then(response => response.json())\r\n                .then(data => {\r\n                    if (data && !data.error) {\r\n                        setPremiumData(data);\r\n                    } else {\r\n                        setPremiumData(null);\r\n                        console.warn('No hay datos premium para este usuario.');\r\n                    }\r\n                })\r\n                .catch(error => {\r\n                    setPremiumData(null);\r\n                    console.warn('No se pudo cargar datos premium:', error);\r\n                });\r\n\r\n            // Cargar datos del perfil del usuario para sincronizar trofeos\r\n            fetch('/api/user/profile?nick=' + user.nick)\r\n                .then(response => response.json())\r\n                .then(profileData => {\r\n                    if (profileData && profileData.user) {\r\n                        // Guardar los datos completos del perfil\r\n                        setDisplayedUserProfile(profileData.user);\r\n\r\n                        // Sincronizar trofeos autom√°ticos con los datos completos del perfil\r\n                        fetch('/api/trofeos/user-trofeos?nick=' + user.nick)\r\n                            .then(response => response.json())\r\n                            .then(trofeosData => {\r\n                                if (trofeosData && !trofeosData.error) {\r\n                                    setUserTrofeos(trofeosData);\r\n                                    // Sincronizar trofeos autom√°ticos\r\n                                    syncAutoTrofeos(profileData.user, trofeosData);\r\n                                } else {\r\n                                    setUserTrofeos({ trofeosDesbloqueados: [], trofeosBloqueados: [] });\r\n                                    // Sincronizar trofeos autom√°ticos\r\n                                    syncAutoTrofeos(profileData.user, { trofeosDesbloqueados: [], trofeosBloqueados: [] });\r\n                                }\r\n                            })\r\n                            .catch(error => {\r\n                                setUserTrofeos({ trofeosDesbloqueados: [], trofeosBloqueados: [] });\r\n                                console.warn('No se pudo cargar trofeos:', error);\r\n                                // Sincronizar trofeos autom√°ticos\r\n                                syncAutoTrofeos(profileData.user, { trofeosDesbloqueados: [], trofeosBloqueados: [] });\r\n                            });\r\n                    }\r\n                })\r\n                .catch(error => {\r\n                    console.warn('No se pudo cargar datos del perfil:', error);\r\n                });\r\n\r\n            fetch('/api/friends?action=requests&nick=' + user.nick)\r\n                .then(response => response.json())\r\n                .then(data => {\r\n                    if (data.requests) {\r\n                        setPendingRequests(data.requests);\r\n                    } else {\r\n                        setPendingRequests([]);\r\n                    }\r\n                })\r\n                .catch(error => {\r\n                    setPendingRequests([]);\r\n                    console.warn('No se pudo cargar solicitudes:', error);\r\n                });\r\n        }\r\n    }, [user]);\r\n\r\n    // Cargar mensajes del chat solo cuando cambia el usuario\r\n    useEffect(() => {\r\n        if (user && user.nick) {\r\n            fetch('/api/chat?nick=' + user.nick)\r\n                .then(response => response.json())\r\n                .then(messages => {\r\n                    setChatMessages(messages);\r\n                })\r\n                .catch(error => {\r\n                    console.warn('No se pudo cargar los mensajes del chat:', error);\r\n                });\r\n        }\r\n    }, [user]);\r\n\r\n    const handlePalabraProhibidaSubmit = (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        setPalabraProhibida(\"\");\r\n    };\r\n    const handleSendMessage = () => {\r\n        if (!chatInput.trim() || !user) return;\r\n        fetch('/api/chat', {\r\n            method: 'POST',\r\n            headers: { 'Content-Type': 'application/json' },\r\n            body: JSON.stringify({ from: user.nick, to: displayedUser.nick, text: chatInput.trim() })\r\n        })\r\n            .then(() => {\r\n                setChatInput('');\r\n                // Refrescar mensajes\r\n                fetch('/api/chat?nick=' + user.nick)\r\n                    .then(response => response.json())\r\n                    .then(messages => setChatMessages(messages))\r\n                    .catch(error => console.warn('No se pudo refrescar los mensajes:', error));\r\n            })\r\n            .catch(error => {\r\n                console.error('Error enviando mensaje:', error);\r\n            });\r\n    };\r\n\r\n    const handleAcceptRequest = async (requestId: number) => {\r\n        if (!user) return;\r\n\r\n        try {\r\n            const response = await fetch('/api/friends', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ action: 'accept', userNick: user.nick, requestId })\r\n            });\r\n            if (response.ok) {\r\n                // Remover de pendingRequests\r\n                setPendingRequests(prev => prev.filter(r => r.id !== requestId));\r\n                // Recargar para actualizar contadores\r\n                window.location.reload();\r\n            } else {\r\n                alert('Error al aceptar solicitud');\r\n            }\r\n        } catch (error) {\r\n            alert('Error al aceptar solicitud');\r\n        }\r\n    };\r\n\r\n    const handleRejectRequest = async (requestId: number) => {\r\n        if (!user) return;\r\n\r\n        try {\r\n            const response = await fetch('/api/friends', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ action: 'reject', userNick: user.nick, requestId })\r\n            });\r\n            if (response.ok) {\r\n                // Remover de pendingRequests\r\n                setPendingRequests(prev => prev.filter(r => r.id !== requestId));\r\n                // Recargar para actualizar contadores\r\n                window.location.reload();\r\n            } else {\r\n                alert('Error al rechazar solicitud');\r\n            }\r\n        } catch (error) {\r\n            alert('Error al rechazar solicitud');\r\n        }\r\n    };\r\n    const handleApagarBullying = () => {\r\n        setBullyingActivo(false);\r\n        setUsuarioBullying(\"\");\r\n    };\r\n    const handleConcursoSubmit = (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        fetch('/api/concursos', {\r\n            method: 'POST',\r\n            headers: { 'Content-Type': 'application/json' },\r\n            body: JSON.stringify({\r\n                numero: concursoId,\r\n                titulo: concursoTitulo,\r\n                texto: concursoTexto,\r\n                inicio: fechaInicio,\r\n                fin: fechaFin,\r\n                autor: user ? user.nick : \"\",\r\n                ganador: usuarioGanador,\r\n                fechaFinal: fechaFin\r\n            })\r\n        })\r\n            .then(response => response.json())\r\n            .then(() => {\r\n                setConcursoId(concursoId + 1);\r\n                setConcursoTitulo(\"\");\r\n                setConcursoTexto(\"\");\r\n                setFechaInicio(\"\");\r\n                setFechaFin(\"\");\r\n                setUsuarioGanador(\"\");\r\n                // Refrescar concursos\r\n                fetch('/api/concursos').then(r => r.json()).then(setConcursos);\r\n            })\r\n            .catch(error => {\r\n                console.error('Error creando concurso:', error);\r\n            });\r\n    };\r\n    // Funci√≥n general para sumar o restar likes a cualquier usuario\r\n    const updateLikes = (nick: string, cantidad: number) => {\r\n        if (!nick) return;\r\n        const currentLikes = usuarios.find((u: any) => u.nick === nick)?.likes || 0;\r\n        fetch('/api/users/update', {\r\n            method: 'POST',\r\n            headers: { 'Content-Type': 'application/json' },\r\n            body: JSON.stringify({ nick, likes: currentLikes + cantidad })\r\n        })\r\n            .then(response => response.json())\r\n            .then(updatedUser => {\r\n                const updatedUsers = usuarios.map((u: any) => u.nick === nick ? updatedUser : u);\r\n                setUsuarios(updatedUsers);\r\n                if (user && user.nick === nick) {\r\n                    setUser(updatedUser);\r\n                }\r\n            })\r\n            .catch(error => console.error('Error updating likes:', error));\r\n    };\r\n\r\n    const handleSeleccionarGanador = () => {\r\n        if (usuarioGanador) {\r\n            fetch('/api/concursos', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ id: concursos[0].id, ganador: usuarioGanador })\r\n            })\r\n                .then(() => {\r\n                    updateLikes(usuarioGanador, 1);\r\n                })\r\n                .catch(error => {\r\n                    console.error('Error seleccionando ganador:', error);\r\n                });\r\n        }\r\n    };\r\n    const handleAsignarGanador = async () => {\r\n        if (!concursoSeleccionado || !ganadorSeleccionado) {\r\n            return;\r\n        }\r\n        try {\r\n            await fetch('/api/concursos', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ id: concursoSeleccionado, ganador: ganadorSeleccionado })\r\n            });\r\n            updateLikes(ganadorSeleccionado, 10);\r\n            setConcursoSeleccionado(\"\");\r\n            setGanadorSeleccionado(\"\");\r\n            // Refrescar concursos\r\n            fetch('/api/concursos').then(r => r.json()).then(setConcursos);\r\n        } catch (error) {\r\n            console.error('Error asignando ganador:', error);\r\n        }\r\n    };\r\n    const handleNoticiaSubmit = (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        fetch('/api/noticias', {\r\n            method: 'POST',\r\n            headers: { 'Content-Type': 'application/json' },\r\n            body: JSON.stringify({\r\n                titulo: noticiaTitulo,\r\n                contenido: noticiaTexto,\r\n                autorNick: user ? user.nick : \"\"\r\n            })\r\n        })\r\n            .then(response => response.json())\r\n            .then(() => {\r\n                setNoticiaTitulo(\"\");\r\n                setNoticiaTexto(\"\");\r\n                setNoticiaImagen(\"\");\r\n            })\r\n            .catch(error => {\r\n                console.error('Error creando noticia:', error);\r\n            });\r\n    };\r\n\r\n    // Funci√≥n para enviar pregunta\r\n    const enviarPregunta = async () => {\r\n        if (!pregunta.trim() || !respuesta.trim()) {\r\n            return;\r\n        }\r\n        try {\r\n            const response = await fetch('/api/add-question', {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                },\r\n                body: JSON.stringify({\r\n                    curso: cursoSeleccionado,\r\n                    asignatura: asignaturaSeleccionada,\r\n                    pregunta: pregunta.trim(),\r\n                    respuesta: respuesta.trim(),\r\n                }),\r\n            });\r\n            const data = await response.json();\r\n            if (response.ok) {\r\n                setPregunta(\"\");\r\n                setRespuesta(\"\");\r\n            }\r\n        } catch (error) {\r\n            console.error('Error al enviar pregunta:', error);\r\n        }\r\n        // Funci√≥n general para sumar o restar likes a cualquier usuario\r\n        const updateLikes = (nick: string, cantidad: number) => {\r\n            if (!nick) return;\r\n            const currentLikes = usuarios.find((u: any) => u.nick === nick)?.likes || 0;\r\n            fetch('/api/users/update', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ nick, likes: currentLikes + cantidad })\r\n            })\r\n                .then(response => response.json())\r\n                .then(updatedUser => {\r\n                    const updatedUsers = usuarios.map((u: any) => u.nick === nick ? updatedUser : u);\r\n                    setUsuarios(updatedUsers);\r\n                    if (user && user.nick === nick) {\r\n                        setUser(updatedUser);\r\n                    }\r\n                })\r\n                .catch(error => console.error('Error updating likes:', error));\r\n        };\r\n    };\r\n    // Funci√≥n para bloquear trofeo espec√≠fico\r\n    const handleLockTrofeo = (trofeoIdx: number) => {\r\n        if (!selectedUser) return;\r\n        const updated = {\r\n            trofeosDesbloqueados: Array.isArray(userTrofeos.trofeosDesbloqueados) ? userTrofeos.trofeosDesbloqueados.filter((id: number) => id !== trofeoIdx) : [],\r\n            trofeosBloqueados: Array.isArray(userTrofeos.trofeosBloqueados) ? [...userTrofeos.trofeosBloqueados, trofeoIdx] : [trofeoIdx]\r\n        };\r\n        fetch('/api/trofeos/user-trofeos', {\r\n            method: 'POST',\r\n            headers: { 'Content-Type': 'application/json' },\r\n            body: JSON.stringify({ nick: selectedUser, ...updated })\r\n        })\r\n            .then(() => {\r\n                setUserTrofeos(updated);\r\n            })\r\n            .catch(error => {\r\n                console.error('Error locking trofeo:', error);\r\n            });\r\n    };    // Lista de trofeos normales (24)\r\n    const TROFEOS = [\r\n        { src: \"/trofeo25.jpg\", texto: \"Trofeo 1\", tipo: \"auto\" },\r\n        { src: \"/trofeo7.jpg\", texto: \"Trofeo 2\", tipo: \"auto\" },\r\n        { src: \"/trofeo12.jpg\", texto: \"Trofeo 3\", tipo: \"auto\" },\r\n        { src: \"/trofeo5.jpg\", texto: \"Trofeo 4\", tipo: \"auto\" },\r\n        { src: \"/trofeo13.png\", texto: \"Trofeo 5\", tipo: \"auto\" },\r\n        { src: \"/trofeo17.jpg\", texto: \"Trofeo 6\", tipo: \"auto\" },\r\n        { src: \"/trofeo27.jpg\", texto: \"Trofeo 7\", tipo: \"auto\" },\r\n        { src: \"/trofeo10.jpg\", texto: \"Trofeo 8\", tipo: \"auto\" },\r\n        { src: \"/trofeo23.jpg\", texto: \"Trofeo 9\", tipo: \"auto\" },\r\n        { src: \"/trofeo15.jpg\", texto: \"Trofeo 10\", tipo: \"auto\" },\r\n        { src: \"/trofeo26.jpg\", texto: \"Trofeo 11\", tipo: \"auto\" },\r\n        { src: \"/trofeo1.jpg\", texto: \"Trofeo 12\", tipo: \"auto\" },\r\n        { src: \"/trofeo22.jpg\", texto: \"Trofeo 13\", tipo: \"auto\" },\r\n        { src: \"/trofeo14.jpg\", texto: \"Trofeo 14\", tipo: \"auto\" },\r\n        { src: \"/trofeo20.jpg\", texto: \"Trofeo 15\", tipo: \"auto\" },\r\n        { src: \"/trofeo11.jpg\", texto: \"Trofeo 16\", tipo: \"auto\" },\r\n        { src: \"/trofeo24.jpg\", texto: \"Trofeo 17\", tipo: \"auto\" },\r\n        { src: \"/trofeo18.jpg\", texto: \"Trofeo 18\", tipo: \"auto\" },\r\n        { src: \"/trofeo19.jpg\", texto: \"Trofeo 19\", tipo: \"auto\" },\r\n        { src: \"/trofeo15.jpg\", texto: \"Trofeo 20\", tipo: \"auto\" },\r\n        { src: \"/trofeo9.jpg\", texto: \"Trofeo 21\", tipo: \"auto\" },\r\n        { src: \"/trofeo8.jpg\", texto: \"Trofeo 22\", tipo: \"auto\" },\r\n        { src: \"/trofeo21.jpg\", texto: \"Trofeo 23\", tipo: \"auto\" },\r\n        { src: \"/trofeo16.jpg\", texto: \"Trofeo 24\", tipo: \"auto\" },\r\n        { src: \"/trofeo1.jpg\", texto: \"üèÜ Campe√≥n Mensual\", tipo: \"asignado\" },\r\n        { src: \"/trofeo2.jpg\", texto: \"ü•à Subcampe√≥n Mensual\", tipo: \"asignado\" },\r\n        { src: \"/trofeo3.jpg\", texto: \"ü•â Tercer Lugar Mensual\", tipo: \"asignado\" },\r\n        { src: \"/trofeo4.jpg\", texto: \"üèÖ Top 10 Mensual\", tipo: \"asignado\" },\r\n        { src: \"/trofeo5.jpg\", texto: \"üìö Participante Activo\", tipo: \"asignado\" }\r\n    ];\r\n    // Lista de trofeos premium (12)\r\n    // TROFEOS_PREMIUM ahora se importa desde trofeosPremiumImport.ts\r\n    // Trofeos autom√°ticos con condici√≥n\r\n    const TROFEOS_AUTO = [\r\n        { src: \"/trofeo25.jpg\", texto: \"Trofeo 1\", tipo: \"auto\", condicion: (user: any) => (user.likes || 0) >= 10 },\r\n        { src: \"/trofeo7.jpg\", texto: \"Trofeo 2\", tipo: \"auto\", condicion: (user: any) => Array.isArray(user.amigos) && user.amigos.length >= 1 },\r\n        { src: \"/trofeo12.jpg\", texto: \"Trofeo 3\", tipo: \"auto\", condicion: (user: any) => (user.comentariosRecibidos || 0) >= 1 },\r\n        { src: \"/trofeo5.jpg\", texto: \"Trofeo 4\", tipo: \"auto\", condicion: (user: any) => (user.historiasCreadas || 0) >= 1 },\r\n        { src: \"/trofeo13.png\", texto: \"Trofeo 5\", tipo: \"auto\", condicion: (user: any) => (user.respuestasAcertadas || 0) >= 20 },\r\n        { src: \"/trofeo17.jpg\", texto: \"Trofeo 6\", tipo: \"auto\", condicion: (user: any) => (user.competicionesSuperadas || 0) >= 1 },\r\n        {\r\n            src: \"/trofeo27.jpg\", texto: \"Trofeo 7\", tipo: \"auto\", condicion: (user: any) => {\r\n                // Aparecer en rankings\r\n                return (user.respuestasAcertadas || 0) >= 1 || (user.likes || 0) >= 1 || (user.historiasCreadas || 0) >= 1;\r\n            }\r\n        },\r\n        { src: \"/trofeo10.jpg\", texto: \"Trofeo 8\", tipo: \"auto\", condicion: (user: any) => (user.concursosGanados || 0) >= 1 },\r\n        { src: \"/trofeo23.jpg\", texto: \"Trofeo 9\", tipo: \"auto\", condicion: (user: any) => (user.likes || 0) >= 100 },\r\n        { src: \"/trofeo15.jpg\", texto: \"Trofeo 10\", tipo: \"auto\", condicion: (user: any) => Array.isArray(user.amigos) && user.amigos.length >= 10 },\r\n        { src: \"/trofeo26.jpg\", texto: \"Trofeo 11\", tipo: \"auto\", condicion: (user: any) => (user.historiasCreadas || 0) >= 3 },\r\n        { src: \"/trofeo1.jpg\", texto: \"Trofeo 12\", tipo: \"auto\", condicion: (user: any) => (user.comentariosRecibidos || 0) >= 3 },\r\n        { src: \"/trofeo22.jpg\", texto: \"Trofeo 13\", tipo: \"auto\", condicion: (user: any) => (user.competicionesSuperadas || 0) >= 1 },\r\n        { src: \"/trofeo14.jpg\", texto: \"Trofeo 14\", tipo: \"auto\", condicion: (user: any) => (user.likes || 0) >= 500 },\r\n        { src: \"/trofeo20.jpg\", texto: \"Trofeo 15\", tipo: \"auto\", condicion: (user: any) => Array.isArray(user.amigos) && user.amigos.length >= 30 },\r\n        { src: \"/trofeo11.jpg\", texto: \"Trofeo 16\", tipo: \"auto\", condicion: (user: any) => (user.comentariosRecibidos || 0) >= 10 },\r\n        { src: \"/trofeo24.jpg\", texto: \"Trofeo 17\", tipo: \"auto\", condicion: (user: any) => (user.historiasCreadas || 0) >= 15 },\r\n        { src: \"/trofeo18.jpg\", texto: \"Trofeo 18\", tipo: \"auto\", condicion: (user: any) => (user.concursosGanados || 0) >= 3 },\r\n        { src: \"/trofeo19.jpg\", texto: \"Trofeo 19\", tipo: \"auto\", condicion: (user: any) => (user.respuestasAcertadas || 0) >= 1000 },\r\n        { src: \"/trofeo15.jpg\", texto: \"Trofeo 20\", tipo: \"auto\", condicion: (user: any) => (user.anosEnStoryUp || 0) >= 1 },\r\n        { src: \"/trofeo9.jpg\", texto: \"Trofeo 21\", tipo: \"auto\", condicion: (user: any) => (user.historiasCreadas || 0) >= 30 },\r\n        { src: \"/trofeo8.jpg\", texto: \"Trofeo 22\", tipo: \"auto\", condicion: (user: any) => (user.likes || 0) >= 1000 },\r\n        { src: \"/trofeo21.jpg\", texto: \"Trofeo 23\", tipo: \"auto\", condicion: (user: any) => Array.isArray(user.amigos) && user.amigos.length >= 50 },\r\n        {\r\n            src: \"/trofeo16.jpg\", texto: \"Trofeo 24\", tipo: \"auto\", condicion: (user: any) => {\r\n                // M√°ster (500 respuestas)\r\n                return (user.likes || 0) >= 500 && Array.isArray(user.amigos) && user.amigos.length >= 10 && (user.historiasCreadas || 0) >= 5 && (user.respuestasAcertadas || 0) >= 100;\r\n            }\r\n        }\r\n    ];\r\n    // Unificar todos los trofeos para el selector\r\n    const TROFEOS_ALL = [...TROFEOS, ...TROFEOS_PREMIUM];\r\n    // Funci√≥n para obtener trofeos desbloqueados autom√°ticamente\r\n    const getAutoTrofeos = (user: any) => {\r\n        // Trofeo Premium 7: Dise√±ador del Futuro\r\n        // ...existing code...\r\n        // Asegurar que el campo amigos es siempre un array actualizado\r\n        const userSync = {\r\n            ...user,\r\n            amigos: Array.isArray(user.amigos) ? user.amigos : []\r\n        };\r\n\r\n        console.log('getAutoTrofeos: Evaluating user data:', userSync);\r\n\r\n        let autoTrofeos = TROFEOS_AUTO\r\n            .map((t, idx) => {\r\n                const conditionResult = typeof t.condicion === 'function' && t.condicion(userSync);\r\n                console.log(`getAutoTrofeos: Trofeo ${idx} condition result:`, conditionResult, 'for user data:', {\r\n                    likes: userSync.likes,\r\n                    amigos: userSync.amigos,\r\n                    comentariosRecibidos: userSync.comentariosRecibidos,\r\n                    historias: userSync.historias,\r\n                    respuestasAcertadas: userSync.respuestasAcertadas\r\n                });\r\n                return conditionResult ? idx + 1 : null;  // ids empiezan en 1\r\n            })\r\n            .filter(id => id !== null);\r\n\r\n        console.log('getAutoTrofeos: Final auto trofeos:', autoTrofeos);\r\n\r\n        // Desbloqueo autom√°tico de trofeos premium\r\n        const esPremium = userSync.premium === true || userSync.isPremium === true || userSync.tipo === \"premium\";\r\n        const historiasCreadas = Array.isArray(userSync.historias) ? userSync.historias.length : (userSync.historiasCreadas || 0);\r\n        const respuestasAcertadas = userSync.respuestasAcertadas || 0;\r\n        // Trofeo Premium 1: Historiador Premium\r\n        if (esPremium && historiasCreadas >= 35) {\r\n            autoTrofeos.push(101); // id del trofeo premium 1\r\n        }\r\n        // Trofeo Premium 2: Sabio Premium\r\n        if (esPremium && respuestasAcertadas >= 1200) {\r\n            autoTrofeos.push(102); // id del trofeo premium 2\r\n        }\r\n        // Trofeo Premium 3: Amigo Premium\r\n        const amigosCount = Array.isArray(userSync.amigos) ? userSync.amigos.length : 0;\r\n        if (esPremium && amigosCount >= 60) {\r\n            autoTrofeos.push(103); // id del trofeo premium 3\r\n        }\r\n        // Trofeo Premium 4: Esp√≠ritu Navide√±o Premium\r\n        let tieneHistoriaNavidad = false;\r\n        if (esPremium && Array.isArray(userSync.historias)) {\r\n            tieneHistoriaNavidad = userSync.historias.some((historia: any) => {\r\n                if (!historia || !historia.titulo || !historia.fecha || !historia.modo) return false;\r\n                const tituloLower = historia.titulo.toLowerCase();\r\n                const esNavidad = tituloLower.includes(\"navidad\") || tituloLower.includes(\"navide√±o\") || tituloLower.includes(\"navide√±a\");\r\n                const fecha = new Date(historia.fecha);\r\n                const year = fecha.getFullYear();\r\n                // Rango: 20 diciembre a 6 enero (del a√±o siguiente)\r\n                const inicio = new Date(year, 11, 20); // 20 diciembre\r\n                const fin = new Date(year + 1, 0, 6, 23, 59, 59); // 6 enero\r\n                return historia.modo === \"My Live\" && esNavidad && fecha >= inicio && fecha <= fin;\r\n            });\r\n        }\r\n        if (esPremium && tieneHistoriaNavidad) {\r\n            autoTrofeos.push(104); // id del trofeo premium 4\r\n        }\r\n        // Trofeo Premium 5: Verano Dorado Premium\r\n        let tieneHistoriaVerano = false;\r\n        if (esPremium && Array.isArray(userSync.historias)) {\r\n            tieneHistoriaVerano = userSync.historias.some((historia: any) => {\r\n                if (!historia || !historia.fecha || !historia.modo) return false;\r\n                const fecha = new Date(historia.fecha);\r\n                // Rango: 15 junio a 15 septiembre\r\n                const year = fecha.getFullYear();\r\n                const inicio = new Date(year, 5, 15); // 15 junio\r\n                const fin = new Date(year, 8, 15, 23, 59, 59); // 15 septiembre\r\n                return historia.modo === \"My Live\" && fecha >= inicio && fecha <= fin;\r\n            });\r\n        }\r\n        if (esPremium && tieneHistoriaVerano) {\r\n            autoTrofeos.push(105); // id del trofeo premium 5\r\n        }\r\n        // Trofeo Premium 6: Veterano Dorado\r\n        let mesesPremium = 0;\r\n        if (userSync.premiumInicio && userSync.premiumExpiracion) {\r\n            const inicio = new Date(userSync.premiumInicio);\r\n            const fin = new Date(userSync.premiumExpiracion);\r\n            // Calcular meses completos entre inicio y fin\r\n            mesesPremium = (fin.getFullYear() - inicio.getFullYear()) * 12 + (fin.getMonth() - inicio.getMonth());\r\n            // Si el d√≠a de expiraci√≥n es menor que el de inicio, restar un mes\r\n            if (fin.getDate() < inicio.getDate()) {\r\n                mesesPremium--;\r\n            }\r\n        }\r\n        if (esPremium && mesesPremium >= 6) {\r\n            autoTrofeos.push(106); // id del trofeo premium 6\r\n        }\r\n        // Trofeo Premium 7: Dise√±ador del Futuro\r\n        let tieneLogoStoryUp = false;\r\n        if (esPremium && Array.isArray(userSync.historias)) {\r\n            tieneLogoStoryUp = userSync.historias.some((historia: any) => {\r\n                if (!historia || !historia.titulo || !historia.imagen) return false;\r\n                const tituloLower = historia.titulo.toLowerCase();\r\n                return tituloLower.includes(\"logo storyup\") && !!historia.imagen;\r\n            });\r\n        }\r\n        if (esPremium && tieneLogoStoryUp) {\r\n            autoTrofeos.push(107); // id del trofeo premium 7\r\n        }\r\n        // Trofeo Premium 8: Escritor Premium\r\n        if (esPremium && historiasCreadas >= 50) {\r\n            autoTrofeos.push(108); // id del trofeo premium 8\r\n        }\r\n\r\n        // Trofeo Premium 9: Competidor Premium\r\n        // Consigue al menos 30 trofeos (normales + premium)\r\n        const totalTrofeosDesbloqueados = Array.isArray(userSync.trofeosDesbloqueados) ? userSync.trofeosDesbloqueados.length : 0;\r\n        // Incluye los autom√°ticos calculados en esta funci√≥n\r\n        const totalAutoTrofeos = autoTrofeos.length;\r\n        const totalTrofeos = totalTrofeosDesbloqueados + totalAutoTrofeos;\r\n        if (esPremium && totalTrofeos >= 30) {\r\n            autoTrofeos.push(109); // id del trofeo premium 9\r\n        }\r\n        // Trofeo Premium 10: Cerebro de Oro\r\n        // 2500+ respuestas acertadas en Aprende con Pipo\r\n        if (esPremium && respuestasAcertadas >= 2500) {\r\n            autoTrofeos.push(110); // id del trofeo premium 10\r\n        }\r\n\r\n        // Trofeo Premium 11: Analista Premium\r\n        // Consigue nivel 3 en todas las materias en \"Analisis por materias\" de Estad√≠sticas premium Avanzadas\r\n        // Suponemos que user.nivelesMaterias es un objeto tipo { matematicas: 3, lenguaje: 3, ... }\r\n        const materiasRequeridas = [\"matematicas\", \"lenguaje\", \"ciencias\", \"ingles\", \"historia\", \"geografia\", \"literatura\"];\r\n        const nivelesMaterias = userSync.nivelesMaterias || {};\r\n        const todasNivel3 = materiasRequeridas.every(m => nivelesMaterias[m] >= 3);\r\n        if (esPremium && todasNivel3) {\r\n            autoTrofeos.push(111); // id del trofeo premium 11\r\n        }\r\n        // Trofeo Premium 12: Red Social Premium\r\n        // Conseguir 100+ amigos\r\n        if (esPremium && amigosCount >= 100) {\r\n            autoTrofeos.push(112); // id del trofeo premium 12\r\n        }\r\n        return autoTrofeos;\r\n    };\r\n    // Funci√≥n para sincronizar trofeos autom√°ticos\r\n    const syncAutoTrofeos = async (userData: any, currentTrofeos: any) => {\r\n        if (!userData || !userData.nick) {\r\n            console.log('syncAutoTrofeos: No userData or nick', userData);\r\n            return;\r\n        }\r\n\r\n        console.log('syncAutoTrofeos: Starting for user', userData.nick, 'with data:', userData);\r\n        console.log('syncAutoTrofeos: Checking conditions manually:');\r\n        console.log('- amigos:', userData.amigos, '>= 1?', userData.amigos >= 1);\r\n        console.log('- likes:', userData.likes, '>= 10?', userData.likes >= 10);\r\n        console.log('- historias:', userData.historias, '>= 1?', userData.historias >= 1);\r\n        console.log('- respuestasAcertadas:', userData.respuestasAcertadas, '>= 20?', userData.respuestasAcertadas >= 20);\r\n        console.log('- comentariosRecibidos:', userData.comentariosRecibidos, '>= 1?', userData.comentariosRecibidos >= 1);\r\n\r\n        try {\r\n            // Calcular trofeos autom√°ticos que deber√≠an estar desbloqueados\r\n            const autoTrofeos = getAutoTrofeos(userData);\r\n            console.log('syncAutoTrofeos: Auto trofeos calculated:', autoTrofeos);\r\n\r\n            const manual = Array.isArray(currentTrofeos.trofeosDesbloqueados) ? currentTrofeos.trofeosDesbloqueados : [];\r\n            const bloqueados = Array.isArray(currentTrofeos.trofeosBloqueados) ? currentTrofeos.trofeosBloqueados : [];\r\n\r\n            console.log('syncAutoTrofeos: Current trofeos - manual:', manual, 'bloqueados:', bloqueados);\r\n\r\n            // Filtrar trofeos autom√°ticos que no est√°n ya desbloqueados ni bloqueados\r\n            const nuevosAutoTrofeos = autoTrofeos.filter((idx: number) =>\r\n                !manual.includes(idx) && !bloqueados.includes(idx)\r\n            );\r\n\r\n            // Trofeos que ya no cumplen la condici√≥n (remover)\r\n            const toRemove = manual.filter((id: number) => !autoTrofeos.includes(id));\r\n\r\n            console.log('syncAutoTrofeos: Trofeos to remove:', toRemove);\r\n\r\n            let updatedTrofeosDesbloqueados = manual;\r\n\r\n            if (nuevosAutoTrofeos.length > 0 || toRemove.length > 0) {\r\n                // Agregar nuevos y remover los que ya no cumplen\r\n                updatedTrofeosDesbloqueados = [...manual, ...nuevosAutoTrofeos].filter(id => !toRemove.includes(id));\r\n\r\n                const updated = {\r\n                    trofeosDesbloqueados: updatedTrofeosDesbloqueados,\r\n                    trofeosBloqueados: bloqueados\r\n                };\r\n\r\n                console.log('syncAutoTrofeos: Saving updated trofeos:', updated);\r\n\r\n                // Guardar en la base de datos\r\n                await fetch('/api/trofeos/user-trofeos', {\r\n                    method: 'POST',\r\n                    headers: { 'Content-Type': 'application/json' },\r\n                    body: JSON.stringify({ nick: userData.nick, ...updated })\r\n                });\r\n\r\n                // Actualizar el estado local\r\n                setUserTrofeos(updated);\r\n\r\n                console.log(`Sincronizados ${nuevosAutoTrofeos.length} trofeos autom√°ticos y removidos ${toRemove.length} trofeos para ${userData.nick}`);\r\n            } else {\r\n                console.log('syncAutoTrofeos: No changes needed');\r\n            }\r\n        } catch (error) {\r\n            console.error('Error sincronizando trofeos autom√°ticos:', error);\r\n        }\r\n    };\r\n    // Funci√≥n para saber si un trofeo est√° desbloqueado\r\n    const isTrofeoUnlocked = (user: any, idx: number) => {\r\n        console.log('isTrofeoUnlocked called with user:', user, 'idx:', idx);\r\n        console.log('displayedUser:', displayedUser);\r\n        console.log('userTrofeos:', userTrofeos);\r\n\r\n        // Calcular trofeos autom√°ticos basados en los datos del usuario\r\n        const auto = getAutoTrofeos(user);\r\n        console.log('Auto trofeos for this user:', auto);\r\n\r\n        // Usar los trofeos guardados en la base de datos\r\n        const manual = Array.isArray(userTrofeos.trofeosDesbloqueados) ? userTrofeos.trofeosDesbloqueados : [];\r\n        const bloqueados = Array.isArray(userTrofeos.trofeosBloqueados) ? userTrofeos.trofeosBloqueados : [];\r\n\r\n        console.log('Manual trofeos:', manual, 'Bloqueados:', bloqueados);\r\n\r\n        // Mapear idx a trofeoId\r\n        const getTrofeoId = (idx: number) => {\r\n            if (idx < TROFEOS.length) {\r\n                return idx + 1;\r\n            } else {\r\n                return 101 + (idx - TROFEOS.length);\r\n            }\r\n        };\r\n\r\n        const trofeoId = getTrofeoId(idx);\r\n        const isUnlocked = (auto.includes(trofeoId) || manual.includes(trofeoId)) && !bloqueados.includes(trofeoId);\r\n        console.log('Trofeo', idx, 'id:', trofeoId, 'is unlocked:', isUnlocked);\r\n\r\n        return isUnlocked;\r\n    };\r\n\r\n    if (!user) {\r\n        return (\r\n            <div className=\"min-h-screen bg-green-100 flex items-center justify-center\">\r\n                <div className=\"max-w-md w-full bg-white shadow rounded p-6 text-center\">\r\n                    <h2 className=\"text-2xl font-bold mb-4\">Perfil</h2>\r\n                    <p className=\"text-gray-600\">No se ha iniciado sesi√≥n.</p>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    const isPremium = displayedUser ? (displayedUser.premium === true || displayedUser.isPremium === true || displayedUser.tipo === \"premium\") : false;\r\n    return (\r\n        <div className=\"min-h-screen bg-green-100 flex flex-col pt-4\">\r\n            {/* Solicitudes de Amistad Pendientes */}\r\n            {pendingRequests.length > 0 && (\r\n                <div className=\"w-full max-w-4xl mx-auto mb-4\">\r\n                    <div className=\"bg-yellow-50 border border-yellow-200 rounded-lg p-4\">\r\n                        <h3 className=\"text-lg font-bold text-yellow-800 mb-2\">Solicitudes de Amistad Pendientes</h3>\r\n                        {pendingRequests.map((request: any) => (\r\n                            <div key={request.id} className=\"flex items-center justify-between bg-white p-3 rounded mb-2 shadow\">\r\n                                <span className=\"text-gray-700\">Solicitud de <strong>{renderNick(request.solicitante.nick)}</strong></span>\r\n                                <div className=\"flex gap-2\">\r\n                                    <button\r\n                                        onClick={() => handleAcceptRequest(request.id)}\r\n                                        className=\"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded font-semibold\"\r\n                                    >\r\n                                        Aceptar\r\n                                    </button>\r\n                                    <button\r\n                                        onClick={() => handleRejectRequest(request.id)}\r\n                                        className=\"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded font-semibold\"\r\n                                    >\r\n                                        Rechazar\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n            )}\r\n            <div className=\"w-full max-w-6xl mx-auto mt-4 mb-4\">\r\n                <h1 className=\"text-3xl font-bold text-center\">Perfil de: <UserLink nick={displayedUser.nick} /></h1>\r\n            </div>\r\n            <div className=\"w-full max-w-6xl mx-auto mt-8 grid grid-cols-2 gap-8\">\r\n                {/* Informaci√≥n Personal - Izquierda */}\r\n                <div className={`bg-white rounded-lg shadow-md p-6 flex flex-col items-center relative transition-all duration-500 ${isPremium ? 'border-4 border-yellow-400 shadow-2xl shadow-yellow-400/50 animate-pulse overflow-hidden' : ''}`}>\r\n                    {/* Efecto de part√≠culas para premium */}\r\n                    {isPremium && (\r\n                        <div className=\"absolute inset-0 pointer-events-none\">\r\n                            <div className=\"absolute top-2 right-2 w-2 h-2 bg-yellow-400 rounded-full animate-ping opacity-75\"></div>\r\n                            <div className=\"absolute top-4 left-4 w-1 h-1 bg-yellow-300 rounded-full animate-bounce opacity-60\"></div>\r\n                            <div className=\"absolute bottom-4 right-6 w-1.5 h-1.5 bg-yellow-500 rounded-full animate-pulse opacity-80\"></div>\r\n                        </div>\r\n                    )}\r\n\r\n                    <div className=\"flex justify-between items-center mb-4 relative\">\r\n                        <h3 className={`text-xl font-bold text-center w-full transition-all duration-300 ${isPremium ? 'text-yellow-600' : ''}`}>\r\n                            Informaci√≥n Personal\r\n                            {isPremium && (\r\n                                <span className=\"ml-2 animate-spin\">üëë</span>\r\n                            )}\r\n                        </h3>\r\n                    </div>\r\n\r\n                    <div className=\"flex flex-col items-center mb-4 relative\">\r\n                        <div className={`relative ${isPremium ? '' : ''}`}>\r\n                            <img src={displayedUser.avatar || \"/avatars/simple1.png\"} alt=\"Avatar\" className={`w-20 h-20 rounded-full mb-2 transition-all duration-300 ${isPremium ? 'ring-4 ring-yellow-400 ring-opacity-70 shadow-lg shadow-yellow-400/50 hover:scale-110' : ''}`} />\r\n                            {isPremium && (\r\n                                <div className=\"absolute -top-1 -right-1 w-6 h-6 bg-gradient-to-r from-yellow-400 to-yellow-600 rounded-full flex items-center justify-center text-xs animate-bounce\">\r\n                                    ‚ú®\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                        <div className=\"mt-4\">\r\n                            <a href=\"/perfil/avatar\" className=\"bg-blue-500 text-white px-4 py-2 rounded font-semibold hover:bg-blue-600 transition\">Seleccionar y Cambiar Avatar</a>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <p><strong>Nick:</strong> {renderNick(displayedUser.nick)}</p>\r\n                    <p><strong>Email:</strong> {displayedUser.email}</p>\r\n                    <p><strong>Centro Educativo:</strong> {displayedUser.centro}</p>\r\n                    <p><strong>Curso:</strong> {displayedUser.curso}</p>\r\n                    <p><strong>Tipo de Usuario:</strong> {displayedUser.tipo}</p>\r\n                    <p><strong>Fecha de Inscripci√≥n:</strong> {displayedUser.fechaInscripcion ? new Date(displayedUser.fechaInscripcion).toLocaleDateString('es-ES') : ''}</p>\r\n                    <div className=\"mb-2 flex items-center\">\r\n                        <div className=\"flex flex-col mt-2 gap-y-4\">\r\n                            <div className=\"flex flex-row gap-x-12\">\r\n                                <div className=\"flex items-center\">\r\n                                    <span className=\"mr-2 text-lg\">üëç</span>\r\n                                    <strong>Likes:</strong>\r\n                                    <span className=\"ml-2 inline-flex items-center justify-center w-8 h-8 rounded-full bg-green-300 text-green-900 font-bold text-sm\">{displayedUser.likes || 0}</span>\r\n                                </div>\r\n                                <div className=\"flex items-center ml-8\">\r\n                                    <span className=\"mr-2 text-lg\">üë•</span>\r\n                                    <strong>Total de Amigos:</strong>\r\n                                    <span className=\"ml-2 inline-flex items-center justify-center w-8 h-8 rounded-full bg-blue-300 text-blue-900 font-bold text-sm\">{displayedUser.amigos || 0}</span>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"flex flex-row gap-x-12\">\r\n                                <div className=\"flex items-center\">\r\n                                    <span className=\"mr-2 text-lg\">üìñ</span>\r\n                                    <strong>Total de Historias:</strong>\r\n                                    <span className=\"ml-2 inline-flex items-center justify-center w-8 h-8 rounded-full bg-purple-200 text-purple-900 font-bold text-sm\">{displayedUser.historias ? displayedUser.historias.length : 0}</span>\r\n                                </div>\r\n                                <div className=\"flex items-center\">\r\n                                    <span className=\"mr-2 text-lg\">üí¨</span>\r\n                                    <strong>Total de Comentarios:</strong>\r\n                                    <span className=\"ml-2 inline-flex items-center justify-center w-8 h-8 rounded-full bg-yellow-200 text-yellow-900 font-bold text-sm\">{displayedUser.comentariosRecibidos || 0}</span>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"flex flex-row gap-x-12\">\r\n                                <div className=\"flex items-center\">\r\n                                    <span className=\"mr-2 text-lg\">üèÜ</span>\r\n                                    <strong>Trofeos Desbloqueados:</strong>\r\n                                    {(() => {\r\n                                        const trofeos = Array.isArray(displayedUser.trofeosDesbloqueados) ? displayedUser.trofeosDesbloqueados : [];\r\n                                        const total = trofeos.length;\r\n                                        return (\r\n                                            <span className=\"ml-2 inline-flex items-center justify-center w-8 h-8 rounded-full bg-pink-200 text-pink-900 font-bold text-sm\">{total}</span>\r\n                                        );\r\n                                    })()}\r\n                                </div>\r\n                                <div className=\"flex items-center\">\r\n                                    <span className=\"mr-2 text-lg\">‚úÖ</span>\r\n                                    <strong>Respuestas acertadas:</strong>\r\n                                    <span className=\"ml-2 inline-flex items-center justify-center w-8 h-8 rounded-full bg-indigo-200 text-indigo-900 font-bold text-sm\">{displayedUser.respuestasAcertadas || 0}</span>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"flex flex-row gap-x-12\">\r\n                                <div className=\"flex items-center\">\r\n                                    <span className=\"mr-2 text-lg\">ü•á</span>\r\n                                    <strong>Competiciones:</strong>\r\n                                    <span className=\"ml-2 inline-flex items-center justify-center w-8 h-8 rounded-full bg-teal-200 text-teal-900 font-bold text-sm\">{displayedUser.competicionesSuperadas || 0}</span>\r\n                                </div>\r\n                                <div className=\"flex items-center\">\r\n                                    <span className=\"mr-2 text-lg\">üéâ</span>\r\n                                    <strong>Concursos:</strong>\r\n                                    <span className=\"ml-2 inline-flex items-center justify-center w-8 h-8 rounded-full bg-red-200 text-red-900 font-bold text-sm\">{displayedUser.concursosGanados || 0}</span>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Trofeos y Trofeos Premium - Derecha */}\r\n                <div className=\"flex flex-col gap-4\">\r\n                    {/* Trofeos */}\r\n                    <div className=\"bg-white shadow-lg rounded-lg p-6\">\r\n                        <h3 className=\"text-xl font-bold text-center mb-4\">Trofeos</h3>\r\n                        <div className=\"grid grid-cols-4 md:grid-cols-8 gap-4\">\r\n                            {TROFEOS.slice(0, 24).map((trofeo, idx) => (\r\n                                <div key={idx} className={`relative aspect-square flex flex-col items-center justify-center p-1 rounded-lg overflow-hidden ${isTrofeoUnlocked(displayedUser, idx) ? 'bg-yellow-100 border-2 border-yellow-400' : 'bg-gray-100 border-2 border-gray-300'}`}>\r\n                                    <img src={trofeo.src} alt={trofeo.texto} className={`w-[50px] h-[50px] ${!isTrofeoUnlocked(displayedUser, idx) ? 'opacity-25' : ''}`} />\r\n                                    {!isTrofeoUnlocked(displayedUser, idx) && (\r\n                                        <div className=\"absolute inset-0 flex items-center justify-center\">\r\n                                            <span className=\"text-red-600 text-4xl font-bold\">‚úï</span>\r\n                                        </div>\r\n                                    )}\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Trofeos Premium */}\r\n                    <div className=\"bg-white shadow-lg rounded-lg p-6\">\r\n                        <h3 className=\"text-xl font-bold text-center mb-4\">Trofeos Premium</h3>\r\n                        <div className=\"grid grid-cols-4 md:grid-cols-6 gap-4\">\r\n                            {TROFEOS_PREMIUM.map((trofeo, idx) => (\r\n                                <div key={idx} className={`relative aspect-square flex flex-col items-center justify-center p-1 rounded-lg overflow-hidden ${isTrofeoUnlocked(displayedUser, TROFEOS.length + idx) ? 'bg-purple-100 border-2 border-purple-400' : 'bg-gray-100 border-2 border-gray-300'}`}>\r\n                                    <img src={trofeo.src} alt={trofeo.texto} className={`w-[50px] h-[50px] ${!isTrofeoUnlocked(displayedUser, TROFEOS.length + idx) ? 'opacity-25' : ''}`} />\r\n                                    {!isTrofeoUnlocked(displayedUser, TROFEOS.length + idx) && (\r\n                                        <div className=\"absolute inset-0 flex items-center justify-center\">\r\n                                            <span className=\"text-red-600 text-4xl font-bold\">‚úï</span>\r\n                                        </div>\r\n                                    )}\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Chat - Debajo */}\r\n            <div className=\"w-full max-w-6xl mx-auto mt-8\">\r\n                <div className=\"bg-white shadow-lg rounded-lg p-6 flex flex-row gap-6\">\r\n                    {/* Selector de usuario a la izquierda */}\r\n                    <div className=\"w-1/4 min-w-[180px] flex flex-col gap-2\">\r\n                        <label htmlFor=\"user-selector\" className=\"font-semibold mb-2\">Selecciona usuario:</label>\r\n                        <select\r\n                            id=\"user-selector\"\r\n                            className=\"border rounded px-3 py-2\"\r\n                            value={selectedUser}\r\n                            onChange={e => setSelectedUser(e.target.value)}\r\n                        >\r\n                            <option value=\"\">-- Elige un usuario --</option>\r\n                            {usuarios.filter(u => u.nick !== user.nick).map(u => (\r\n                                <option key={u.nick} value={u.nick}>{u.nick}</option>\r\n                            ))}\r\n                        </select>\r\n                    </div>\r\n                    {/* Chat principal */}\r\n                    <div className=\"flex-1 flex flex-col\">\r\n                        <h3 className=\"text-xl font-bold text-center mb-4\">Chat</h3>\r\n                        <div className=\"h-64 overflow-y-auto border rounded p-4 mb-4 bg-gray-50\">\r\n                            {chatMessages.map((msg, idx) => (\r\n                                <div key={idx} className={`mb-2 ${msg.from === user.nick ? 'text-right' : 'text-left'}`}>\r\n                                    <span className=\"font-semibold\">{msg.from}:</span> {msg.text}\r\n                                    {msg.fecha && <span className=\"text-xs text-gray-500 ml-2\">({new Date(msg.fecha).toLocaleString()})</span>}\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                        <div className=\"flex gap-2\">\r\n                            <input\r\n                                type=\"text\"\r\n                                value={chatInput}\r\n                                onChange={(e) => setChatInput(e.target.value)}\r\n                                placeholder=\"Escribe un mensaje...\"\r\n                                className=\"flex-1 border rounded px-3 py-2\"\r\n                                onKeyPress={(e) => e.key === 'Enter' && handleSendMessage()}\r\n                                disabled={!selectedUser}\r\n                            />\r\n                            <button\r\n                                onClick={handleSendMessage}\r\n                                className=\"bg-blue-500 text-white px-4 py-2 rounded font-semibold\"\r\n                                disabled={!selectedUser || !chatInput.trim()}\r\n                            >\r\n                                Enviar\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* BLOQUES EXTRA SOLO PARA DOCENTES */}\r\n            {user.tipo && user.tipo.toLowerCase() === \"docente\" && (\r\n                <>\r\n                    <div className=\"w-full max-w-6xl mx-auto mt-20\">\r\n                        <div className=\"grid grid-cols-2 gap-12\">\r\n                            <div className=\"bg-white shadow-lg rounded-lg p-6\">\r\n                                <h3 className=\"text-xl font-bold text-center mb-2\">Crear noticia</h3>\r\n                                <form className=\"w-full flex flex-col gap-4\" onSubmit={handleNoticiaSubmit}>\r\n                                    <input type=\"text\" className=\"border rounded px-3 py-2 w-full\" placeholder=\"T√≠tulo de la noticia\" value={noticiaTitulo} onChange={e => setNoticiaTitulo(e.target.value)} />\r\n                                    <div className=\"relative w-full\">\r\n                                        <textarea className=\"border rounded px-3 py-2 w-full min-h-[80px]\" placeholder=\"Escribe la noticia aqu√≠...\" value={noticiaTexto} onChange={e => setNoticiaTexto(e.target.value)} />\r\n                                        {noticiaImagen && (\r\n                                            <img src={noticiaImagen} alt=\"Previsualizaci√≥n\" className=\"absolute left-0 top-0 w-full h-full object-contain rounded shadow pointer-events-none\" style={{ zIndex: 1, opacity: 0.7 }} />\r\n                                        )}\r\n                                    </div>\r\n                                    <div className=\"flex items-center gap-4 mt-2\">\r\n                                        <input id=\"noticia-imagen\" type=\"file\" accept=\"image/*\" className=\"hidden\" onChange={e => {\r\n                                            const file = e.target.files?.[0];\r\n                                            if (file) {\r\n                                                setNombreArchivo(file.name);\r\n                                                const reader = new FileReader();\r\n                                                reader.onload = (ev) => {\r\n                                                    setNoticiaImagen(ev.target?.result as string);\r\n                                                };\r\n                                                reader.readAsDataURL(file);\r\n                                            } else {\r\n                                                setNombreArchivo(\"\");\r\n                                                setNoticiaImagen(\"\");\r\n                                            }\r\n                                        }} />\r\n                                        <button type=\"button\" className=\"bg-gray-200 text-gray-700 px-4 py-2 rounded font-semibold border\" onClick={() => document.getElementById('noticia-imagen')?.click()}>Seleccionar imagen</button>\r\n                                        <button type=\"submit\" className=\"bg-blue-500 text-white px-4 py-2 rounded font-semibold\">Publicar noticia</button>\r\n                                    </div>\r\n                                </form>\r\n                            </div>\r\n                            <div className=\"bg-white shadow-lg rounded-lg p-6\">\r\n                                <h3 className=\"text-xl font-bold text-center mb-2\">Crear concurso</h3>\r\n                                <form className=\"w-full flex flex-col gap-4\" onSubmit={handleConcursoSubmit}>\r\n                                    <div className=\"flex items-center gap-4\">\r\n                                        <input type=\"text\" className=\"border rounded px-3 py-2 flex-1\" placeholder={t('titulo')} value={concursoTitulo} onChange={e => setConcursoTitulo(e.target.value)} />\r\n                                        <span className=\"text-sm text-gray-500\">ID: {concursoId}</span>\r\n                                    </div>\r\n                                    <textarea className=\"border rounded px-3 py-2 w-full min-h-[80px]\" placeholder={t('descripcion')} value={concursoTexto} onChange={e => setConcursoTexto(e.target.value)} />\r\n                                    <div className=\"flex items-center gap-4\">\r\n                                        <div className=\"flex flex-col flex-1\">\r\n                                            <label className=\"text-sm mb-1\">{t('fechaInicio')}</label>\r\n                                            <input type=\"date\" className=\"border rounded px-3 py-2\" value={fechaInicio} onChange={e => setFechaInicio(e.target.value)} />\r\n                                        </div>\r\n                                        <div className=\"flex flex-col flex-1\">\r\n                                            <label className=\"text-sm mb-1\">{t('fechaFin')}</label>\r\n                                            <input type=\"date\" className=\"border rounded px-3 py-2\" value={fechaFin} onChange={e => setFechaFin(e.target.value)} />\r\n                                        </div>\r\n                                        <button type=\"submit\" className=\"bg-blue-500 text-white px-4 py-2 rounded font-semibold\">{t('enviar')}</button>\r\n                                    </div>\r\n                                </form>\r\n                            </div>\r\n                        </div>\r\n                        {/* Gesti√≥n de Concursos Finalizados - Solo para docentes */}\r\n                        <div className=\"w-full mt-6 pt-4 border-t border-gray-200\">\r\n                            <h4 className=\"text-lg font-semibold text-center mb-3 text-gray-700\">{t('gestionarConcursosFinalizados')}</h4>\r\n                            <div className=\"flex flex-col gap-3\">\r\n                                <select className=\"border rounded px-3 py-2 text-sm\" value={concursoSeleccionado} onChange={e => setConcursoSeleccionado(e.target.value)}>\r\n                                    <option value=\"\">{t('seleccionarConcurso')}</option>\r\n                                    {(() => {\r\n                                        const hoy = new Date();\r\n                                        return concursos\r\n                                            .filter((c: any) => {\r\n                                                if (!c.fin) return false;\r\n                                                const fechaFin = new Date(c.fin);\r\n                                                const ahora = new Date();\r\n                                                // Solo mostrar concursos del docente actual que hayan finalizado y sin ganador\r\n                                                return fechaFin < ahora && c.autor === user.nick && !c.ganador;\r\n                                            })\r\n                                            .map((c: any) => (\r\n                                                <option key={c.id} value={c.id}>\r\n                                                    {c.titulo} (ID: {c.numero}) - Sin ganador\r\n                                                </option>\r\n                                            ));\r\n                                    })()}\r\n                                </select>\r\n                                <select className=\"border rounded px-3 py-2 text-sm\" value={ganadorSeleccionado} onChange={e => setGanadorSeleccionado(e.target.value)}>\r\n                                    <option value=\"\">{t('seleccionarGanador')}</option>\r\n                                    {usuarios.sort((a, b) => a.nick.localeCompare(b.nick)).map((u, idx) => (\r\n                                        <option key={idx} value={u.nick}>{u.nick}</option>\r\n                                    ))}\r\n                                </select>\r\n                                <button className=\"bg-green-500 text-white px-4 py-2 rounded font-semibold text-sm\" onClick={handleAsignarGanador} disabled={!concursoSeleccionado || !ganadorSeleccionado}>\r\n                                    {t('asignarGanador')}\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"bg-white shadow-lg rounded-lg p-6 flex flex-col gap-4 mt-6\">\r\n                            <h3 className=\"text-xl font-bold text-center mb-2\">Agregar Pregunta - Aprende con Pipo</h3>\r\n                            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-blue-700 mb-2\">Curso:</label>\r\n                                    <select value={cursoSeleccionado} onChange={(e) => setCursoSeleccionado(e.target.value)} className=\"w-full px-3 py-2 border border-blue-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\">\r\n                                        <option value=\"1primaria\">1¬∫ Primaria</option>\r\n                                        <option value=\"2primaria\">2¬∫ Primaria</option>\r\n                                        <option value=\"3primaria\">3¬∫ Primaria</option>\r\n                                        <option value=\"4primaria\">4¬∫ Primaria</option>\r\n                                        <option value=\"5primaria\">5¬∫ Primaria</option>\r\n                                        <option value=\"6primaria\">6¬∫ Primaria</option>\r\n                                    </select>\r\n                                </div>\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-blue-700 mb-2\">Asignatura:</label>\r\n                                    <select value={asignaturaSeleccionada} onChange={(e) => setAsignaturaSeleccionada(e.target.value)} className=\"w-full px-3 py-2 border border-blue-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\">\r\n                                        <option value=\"campeonato\">Campeonato</option>\r\n                                        <option value=\"general\">General</option>\r\n                                        <option value=\"matematicas\">Matem√°ticas</option>\r\n                                        <option value=\"lenguaje\">Lenguaje</option>\r\n                                        <option value=\"literatura\">Literatura</option>\r\n                                        <option value=\"historia\">Historia</option>\r\n                                        <option value=\"geografia\">Geograf√≠a</option>\r\n                                        <option value=\"ingles\">Ingl√©s</option>\r\n                                        <option value=\"naturaleza\">Naturaleza</option>\r\n                                    </select>\r\n                                </div>\r\n                            </div>\r\n                            <div>\r\n                                <label className=\"block text-sm font-medium text-blue-700 mb-2\">Pregunta:</label>\r\n                                <textarea value={pregunta} onChange={(e) => setPregunta(e.target.value)} placeholder=\"Escribe la pregunta aqu√≠...\" className=\"w-full px-3 py-2 border border-blue-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 h-20 resize-none\" />\r\n                            </div>\r\n                            <div>\r\n                                <label className=\"block text-sm font-medium text-blue-700 mb-2\">Respuesta:</label>\r\n                                <input type=\"text\" value={respuesta} onChange={(e) => setRespuesta(e.target.value)} placeholder=\"Escribe la respuesta aqu√≠...\" className=\"w-full px-3 py-2 border border-blue-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\" />\r\n                            </div>\r\n                            <div className=\"text-center\">\r\n                                <button onClick={enviarPregunta} className=\"bg-gradient-to-r from-green-500 to-green-600 text-white px-8 py-3 rounded-lg font-bold hover:shadow-lg transform hover:scale-105 transition-all\">\r\n                                    ‚úÖ Enviar Pregunta\r\n                                </button>\r\n                            </div>\r\n                            <div className=\"mt-4 p-3 bg-blue-100 border border-blue-300 rounded\">\r\n                                <p className=\"text-sm text-blue-800\">\r\n                                    <strong>üí° Informaci√≥n:</strong> Las preguntas se agregan autom√°ticamente al archivo correspondiente\r\n                                    <code className=\"bg-blue-200 px-1 rounded\">{asignaturaSeleccionada}-{cursoSeleccionado}.json</code>\r\n                                </p>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    {/* Panel de administraci√≥n y antibullying solo para docentes */}\r\n                    {user.tipo && user.tipo.toLowerCase() === \"docente\" && (\r\n                        <div className=\"w-full max-w-6xl mx-auto mt-16 bg-white shadow-lg rounded-lg p-6 flex flex-col items-center\">\r\n                            <div className=\"w-full\">\r\n                                <h3 className=\"text-xl font-bold mb-4 text-center\">{t('panelAdministracion')}</h3>\r\n                                <form className=\"w-full flex flex-col items-center gap-4\" onSubmit={handlePalabraProhibidaSubmit}>\r\n                                    <div className=\"flex w-full max-w-xs items-center gap-2\">\r\n                                        <input type=\"text\" className=\"border rounded px-3 py-2 min-w-[280px] max-w-full\" placeholder={t('palabraProhibida')} value={palabraProhibida} onChange={e => setPalabraProhibida(e.target.value)} />\r\n                                        <button type=\"submit\" className=\"bg-red-500 text-white px-4 py-2 rounded font-semibold whitespace-nowrap\">Seleccionar</button>\r\n                                    </div>\r\n                                </form>\r\n                                <h4 className=\"text-lg font-semibold mt-6 text-center\">{t('sistemaAntibullying')}</h4>\r\n                                <div className=\"mt-4 bg-yellow-50 border-l-4 border-yellow-400 p-4 rounded-md text-gray-700 max-w-2xl mx-auto\">\r\n                                    <div className=\"flex flex-row items-start gap-8\">\r\n                                        <div className=\"flex-1\">\r\n                                            <p className=\"font-semibold mb-2\">{t('avisoAntibullying')}</p>\r\n                                            <ol className=\"list-decimal ml-6 space-y-1\">\r\n                                                <li>{t('historiasTerror')}</li>\r\n                                                <li>{t('perdidaLikes')}</li>\r\n                                                <li>{t('mensajesUsuario')}</li>\r\n                                                <li>{t('palabrasProhibidasChat')}</li>\r\n                                                <li>{t('actividadConsecutiva')}</li>\r\n                                            </ol>\r\n                                        </div>\r\n                                        <div className=\"flex flex-col items-center justify-center min-w-[180px]\">\r\n                                            <button type=\"button\" className={`relative w-32 h-32 rounded-full font-bold text-white text-lg mb-2 transition-all flex items-center justify-center ${bullyingActivo ? 'bg-red-600 opacity-100 shadow-lg animate-blink' : 'bg-green-600 opacity-40'}`} disabled={!bullyingActivo} onClick={handleApagarBullying}>\r\n                                                {bullyingActivo ? 'Aviso Antibullying' : t('sinPeligro')}\r\n                                                <span className=\"absolute inset-0 flex items-center justify-center pointer-events-none\">\r\n                                                    <svg width=\"100%\" height=\"100%\" viewBox=\"0 0 100 100\" className=\"opacity-70\">\r\n                                                        <line x1=\"10\" y1=\"10\" x2=\"90\" y2=\"90\" stroke=\"white\" strokeWidth=\"10\" />\r\n                                                        <line x1=\"90\" y1=\"10\" x2=\"10\" y2=\"90\" stroke=\"white\" strokeWidth=\"10\" />\r\n                                                    </svg>\r\n                                                </span>\r\n                                            </button>\r\n                                            {usuarioBullying && (\r\n                                                <div className=\"text-center text-red-700 font-semibold text-base\">{usuarioBullying}</div>\r\n                                            )}\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                </>\r\n            )}\r\n        </div>\r\n    );\r\n\r\n}\r\nexport default PerfilUsuario;\r\n","// Archivo para importar y transformar trofeos premium desde el JSON\r\nimport trofeosPremium from './trofeos-premium.json';\r\n\r\nexport const TROFEOS_PREMIUM = trofeosPremium.map(t => ({\r\n    src: t.imagen,\r\n    texto: t.titulo,\r\n    tipo: 'manual'\r\n}));\r\n"],"names":[],"mappings":"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"}