(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,r,o)=>{r.exports=e.r(76562)},51177,e=>{"use strict";e.s(["BUTTON_STYLES",0,{primary:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 transition-colors",primaryBold:"bg-blue-500 text-white px-4 py-2 rounded font-semibold hover:bg-blue-600 transition-colors",primaryLarge:"bg-blue-500 text-white px-6 py-3 rounded font-semibold hover:bg-blue-600 transition-colors",secondary:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600 transition-colors",secondaryLarge:"bg-gray-500 text-white px-6 py-3 rounded font-semibold hover:bg-gray-600 transition-colors",lightGray:"bg-gray-200 text-gray-700 px-4 py-2 rounded font-semibold border hover:bg-gray-300 transition-colors",success:"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600 transition-colors",successBold:"bg-green-500 text-white px-4 py-2 rounded font-semibold hover:bg-green-600 transition-colors",successLarge:"bg-green-500 text-white px-6 py-3 rounded font-semibold hover:bg-green-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",danger:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600 transition-colors",dangerBold:"bg-red-500 text-white px-4 py-2 rounded font-semibold hover:bg-red-600 transition-colors",warning:"bg-yellow-500 text-white px-4 py-2 rounded hover:bg-yellow-600 transition-colors",warningBold:"bg-yellow-500 text-white px-4 py-2 rounded font-semibold hover:bg-yellow-600 transition-colors",purple:"bg-purple-500 text-white px-4 py-2 rounded hover:bg-purple-600 transition-colors",orange:"bg-orange-500 text-white px-4 py-2 rounded hover:bg-orange-600 transition-colors",pink:"bg-pink-500 text-white px-4 py-2 rounded hover:bg-pink-600 transition-colors",pinkBold:"bg-pink-500 text-white px-4 py-2 rounded font-semibold hover:bg-pink-600 transition-colors"},"CARD_STYLES",0,{default:"bg-white rounded-lg shadow-md p-6",bordered:"bg-white rounded-lg shadow-md p-6 border",premium:"bg-white rounded-lg shadow-md p-6 border-4 border-yellow-400 shadow-2xl shadow-yellow-400/50"}])},53164,e=>{"use strict";var r=e.i(43476),o=e.i(71645),t=e.i(18566),a=e.i(51177);e.s(["default",0,()=>{let e=(0,t.useRouter)(),[s,i]=(0,o.useState)(null),[l,n]=(0,o.useState)(!0),[d,c]=(0,o.useState)(!1);if((0,o.useEffect)(()=>{(async()=>{try{let r=await fetch("/api/auth/me");if(!r.ok)return void e.push("/login");{let e=await r.json();i(e.user)}}catch(r){console.error("Error loading user:",r),e.push("/login");return}finally{n(!1)}})()},[e]),l)return(0,r.jsx)("div",{className:"min-h-screen bg-green-100 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-900 mx-auto mb-4"}),(0,r.jsx)("p",{children:"Cargando..."})]})});if(!s)return(0,r.jsx)("div",{className:"min-h-screen bg-green-100 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("p",{children:"No se pudo cargar la informaciÃ³n del usuario."}),(0,r.jsx)("button",{className:a.BUTTON_STYLES.primary,onClick:()=>e.push("/login"),children:"Ir al login"})]})});let u=s.premium||!1,g=["/avatars/simple1.png",...Array.from({length:29},(e,r)=>`/avatars/simple${r+2}.jpg`)],p=Array.from({length:50},(e,r)=>`/avatars/apremium${r+1}.jpg`),b=[...g,...p],m=g.length,h=async r=>{if(!d){if(p.includes(r)&&!u)return void alert("Solo usuarios premium pueden seleccionar avatares premium.");c(!0);try{let o=await fetch("/api/users/update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({nick:s.nick,avatar:r})});if(o.ok)e.push("/perfil");else{let e=await o.json();alert("Error al actualizar el avatar: "+(e.error||"Desconocido"))}}catch(e){console.error("Error saving avatar:",e),alert("Error al actualizar el avatar.")}finally{c(!1)}}};return(0,r.jsxs)("div",{className:"min-h-screen bg-green-100 flex flex-col items-center pt-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold mb-4",children:"Seleccionar Avatar"}),(0,r.jsxs)("div",{className:"mb-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg max-w-md",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 text-yellow-800",children:[(0,r.jsx)("span",{className:"text-lg",children:"ğŸ‘‘"}),(0,r.jsx)("span",{className:"font-semibold",children:"Avatares Premium"})]}),(0,r.jsxs)("p",{className:"text-sm text-yellow-700 mt-1",children:["Los avatares con corona dorada son exclusivos para usuarios Premium.",!u&&" Â¡Hazte Premium para desbloquearlos!"]})]}),d&&(0,r.jsxs)("div",{className:"mb-4 text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-900 mx-auto mb-2"}),(0,r.jsx)("p",{children:"Guardando avatar..."})]}),(0,r.jsx)("div",{className:"grid grid-cols-5 gap-4 mb-8",children:b.map((e,o)=>{let t=o>=m,a=!t||u;return(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("img",{src:e,alt:`Avatar ${o+1}${t?" (Premium)":""}`,className:`w-16 h-16 rounded-full border-2 transition-all duration-200 ${!a?"cursor-not-allowed opacity-60 grayscale":"cursor-pointer border-gray-300 hover:border-blue-400"} ${t?"ring-2 ring-yellow-400 ring-opacity-50":""}`,onClick:()=>a&&h(e),title:t&&!u?"Avatar Premium - Hazte Premium para usarlo":`Avatar ${o+1}`}),t&&(0,r.jsx)("div",{className:"absolute -top-1 -right-1 w-5 h-5 bg-gradient-to-r from-yellow-400 to-yellow-600 rounded-full flex items-center justify-center text-xs font-bold text-white shadow-lg",children:"ğŸ‘‘"})]},o)})}),(0,r.jsx)("div",{className:"flex gap-4",children:(0,r.jsx)("button",{className:a.BUTTON_STYLES.secondaryLarge,onClick:()=>e.push("/perfil"),disabled:d,children:"Volver"})})]})}])}]);