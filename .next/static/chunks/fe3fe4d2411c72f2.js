(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,9368,e=>{"use strict";var s=e.i(43476),r=e.i(71645);e.s(["UserLink",0,({nick:e,className:t})=>{let[a,i]=(0,r.useState)(!1);(0,r.useEffect)(()=>{(async()=>{if(e)try{let s=await fetch(`/api/user/premium-status?nick=${encodeURIComponent(e)}`),r=await s.json();i(r.isPremium||!1)}catch(e){i(!1)}})()},[e]);let n=(e||"").trim().toLowerCase();return e&&"anonimo"!==n&&"anÃ³nimo"!==n?(0,s.jsxs)("a",{href:`/perfil/${encodeURIComponent(e)}`,className:t||"text-blue-600 underline hover:text-blue-800",title:`Ver perfil de ${e}${a?" (Usuario Premium)":""}`,children:[e,a&&(0,s.jsx)("span",{className:"ml-1 inline-flex items-center",children:(0,s.jsx)("span",{className:"bg-gradient-to-r from-sky-100 to-blue-100 text-amber-900 text-xs px-2 py-1 rounded-full font-bold shadow-md border border-sky-300",title:"Usuario Premium",children:"ðŸ‘‘"})})]}):(0,s.jsx)("span",{className:t||"text-gray-500",children:e||"(sin nick)"})}])},56095,e=>{"use strict";var s=e.i(43476),r=e.i(9368);function t(e,t){return(0,s.jsx)(r.UserLink,{nick:e,className:t})}e.s(["renderNick",()=>t])},18566,(e,s,r)=>{s.exports=e.r(76562)},76179,e=>{"use strict";var s=e.i(43476),r=e.i(71645),t=e.i(56095),a=e.i(18566);function i(){let e=(0,a.useParams)(),i=e?.id,[n,o]=(0,r.useState)(null),[l,c]=(0,r.useState)(""),[d,m]=(0,r.useState)([]),[h,u]=(0,r.useState)(0),[x,b]=(0,r.useState)(!1);return((0,r.useEffect)(()=>{i&&fetch(`/api/historias/${i}`).then(e=>e.json()).then(e=>{o(e),u(e.likes||0),m(e.comentarios||[])}).catch(e=>{console.error("Error cargando historia:",e)})},[i]),n)?(0,s.jsx)("div",{className:"min-h-screen bg-green-100 p-8",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 max-w-2xl mx-auto",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-2",children:n.titulo}),(0,s.jsxs)("div",{className:"mb-2 text-gray-700",children:["Por: ",(0,t.renderNick)(n.autor)," | ",n.fecha]}),n.imagen&&(0,s.jsx)("img",{src:n.imagen,alt:"Imagen",className:"mb-4 max-h-64 rounded"}),(0,s.jsx)("div",{className:"border rounded p-4 mb-4 bg-gray-50",dangerouslySetInnerHTML:{__html:n.contenido}}),(0,s.jsx)("div",{className:"flex items-center gap-4 mb-4",children:(0,s.jsx)("button",{className:`font-bold py-2 px-4 rounded ${x?"bg-gray-400":"bg-pink-500 hover:bg-pink-600 text-white"}`,onClick:()=>{n&&fetch(`/api/historias/${n.id}/like`,{method:"POST"}).then(e=>e.json()).then(e=>{u(e.likes),b(!0)}).catch(e=>{console.error("Error dando like:",e)})},children:x?`ðŸ’” (${h})`:`â¤ï¸ Like (${0===h?"0":h})`})}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("h2",{className:"font-bold mb-2",children:"Comentarios"}),(0,s.jsx)("ul",{className:"mb-2",children:d.slice(-5).map((e,r)=>(0,s.jsxs)("li",{className:"border-b py-1 text-gray-800",children:[(0,s.jsx)("span",{children:e.texto}),(0,s.jsx)("span",{className:"ml-2 text-xs text-gray-500",children:e.fecha})]},r))}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("input",{type:"text",value:l,onChange:e=>c(e.target.value),placeholder:"Escribe un comentario...",className:"border rounded px-2 py-1 flex-1"}),(0,s.jsx)("button",{className:"bg-green-500 hover:bg-green-600 text-white font-bold px-4 rounded",onClick:()=>{l.trim()&&(alert("Comentarios no disponibles por ahora."),c(""))},children:"Comentar"})]})]})]})}):(0,s.jsx)("div",{className:"min-h-screen bg-green-100 p-8",children:"Cargando historia..."})}e.s(["default",()=>i])}]);