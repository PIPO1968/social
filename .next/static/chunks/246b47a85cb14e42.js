(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,9368,e=>{"use strict";var s=e.i(43476),t=e.i(71645);e.s(["UserLink",0,({nick:e,className:l})=>{let[n,i]=(0,t.useState)(!1);(0,t.useEffect)(()=>{(async()=>{if(e)try{let s=await fetch(`/api/user/premium-status?nick=${encodeURIComponent(e)}`),t=await s.json();i(t.isPremium||!1)}catch(e){i(!1)}})()},[e]);let r=(e||"").trim().toLowerCase();return e&&"anonimo"!==r&&"anÃ³nimo"!==r?(0,s.jsxs)("a",{href:`/perfil/${encodeURIComponent(e)}`,className:l||"text-blue-600 underline hover:text-blue-800",title:`Ver perfil de ${e}${n?" (Usuario Premium)":""}`,children:[e,n&&(0,s.jsx)("span",{className:"ml-1 inline-flex items-center",children:(0,s.jsx)("span",{className:"bg-gradient-to-r from-sky-100 to-blue-100 text-amber-900 text-xs px-2 py-1 rounded-full font-bold shadow-md border border-sky-300",title:"Usuario Premium",children:"ðŸ‘‘"})})]}):(0,s.jsx)("span",{className:l||"text-gray-500",children:e||"(sin nick)"})}])},56095,e=>{"use strict";var s=e.i(43476),t=e.i(9368);function l(e,l){return(0,s.jsx)(t.UserLink,{nick:e,className:l})}e.s(["renderNick",()=>l])},18566,(e,s,t)=>{s.exports=e.r(76562)},38614,e=>{"use strict";var s=e.i(43476),t=e.i(71645),l=e.i(18566),n=e.i(56095);let i=({perfilNick:e})=>{let[l,n]=(0,t.useState)(null),[i,r]=(0,t.useState)(!1),[a,c]=(0,t.useState)(!1);(0,t.useEffect)(()=>{fetch("/api/auth/me").then(e=>e.json()).then(e=>{e.user&&n(e.user)}).catch(()=>{})},[]),(0,t.useEffect)(()=>{l&&e&&e!==l.nick&&(fetch(`/api/friends?action=friends&nick=${l.nick}`).then(e=>e.json()).then(s=>{r(s.friends.some(s=>s.nick===e))}).catch(()=>{}),fetch(`/api/friends?action=requests&nick=${e}`).then(e=>e.json()).then(e=>{c(!!e.requests.find(e=>e.solicitante.nick===l.nick))}).catch(()=>{}))},[l,e]);let o=async()=>{if(l&&e&&e!==l.nick)try{let s=await fetch("/api/friends",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"add",userNick:l.nick,friendNick:e})});s.ok?c(!0):s.json().then(e=>alert(e.error||"Error al enviar solicitud"))}catch(e){alert("Error al enviar solicitud")}},d=async()=>{if(l&&e)try{(await fetch("/api/friends",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"remove",userNick:l.nick,friendNick:e})})).ok?(r(!1),c(!1),window.location.reload()):alert("Error al finalizar amistad")}catch(e){}};return l&&e!==l.nick?i?(0,s.jsx)("button",{className:"bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-6 rounded-xl text-base shadow mb-2 animate-pulse",onClick:d,children:"Finalizar amistad"}):a?(0,s.jsx)("button",{className:"bg-gray-500 text-white font-bold py-2 px-6 rounded-xl text-base shadow mb-2",disabled:!0,children:"Solicitud enviada"}):(0,s.jsx)("button",{className:"bg-blue-600 hover:bg-blue-800 text-white font-bold py-2 px-6 rounded-xl text-base shadow mb-2 animate-bounce",onClick:o,children:"Solicitar Amistad"}):null};var r=e.i(9368);function a(){let e,a=(0,l.useParams)(),c=a?.nick,[o,d]=(0,t.useState)(null),[x,m]=(0,t.useState)(null),[h,f]=(0,t.useState)(!1),[u,p]=(0,t.useState)(!1),[j,b]=(0,t.useState)(!0),[g,N]=(0,t.useState)({trofeosDesbloqueados:[],trofeosBloqueados:[]}),w=o?.premium||!1;return((0,t.useEffect)(()=>{let e=async()=>{try{b(!0);let e=await fetch("/api/auth/me");if(e.ok){let s=await e.json();m(s.user)}let s=await fetch(`/api/user/profile?nick=${encodeURIComponent(c)}`);if(s.ok){let e=await s.json();d(e.user);let t=await fetch(`/api/trofeos/user-trofeos?nick=${encodeURIComponent(c)}`);if(t.ok){let e=await t.json();e&&!e.error?N(e):N({trofeosDesbloqueados:[],trofeosBloqueados:[]})}}else d(null)}catch(e){console.error("Error loading profile:",e),d(null)}finally{b(!1)}};c&&e()},[c]),j)?(0,s.jsxs)("div",{className:"min-h-screen bg-red-100 p-8 flex flex-col items-center justify-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-900 mx-auto mb-4"}),(0,s.jsx)("p",{children:"Cargando perfil..."})]}):o?(0,s.jsxs)("div",{className:"min-h-screen bg-green-100 p-8",children:[(0,s.jsxs)("h1",{className:"text-2xl font-bold mb-4 text-center",children:["Perfil de: ",(0,s.jsx)(r.UserLink,{nick:o.nick})]}),w&&(0,s.jsx)("div",{className:"flex justify-center mt-2 mb-4",children:(0,s.jsxs)("div",{className:"bg-gradient-to-r from-yellow-400 via-yellow-500 to-yellow-600 text-white px-6 py-2 rounded-full font-bold text-lg shadow-lg shadow-yellow-500 animate-pulse flex items-center gap-2",children:[(0,s.jsx)("span",{className:"animate-bounce",children:"ðŸ‘‘"}),(0,s.jsx)("span",{children:"PREMIUM ACTIVO"}),(0,s.jsx)("span",{className:"animate-bounce",children:"âœ¨"})]})}),(0,s.jsxs)("div",{className:"max-w-lg mx-auto bg-white rounded-lg shadow-md p-6 flex flex-col items-center relative transition-all duration-500"+(w?" border-4 border-yellow-400 shadow-2xl shadow-yellow-400 animate-pulse overflow-hidden":""),children:[(0,s.jsx)(i,{perfilNick:o.nick}),(0,s.jsx)("div",{className:"flex justify-between items-center mb-4 relative",children:(0,s.jsxs)("h3",{className:"text-xl font-bold text-center w-full transition-all duration-300"+(w?" text-yellow-600":""),children:["InformaciÃ³n Personal",w&&(0,s.jsx)("span",{className:"ml-2 animate-spin",children:"ðŸ‘‘"})]})}),(0,s.jsx)("div",{className:"flex flex-col items-center mb-4 relative",children:(0,s.jsxs)("div",{className:"relative ",children:[(0,s.jsx)("img",{src:o.avatar||"/avatars/simple1.png",alt:"Avatar",className:`w-20 h-20 rounded-full mb-2 transition-all duration-300 ${w?"ring-4 ring-yellow-400 ring-opacity-70 shadow-lg shadow-yellow-400/50 hover:scale-110":""}`}),w&&(0,s.jsx)("div",{className:"absolute -top-1 -right-1 w-6 h-6 bg-gradient-to-r from-yellow-400 to-yellow-600 rounded-full flex items-center justify-center text-xs animate-bounce",children:"âœ¨"})]})}),(0,s.jsxs)("div",{className:"w-full",children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Nick:"})," ",(0,n.renderNick)(o.nick)]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Email:"})," ",o.email]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Centro Educativo:"})," ",o.centro]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Curso:"})," ",o.curso]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Tipo de Usuario:"})," ",o.tipo]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Fecha de InscripciÃ³n:"})," ",o.fechaInscripcion?new Date(o.fechaInscripcion).toLocaleDateString("es-ES"):""]}),(0,s.jsx)("div",{className:"mb-2 flex items-center",children:(0,s.jsxs)("div",{className:"flex flex-col mt-2 gap-y-4",children:[(0,s.jsxs)("div",{className:"flex flex-row gap-x-12",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("span",{className:"mr-2 text-lg",children:"ðŸ‘"}),(0,s.jsx)("strong",{children:"Likes:"}),(0,s.jsx)("span",{className:"ml-2 inline-flex items-center justify-center w-8 h-8 rounded-full bg-green-300 text-green-900 font-bold text-sm",children:o.likes||0})]}),(0,s.jsxs)("div",{className:"flex items-center ml-8",children:[(0,s.jsx)("span",{className:"mr-2 text-lg",children:"ðŸ‘¥"}),(0,s.jsx)("strong",{children:"Total de Amigos:"}),(0,s.jsx)("span",{className:"ml-2 inline-flex items-center justify-center w-8 h-8 rounded-full bg-blue-300 text-blue-900 font-bold text-sm",children:o.amigos||0})]})]}),(0,s.jsxs)("div",{className:"flex flex-row gap-x-12",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("span",{className:"mr-2 text-lg",children:"ðŸ“–"}),(0,s.jsx)("strong",{children:"Total de Historias:"}),(0,s.jsx)("span",{className:"ml-2 inline-flex items-center justify-center w-8 h-8 rounded-full bg-purple-200 text-purple-900 font-bold text-sm",children:o.historias?o.historias.length:0})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("span",{className:"mr-2 text-lg",children:"ðŸ’¬"}),(0,s.jsx)("strong",{children:"Total de Comentarios:"}),(0,s.jsx)("span",{className:"ml-2 inline-flex items-center justify-center w-8 h-8 rounded-full bg-yellow-200 text-yellow-900 font-bold text-sm",children:o.comentariosRecibidos||0})]})]}),(0,s.jsxs)("div",{className:"flex flex-row gap-x-12",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("span",{className:"mr-2 text-lg",children:"ðŸ†"}),(0,s.jsx)("strong",{children:"Trofeos Desbloqueados:"}),(e=(Array.isArray(g.trofeosDesbloqueados)?g.trofeosDesbloqueados:[]).length,(0,s.jsx)("span",{className:"ml-2 inline-flex items-center justify-center w-8 h-8 rounded-full bg-pink-200 text-pink-900 font-bold text-sm",children:e}))]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("span",{className:"mr-2 text-lg",children:"âœ…"}),(0,s.jsx)("strong",{children:"Respuestas acertadas:"}),(0,s.jsx)("span",{className:"ml-2 inline-flex items-center justify-center w-8 h-8 rounded-full bg-indigo-200 text-indigo-900 font-bold text-sm",children:o.respuestasAcertadas||0})]})]}),(0,s.jsxs)("div",{className:"flex flex-row gap-x-12",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("span",{className:"mr-2 text-lg",children:"ðŸ¥‡"}),(0,s.jsx)("strong",{children:"Competiciones:"}),(0,s.jsx)("span",{className:"ml-2 inline-flex items-center justify-center w-8 h-8 rounded-full bg-teal-200 text-teal-900 font-bold text-sm",children:o.competicionesSuperadas||0})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("span",{className:"mr-2 text-lg",children:"ðŸŽ‰"}),(0,s.jsx)("strong",{children:"Concursos:"}),(0,s.jsx)("span",{className:"ml-2 inline-flex items-center justify-center w-8 h-8 rounded-full bg-red-200 text-red-900 font-bold text-sm",children:o.concursosGanados||0})]})]})]})})]})]})]}):(0,s.jsxs)("div",{className:"min-h-screen bg-red-100 p-8 flex flex-col items-center justify-center",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-4 text-center text-red-700",children:"Usuario no encontrado"}),(0,s.jsx)("p",{className:"text-center",children:"El perfil solicitado no existe o es anÃ³nimo."})]})}e.s(["default",()=>a],38614)}]);