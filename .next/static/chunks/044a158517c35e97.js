(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,9368,e=>{"use strict";var s=e.i(43476),t=e.i(71645);e.s(["UserLink",0,({nick:e,className:a})=>{let[r,l]=(0,t.useState)(!1);(0,t.useEffect)(()=>{(async()=>{if(e)try{let s=await fetch(`/api/user/premium-status?nick=${encodeURIComponent(e)}`),t=await s.json();l(t.isPremium||!1)}catch(e){l(!1)}})()},[e]);let n=(e||"").trim().toLowerCase();return e&&"anonimo"!==n&&"anÃ³nimo"!==n?(0,s.jsxs)("a",{href:`/perfil/${encodeURIComponent(e)}`,className:a||"text-blue-600 underline hover:text-blue-800",title:`Ver perfil de ${e}${r?" (Usuario Premium)":""}`,children:[e,r&&(0,s.jsx)("span",{className:"ml-1 inline-flex items-center",children:(0,s.jsx)("span",{className:"bg-gradient-to-r from-sky-100 to-blue-100 text-amber-900 text-xs px-2 py-1 rounded-full font-bold shadow-md border border-sky-300",title:"Usuario Premium",children:"ðŸ‘‘"})})]}):(0,s.jsx)("span",{className:a||"text-gray-500",children:e||"(sin nick)"})}])},56095,e=>{"use strict";var s=e.i(43476),t=e.i(9368);function a(e,a){return(0,s.jsx)(t.UserLink,{nick:e,className:a})}e.s(["renderNick",()=>a])},56553,e=>{"use strict";var s=e.i(43476),t=e.i(71645),a=e.i(56095);async function r(e){try{let s=await fetch(`/api/championship/results?season=${e}&type=docentes`);if(!s.ok)return[];return(await s.json()).map(e=>({escudo:e.escudo||"ðŸ‘¨â€ðŸ«",nombre:e.nick,ganados:e.ganados??0,perdidos:e.perdidos??0,preguntasAcertadas:e.preguntasAcertadas??0,preguntasFalladas:e.preguntasFalladas??0,likes:e.likes??0})).sort((e,s)=>s.likes-e.likes).slice(0,25)}catch(e){return console.error("Error cargando docentes:",e),[]}}function l(){let e,l,n,c,d,i,[o,x]=t.default.useState(!0),[h,m]=t.default.useState([]),[p,u]=t.default.useState(""),[j,b]=t.default.useState([]),[g,N]=t.default.useState([]),[f,y]=t.default.useState([]),[w,k]=t.default.useState(null);async function v(e){try{let s=await fetch(`/api/championship/results?season=${e}&type=centros`);if(!s.ok)return[];return(await s.json()).map(e=>({escudo:e.escudo||"ðŸ«",nombre:e.centro,ganados:e.ganados??0,perdidos:e.perdidos??0,preguntasAcertadas:e.preguntasAcertadas??0,preguntasFalladas:e.preguntasFalladas??0,likes:e.likes??0})).sort((e,s)=>s.likes-e.likes).slice(0,25)}catch(e){return console.error("Error cargando centros:",e),[]}}async function P(e){try{let s=await fetch(`/api/championship/results?season=${e}&type=individual`);if(!s.ok)return[];return(await s.json()).map(e=>({escudo:e.escudo||"ðŸ‘¤",nombre:e.nick,ganados:e.ganados??0,perdidos:e.perdidos??0,preguntasAcertadas:e.preguntasAcertadas??0,preguntasFalladas:e.preguntasFalladas??0,likes:e.likes??0})).sort((e,s)=>s.likes-e.likes).slice(0,25)}catch(e){return console.error("Error cargando alumnos:",e),[]}}t.default.useEffect(()=>{fetch("/api/auth/me").then(e=>e.ok?e.json():null).then(e=>{k(e)}).catch(e=>{console.error("Error cargando usuario:",e)});let e=()=>{let e=new Date,s=e.getFullYear(),t=e.getMonth()+1,a=e.getDate(),r=s;return(t<9||9===t&&a<30)&&(r=s-1),`t${r}`};fetch("/api/championship/seasons").then(e=>e.ok?e.json():[]).then(s=>{let t=e();s.includes(t)||s.push(t),s.sort((e,s)=>{let t=parseInt(e.replace("t",""));return parseInt(s.replace("t",""))-t}),m(s),u(t)}).catch(s=>{console.error("Error cargando temporadas:",s);let t=e();m([t]),u(t)})},[]),t.default.useEffect(()=>{p&&(async()=>{let e=await v(p),s=await P(p),t=await r(p);b(e),N(s),y(t),x(!1)})()},[p]);let A=(l=(e=new Date).getFullYear(),n=e.getMonth()+1,c=e.getDate(),d=new Date(l,8,30),(n>9||9===n&&c>=30)&&(d=new Date(l+1,8,30)),i=Math.ceil((d.getTime()-e.getTime())/864e5),{temporadaActual:p.replace("t",""),finTemporada:d.toLocaleDateString("es-ES"),diasRestantes:i>0?i:0});return o||!p?(0,s.jsx)("div",{className:"min-h-screen bg-green-100 p-8 text-center text-lg",children:"Cargando competiciones..."}):(0,s.jsxs)("div",{className:"min-h-screen bg-green-100 p-8",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-4 text-center",children:"Competiciones StoryUp"}),(0,s.jsx)("div",{className:"max-w-6xl mx-auto mb-6",children:(0,s.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-green-50 border border-blue-300 rounded-lg p-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,s.jsx)("h3",{className:"text-lg font-bold text-blue-700",children:"ðŸ“… InformaciÃ³n de Temporada"}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("label",{className:"font-semibold mr-2 text-blue-700",children:"Ver temporada:"}),(0,s.jsx)("select",{className:"border rounded px-3 py-2 bg-white shadow",value:p,onChange:e=>u(e.target.value),children:h.map((e,t)=>(0,s.jsx)("option",{value:e,children:`Temporada ${e.replace("t","")}${e===h[0]?" (Actual)":""}`},t))})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[(0,s.jsxs)("div",{className:"bg-white rounded p-3 border border-blue-200",children:[(0,s.jsx)("div",{className:"font-semibold text-blue-600",children:"Temporada Actual:"}),(0,s.jsx)("div",{className:"text-lg font-bold",children:A.temporadaActual})]}),(0,s.jsxs)("div",{className:"bg-white rounded p-3 border border-green-200",children:[(0,s.jsx)("div",{className:"font-semibold text-green-600",children:"Fin de Temporada:"}),(0,s.jsx)("div",{className:"text-lg font-bold",children:A.finTemporada})]}),(0,s.jsxs)("div",{className:"bg-white rounded p-3 border border-orange-200",children:[(0,s.jsx)("div",{className:"font-semibold text-orange-600",children:"DÃ­as Restantes:"}),(0,s.jsxs)("div",{className:"text-lg font-bold",children:[A.diasRestantes," dÃ­as"]})]})]}),(0,s.jsxs)("div",{className:"mt-3 text-xs text-gray-600",children:["ðŸ’¡ ",(0,s.jsx)("strong",{children:"Sistema de Temporadas:"})," Cada temporada termina el 30 de septiembre. Los datos se mantienen guardados y puedes consultar temporadas anteriores usando el selector de arriba.",h.length>1&&` Hay ${h.length} temporada${h.length>1?"s":""} disponible${h.length>1?"s":""}.`]})]})}),(0,s.jsx)("div",{className:"max-w-5xl mx-auto mb-6",children:(0,s.jsxs)("div",{className:"bg-blue-50 border border-blue-300 rounded p-3 text-sm text-gray-700",children:[(0,s.jsx)("b",{children:"Importante:"})," Solo se contabilizan en estas tablas los datos obtenidos en ",(0,s.jsx)("span",{className:"font-bold text-blue-700",children:"modo competicion"}),".",(0,s.jsx)("br",{}),"Las partidas en modo clÃ¡sico no afectan los rankings ni las estadÃ­sticas de competiciÃ³n."]})}),(0,s.jsxs)("div",{className:"flex flex-col gap-8 max-w-5xl mx-auto",children:[(0,s.jsxs)("div",{className:"flex flex-row gap-8 w-full max-w-7xl mx-auto",children:[(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-3 w-1/2 text-[11px]",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-center mb-4",children:"CompeticiÃ³n Centros"}),(0,s.jsxs)("table",{className:"w-full text-sm",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"bg-green-100",children:[(0,s.jsx)("th",{className:"py-2 text-center",children:"PG"}),(0,s.jsx)("th",{className:"py-2 text-center",children:"EC"}),(0,s.jsx)("th",{className:"py-2 text-center",children:"CE"}),(0,s.jsx)("th",{className:"py-2 text-center",children:"G"}),(0,s.jsx)("th",{className:"py-2 text-center",children:"P"}),(0,s.jsx)("th",{className:"py-2 text-center",children:"PA"}),(0,s.jsx)("th",{className:"py-2 text-center",children:"PF"}),(0,s.jsx)("th",{className:"py-2 text-center",children:"â¤ï¸"})]})}),(0,s.jsx)("tbody",{children:j.map((e,t)=>(0,s.jsxs)("tr",{className:"border-b",children:[(0,s.jsx)("td",{className:"py-0 text-center font-bold",children:t+1}),(0,s.jsx)("td",{className:"py-0 text-center",children:(0,s.jsx)("span",{className:"inline-block w-8 h-8 text-2xl align-middle",children:e.escudo})}),(0,s.jsx)("td",{className:"py-0 font-semibold",children:(0,s.jsx)("span",{style:{color:"#007bff"},children:(0,a.renderNick)(e.nombre)})}),(0,s.jsx)("td",{className:"py-0 text-center",children:e.ganados}),(0,s.jsx)("td",{className:"py-0 text-center",children:e.perdidos}),(0,s.jsx)("td",{className:"py-0 text-center",children:e.preguntasAcertadas}),(0,s.jsx)("td",{className:"py-0 text-center",children:e.preguntasFalladas}),(0,s.jsx)("td",{className:"py-0 text-center",children:e.likes})]},t))})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-3 w-1/2 text-[11px]",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-center mb-4",children:"CompeticiÃ³n Individual"}),(0,s.jsxs)("table",{className:"w-full text-sm",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"bg-green-100",children:[(0,s.jsx)("th",{className:"py-2 text-center",children:"PG"}),(0,s.jsx)("th",{className:"py-2 text-center",children:"EC"}),(0,s.jsx)("th",{className:"py-2 text-center",children:"A"}),(0,s.jsx)("th",{className:"py-2 text-center",children:"G"}),(0,s.jsx)("th",{className:"py-2 text-center",children:"P"}),(0,s.jsx)("th",{className:"py-2 text-center",children:"PA"}),(0,s.jsx)("th",{className:"py-2 text-center",children:"PF"}),(0,s.jsx)("th",{className:"py-2 text-center",children:"â¤ï¸"})]})}),(0,s.jsx)("tbody",{children:g.map((e,t)=>(0,s.jsxs)("tr",{className:"border-b",children:[(0,s.jsx)("td",{className:"py-0 text-center font-bold",children:t+1}),(0,s.jsx)("td",{className:"py-0 text-center",children:(0,s.jsx)("span",{className:"inline-block w-8 h-8 text-2xl align-middle",children:e.escudo})}),(0,s.jsx)("td",{className:"py-0 font-semibold",children:(0,s.jsx)("span",{style:{color:"#007bff"},children:(0,a.renderNick)(e.nombre)})}),(0,s.jsx)("td",{className:"py-0 text-center",children:e.ganados}),(0,s.jsx)("td",{className:"py-0 text-center",children:e.perdidos}),(0,s.jsx)("td",{className:"py-0 text-center",children:e.preguntasAcertadas}),(0,s.jsx)("td",{className:"py-0 text-center",children:e.preguntasFalladas}),(0,s.jsx)("td",{className:"py-0 text-center",children:e.likes})]},t))})]})]})]}),(0,s.jsxs)("div",{className:"bg-yellow-50 rounded-lg shadow-md p-3 w-full max-w-7xl mx-auto text-[11px]",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-center mb-4",children:"CompeticiÃ³n Docentes"}),(0,s.jsxs)("table",{className:"w-full text-sm",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"bg-yellow-100",children:[(0,s.jsx)("th",{className:"py-2 text-center",children:"PG"}),(0,s.jsx)("th",{className:"py-2 text-center",children:"EC"}),(0,s.jsx)("th",{className:"py-2 text-center",children:"Docente"}),(0,s.jsx)("th",{className:"py-2 text-center",children:"G"}),(0,s.jsx)("th",{className:"py-2 text-center",children:"P"}),(0,s.jsx)("th",{className:"py-2 text-center",children:"PA"}),(0,s.jsx)("th",{className:"py-2 text-center",children:"PF"}),(0,s.jsx)("th",{className:"py-2 text-center",children:"â¤ï¸"})]})}),(0,s.jsx)("tbody",{children:f.map((e,t)=>(0,s.jsxs)("tr",{className:"border-b",children:[(0,s.jsx)("td",{className:"py-1 text-center font-bold",children:t+1}),(0,s.jsx)("td",{className:"py-1 text-center",children:(0,s.jsx)("span",{className:"inline-block w-8 h-8 text-2xl align-middle",children:e.escudo})}),(0,s.jsx)("td",{className:"py-1 font-semibold",children:(0,s.jsx)("span",{style:{color:"#007bff"},children:(0,a.renderNick)(e.nombre)})}),(0,s.jsx)("td",{className:"py-1 text-center",children:e.ganados}),(0,s.jsx)("td",{className:"py-1 text-center",children:e.perdidos}),(0,s.jsx)("td",{className:"py-1 text-center",children:e.preguntasAcertadas}),(0,s.jsx)("td",{className:"py-1 text-center",children:e.preguntasFalladas}),(0,s.jsx)("td",{className:"py-1 text-center",children:e.likes})]},t))})]})]}),(0,s.jsxs)("div",{className:"bg-green-50 rounded-lg shadow p-4 w-full mt-4",children:[(0,s.jsx)("h3",{className:"font-bold mb-2",children:"Significado de las siglas:"}),(0,s.jsxs)("ul",{className:"grid grid-cols-2 gap-2 text-sm",children:[(0,s.jsxs)("li",{children:[(0,s.jsx)("b",{children:"PG"}),": PosiciÃ³n Global"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("b",{children:"EC"}),": Escudo Centro / Avatar"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("b",{children:"CE"}),": Nombre del Centro"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("b",{children:"A"}),": Alumno"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("b",{children:"G"}),": Ganados"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("b",{children:"P"}),": Perdidos"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("b",{children:"PA"}),": Preguntas Acertadas"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("b",{children:"PF"}),": Preguntas Falladas"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("b",{children:"â¤ï¸"}),": Likes"]})]})]})]})]})}e.s(["default",()=>l])}]);