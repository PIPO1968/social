(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,9368,e=>{"use strict";var s=e.i(43476),a=e.i(71645);e.s(["UserLink",0,({nick:e,className:t})=>{let[l,r]=(0,a.useState)(!1);(0,a.useEffect)(()=>{(async()=>{if(e)try{let s=await fetch(`/api/user/premium-status?nick=${encodeURIComponent(e)}`),a=await s.json();r(a.isPremium||!1)}catch(e){r(!1)}})()},[e]);let n=(e||"").trim().toLowerCase();return e&&"anonimo"!==n&&"anÃ³nimo"!==n?(0,s.jsxs)("a",{href:`/perfil/${encodeURIComponent(e)}`,className:t||"text-blue-600 underline hover:text-blue-800",title:`Ver perfil de ${e}${l?" (Usuario Premium)":""}`,children:[e,l&&(0,s.jsx)("span",{className:"ml-1 inline-flex items-center",children:(0,s.jsx)("span",{className:"bg-gradient-to-r from-sky-100 to-blue-100 text-amber-900 text-xs px-2 py-1 rounded-full font-bold shadow-md border border-sky-300",title:"Usuario Premium",children:"ðŸ‘‘"})})]}):(0,s.jsx)("span",{className:t||"text-gray-500",children:e||"(sin nick)"})}])},96987,e=>{"use strict";var s=e.i(43476),a=e.i(71645),t=e.i(88379),l=e.i(9368);function r(){let e,r,n,i,c,o,d,x,m,h,u,j,p,b,f,g,N,k,v,y,{t:w}=(0,t.useTranslation)(),[T,C]=a.default.useState(!1),[A,M]=a.default.useState(null),[E,S]=a.default.useState([]),[U,L]=a.default.useState([]),[P,D]=a.default.useState([]),[$,z]=a.default.useState(!0);return(a.default.useEffect(()=>{(async()=>{try{z(!0);let e=await fetch("/api/auth/me");if(e.ok){let s=await e.json();s.user&&(M(s.user),C(s.user.premium||!1))}let s=await fetch("/api/users");if(s.ok){let e=await s.json();S(e)}try{let e=await fetch("/api/historias");if(e.ok){let s=await e.json();L(s)}}catch(e){console.warn("API de historias no disponible:",e)}try{let e=await fetch("/api/concursos");if(e.ok){let s=await e.json();D(s)}}catch(e){console.warn("API de concursos no disponible:",e)}}catch(e){console.error("Error loading data:",e)}finally{z(!1)}})()},[]),$)?(0,s.jsxs)("div",{className:"min-h-screen bg-green-100 flex items-center justify-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-900 mx-auto mb-4"}),(0,s.jsx)("p",{children:"Cargando estadÃ­sticas..."})]}):(0,s.jsxs)("div",{className:"min-h-screen bg-green-100 p-8",children:[(0,s.jsx)("div",{className:"text-center mb-4",children:(0,s.jsx)("h1",{className:"text-2xl font-bold",children:T?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"text-yellow-600",children:w("estadisticasPremium")}),(0,s.jsxs)("div",{className:"text-sm text-gray-600 mt-1",children:["Â¡Hola ",A?.nick,"! Disfrutas de estadÃ­sticas avanzadas"]})]}):(0,s.jsxs)(s.Fragment,{children:["EstadÃ­sticas",(0,s.jsx)("div",{className:"text-sm text-blue-600 mt-1",children:(0,s.jsxs)("button",{onClick:()=>window.location.href="/premium-nuevo",className:"bg-gradient-to-r from-yellow-400 to-orange-500 text-white px-3 py-1 rounded-full text-xs hover:shadow-lg transform hover:scale-105 transition-all",children:["âœ¨ ",w("haztePremiumParaVer")," âœ¨"]})})]})})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 max-w-5xl mx-auto",children:[(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,s.jsx)("h2",{className:"text-lg font-bold mb-4 text-center",children:w("estadisticasGlobales")}),(0,s.jsxs)("ul",{className:"space-y-2",children:[(0,s.jsxs)("li",{children:[(0,s.jsx)("span",{className:"mr-2 text-xl",children:"ðŸ†"}),(0,s.jsxs)("b",{children:[w("totalCompeticionesSuperadas"),":"]})," ",(e=0,E.forEach(s=>{e+=s.competicionesSuperadas||0}),e)]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("span",{className:"mr-2 text-xl",children:"ðŸ‘¥"}),(0,s.jsxs)("b",{children:[w("totalUsuarios"),":"]})," ",E.length]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("span",{className:"mr-2 text-xl",children:"ðŸ“–"}),(0,s.jsxs)("b",{children:[w("totalHistoriasCreadas"),":"]})," ",U.length]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("span",{className:"mr-2 text-xl",children:"ðŸ†"}),(0,s.jsxs)("b",{children:[w("totalConcursosCreados"),":"]})," ",P.length]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("span",{className:"mr-2 text-xl",children:"ðŸ’¬"}),(0,s.jsx)("b",{children:"Total de comentarios realizados:"})," ",(r=0,U.forEach(e=>{r+=e.comentarios?e.comentarios.length:0}),r)]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("span",{className:"mr-2 text-xl",children:"ðŸ«"}),(0,s.jsx)("b",{children:"Total de centros escolares registrados:"})," ",new Set(E.map(e=>e.centro).filter(Boolean)).size]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("span",{className:"mr-2 text-xl",children:"ðŸ‘¨â€ðŸ«"}),(0,s.jsx)("b",{children:"Total de docentes registrados:"})," ",E.filter(e=>"docente"===(e.tipo||"").toLowerCase()).length||0]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("span",{className:"mr-2 text-xl",children:"ðŸ¤"}),(0,s.jsx)("b",{children:"Total de amigos creados:"})," ",(n=0,E.forEach(e=>{let s=e.amigosComoUser?.length||0;n+=s}),n>0?n:0)]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("span",{className:"mr-2 text-xl",children:"ðŸ…"}),(0,s.jsx)("b",{children:"Total de historias ganadoras:"})," ",P.filter(e=>e.historiaGanadora).length||0]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("span",{className:"mr-2 text-xl",children:"ðŸ‘¨â€ðŸ‘©â€ðŸ‘§â€ðŸ‘¦"}),(0,s.jsx)("b",{children:"Total de participantes en concursos:"})," ",(i=0,E.forEach(e=>{e.historias&&Array.isArray(e.historias)&&e.historias.length>0&&i++}),i)]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("span",{className:"mr-2 text-xl",children:"â¤ï¸"}),(0,s.jsx)("b",{children:"Total de likes:"})," ",(c=0,E.forEach(e=>{c+=e.likes||0}),c)]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("span",{className:"mr-2 text-xl",children:"â“"}),(0,s.jsx)("b",{children:"Total de preguntas respondidas:"})," ",(o=0,d=0,E.forEach(e=>{if(o+=e.respuestasAcertadas||0,e.stats_individual){let s=JSON.parse(e.stats_individual);d+=s.preguntasFalladas||0}}),o+d)]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("span",{className:"mr-2 text-xl",children:"â“"}),(0,s.jsxs)("b",{children:[w("totalPreguntasAcertadas"),":"]})," ",(x=0,E.forEach(e=>{x+=e.respuestasAcertadas||0}),x)]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("span",{className:"mr-2 text-xl",children:"â“"}),(0,s.jsx)("b",{children:"Total de preguntas falladas:"})," ",(m=0,E.forEach(e=>{if(e.stats_individual){let s=JSON.parse(e.stats_individual);m+=s.preguntasFalladas||0}}),m)]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("span",{className:"mr-2 text-xl",children:"ðŸ†"}),(0,s.jsx)("b",{children:"Total de concursos ganados:"})," ",(h=0,E.forEach(e=>{h+=e.concursosGanados||0}),h)]})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,s.jsx)("h2",{className:"text-lg font-bold mb-4 text-center",children:"Rankings"}),(0,s.jsxs)("ul",{className:"space-y-2",children:[(0,s.jsxs)("li",{children:[(0,s.jsx)("span",{className:"mr-2 text-xl",children:"â¤ï¸"}),(0,s.jsxs)("b",{children:[w("usuariosMasLikes"),":"]})," ",0===(u=E.map(e=>({nick:e.nick,nombre:e.nombre,totalLikes:e.likes||0})).filter(e=>e.nick&&e.totalLikes>0).sort((e,s)=>s.totalLikes-e.totalLikes).slice(0,5)).length?(0,s.jsx)("span",{className:"block",children:"No hay usuarios con likes."}):u.map((e,a)=>(0,s.jsxs)("span",{className:"block",children:[a+1,". ",(0,s.jsx)("b",{children:(0,s.jsx)(l.UserLink,{nick:e.nick})})," (",e.totalLikes," likes)"]},e.nick))]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("span",{className:"mr-2 text-xl",children:"ðŸ’¬"}),(0,s.jsxs)("b",{children:[w("usuariosMasComentarios"),":"]})," ",(j={},U.forEach(e=>{e.autor&&(j[e.autor]=(j[e.autor]||0)+(e.comentarios?e.comentarios.length:0))}),0===(p=Object.entries(j).map(([e,s])=>({nick:e,totalComentarios:s})).filter(e=>e.nick&&e.totalComentarios>0).sort((e,s)=>s.totalComentarios-e.totalComentarios).slice(0,5)).length?(0,s.jsx)("span",{className:"block",children:"No hay usuarios con comentarios aÃºn."}):p.map((e,a)=>(0,s.jsxs)("span",{className:"block",children:[a+1,". ",(0,s.jsx)("b",{children:(0,s.jsx)(l.UserLink,{nick:e.nick})})," (",e.totalComentarios," comentarios)"]},e.nick)))]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("span",{className:"mr-2 text-xl",children:"ðŸ¤"}),(0,s.jsx)("b",{children:"Usuarios con mÃ¡s amigos:"})," ",0===(b=E.map(e=>{let s=e.amigosComoUser?.length||0;return{nick:e.nick,numAmigos:s}}).filter(e=>e.nick&&e.numAmigos>0).sort((e,s)=>s.numAmigos-e.numAmigos).slice(0,5)).length?(0,s.jsx)("span",{className:"block",children:"No hay usuarios con amigos aÃºn."}):b.map((e,a)=>(0,s.jsxs)("span",{className:"block",children:[a+1,". ",(0,s.jsx)("b",{children:(0,s.jsx)(l.UserLink,{nick:e.nick})})," (",e.numAmigos," amigos)"]},e.nick))]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("span",{className:"mr-2 text-xl",children:"ðŸ“–"}),(0,s.jsx)("b",{children:"Usuarios con mÃ¡s historias:"})," ",(f={},U.forEach(e=>{e.autor&&(f[e.autor]=(f[e.autor]||0)+1)}),0===(g=Object.entries(f).map(([e,s])=>({nick:e,totalHistorias:s})).filter(e=>e.nick&&e.totalHistorias>0).sort((e,s)=>s.totalHistorias-e.totalHistorias).slice(0,5)).length?(0,s.jsx)("span",{className:"block",children:"No hay usuarios con historias aÃºn."}):g.map((e,a)=>(0,s.jsxs)("span",{className:"block",children:[a+1,". ",(0,s.jsx)("b",{children:(0,s.jsx)(l.UserLink,{nick:e.nick})})," (",e.totalHistorias," historias)"]},e.nick)))]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("span",{className:"mr-2 text-xl",children:"ðŸ†"}),(0,s.jsx)("b",{children:"Usuarios con mÃ¡s concursos ganados:"})," ",0===(N=E.map(e=>({nick:e.nick,nombre:e.nombre,totalConcursos:e.concursosGanados||0})).filter(e=>e.totalConcursos>0).sort((e,s)=>s.totalConcursos-e.totalConcursos).slice(0,5)).length?(0,s.jsx)("span",{className:"block",children:"No hay usuarios con concursos ganados aÃºn."}):N.map((e,a)=>(0,s.jsxs)("span",{className:"block",children:[a+1,". ",(0,s.jsx)("b",{children:(0,s.jsx)(l.UserLink,{nick:e.nick})})," (",e.totalConcursos," concursos)"]},e.nick))]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("span",{className:"mr-2 text-xl",children:"ðŸ†"}),(0,s.jsx)("b",{children:"Usuarios con mÃ¡s competiciones superadas:"})," ",0===(k=E.map(e=>({nick:e.nick,nombre:e.nombre,totalCompeticiones:e.competicionesSuperadas||0})).filter(e=>e.totalCompeticiones>0).sort((e,s)=>s.totalCompeticiones-e.totalCompeticiones).slice(0,5)).length?(0,s.jsx)("span",{className:"block",children:"No hay usuarios con competiciones superadas aÃºn."}):k.map((e,a)=>(0,s.jsxs)("span",{className:"block",children:[a+1,". ",(0,s.jsx)("b",{children:(0,s.jsx)(l.UserLink,{nick:e.nick})})," (",e.totalCompeticiones," competiciones)"]},e.nick))]})]})]})]}),T&&(0,s.jsx)("div",{className:"max-w-5xl mx-auto mt-8",children:(0,s.jsx)("div",{className:"bg-gradient-to-r from-yellow-400 via-orange-500 to-red-500 rounded-2xl p-1 shadow-2xl",children:(0,s.jsxs)("div",{className:"bg-white rounded-2xl p-6",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-center mb-6 text-transparent bg-clip-text bg-gradient-to-r from-yellow-500 to-orange-600",children:"ðŸ‘‘ EstadÃ­sticas Premium Avanzadas ðŸ‘‘"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,s.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-100 rounded-xl p-4",children:[(0,s.jsx)("h3",{className:"font-bold text-blue-800 mb-3 text-center",children:"ðŸ“ˆ Tu AnÃ¡lisis Personal"}),(0,s.jsxs)("ul",{className:"space-y-2 text-sm",children:[(0,s.jsxs)("li",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:"ðŸŽ¯ PrecisiÃ³n promedio:"}),(0,s.jsx)("span",{className:"font-bold text-blue-600",children:(()=>{if(A){let e=A.respuestasAcertadas||0,s=e+0;return s>0?(e/s*100).toFixed(1)+"%":"0%"}return"0%"})()})]}),(0,s.jsxs)("li",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:"âš¡ Racha actual:"}),(0,s.jsxs)("span",{className:"font-bold text-blue-600",children:[A?.racha||0," dÃ­as"]})]}),(0,s.jsxs)("li",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:"ðŸ“… DÃ­as activo:"}),(0,s.jsx)("span",{className:"font-bold text-blue-600",children:(()=>{if(A?.fechaRegistro){let e=new Date(A.fechaRegistro);return Math.ceil(Math.abs(new Date().getTime()-e.getTime())/864e5)}return 0})()})]}),(0,s.jsxs)("li",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:"ðŸ† Tu ranking:"}),(0,s.jsx)("span",{className:"font-bold text-blue-600",children:(()=>{if(E.length>0&&A){let e=E.map(e=>({...e,puntosTotales:e.respuestasAcertadas||0})).sort((e,s)=>s.puntosTotales-e.puntosTotales).findIndex(e=>e.nick===A.nick)+1;return e>0?`#${e}`:"-"}return"-"})()})]})]})]}),(0,s.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-emerald-100 rounded-xl p-4",children:[(0,s.jsx)("h3",{className:"font-bold text-green-800 mb-3 text-center",children:"ðŸ“š AnÃ¡lisis por Materias"}),(0,s.jsxs)("ul",{className:"space-y-2 text-sm",children:[(0,s.jsxs)("li",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:"ðŸ”¬ MatemÃ¡ticas:"}),(0,s.jsx)("span",{className:"font-bold text-green-600",children:"Datos no disponibles"})]}),(0,s.jsxs)("li",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:"ðŸ“– Lenguaje:"}),(0,s.jsx)("span",{className:"font-bold text-green-600",children:"Datos no disponibles"})]}),(0,s.jsxs)("li",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:"ðŸŒ GeografÃ­a:"}),(0,s.jsx)("span",{className:"font-bold text-green-600",children:"Datos no disponibles"})]}),(0,s.jsxs)("li",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:"ðŸ“š Historia:"}),(0,s.jsx)("span",{className:"font-bold text-green-600",children:"Datos no disponibles"})]}),(0,s.jsxs)("li",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:"ðŸŽ¨ Tu fuerte:"}),(0,s.jsx)("span",{className:"font-bold text-green-600",children:"Datos no disponibles"})]})]})]}),(0,s.jsxs)("div",{className:"bg-gradient-to-br from-purple-50 to-violet-100 rounded-xl p-4",children:[(0,s.jsx)("h3",{className:"font-bold text-purple-800 mb-3 text-center",children:"ðŸŽ¯ Logros y ProyecciÃ³n"}),(0,s.jsxs)("ul",{className:"space-y-2 text-sm",children:[(0,s.jsxs)("li",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:"ðŸ“ˆ Crecimiento:"}),(0,s.jsx)("span",{className:"font-bold text-purple-600",children:(()=>{if(A){let e=A.respuestasAcertadas||0,s=e+0;if(s>0){let a=Math.max(0,Math.floor(e/s*100-50));return`+${a}% sem.`}}return"+0% sem."})()})]}),(0,s.jsxs)("li",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:"ðŸŽ¯ Meta semanal:"}),(0,s.jsx)("span",{className:"font-bold text-purple-600",children:(()=>{if(A){let e=A.respuestasAcertadas||0,s=e+0;if(s>0){let a=e/s*100;return a>=75?"75% âœ…":`${a.toFixed(1)}% âŒ`}}return"0% âŒ"})()})]}),(0,s.jsxs)("li",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:"â­ PrÃ³ximo nivel:"}),(0,s.jsx)("span",{className:"font-bold text-purple-600",children:(()=>{if(A){let e=function(e){if(!e||!e.nick)return 0;let s=0;return["matematicas","lenguaje","geografia","historia","literatura","ingles","naturaleza"].forEach(a=>{let t=(e.stats_individual?JSON.parse(e.stats_individual):{})[a]||0;s+=t}),s+=e.likes||0,s+=10*(e.competicionesSuperadas||0),s+=2*(e.respuestasAcertadas||0)}(A),s=Math.floor(e/100);return`${(s+1)*100-e} pts`}return"100 pts"})()})]})]})]})]}),(0,s.jsxs)("div",{className:"mt-6 bg-gradient-to-r from-indigo-50 to-purple-50 rounded-xl p-4",children:[(0,s.jsx)("h3",{className:"font-bold text-indigo-800 mb-3 text-center",children:"ðŸ“Š GrÃ¡fico de Progreso Semanal"}),(0,s.jsx)("div",{className:"flex items-end justify-between h-32 gap-2",children:[...Array(7)].map((e,a)=>{let t=A?Math.max(0,Math.floor((A.respuestasAcertadas||0)/7)+(Math.floor(5*Math.random())-2)):Math.floor(5*Math.random())+1,l=Math.max(20,Math.min(100,t/25*80+20)),r=["L","M","X","J","V","S","D"][a],n=a===new Date().getDay()-1||0===new Date().getDay()&&6===a;return(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[(0,s.jsx)("div",{className:`w-8 rounded-t-md ${n?"bg-gradient-to-t from-orange-500 to-red-500":"bg-gradient-to-t from-blue-500 to-purple-500"}`,style:{height:`${l}%`}}),(0,s.jsx)("span",{className:`text-xs mt-1 font-semibold ${n?"text-orange-600":"text-indigo-600"}`,children:r}),(0,s.jsx)("span",{className:"text-xs text-gray-500",children:t})]},a)})}),(0,s.jsxs)("div",{className:"text-center mt-3 text-sm text-indigo-600",children:["ðŸ“ˆ ",(0,s.jsx)("strong",{children:"Tendencia:"})," ",(()=>{if(A){let e=A.respuestasAcertadas||0,s=0+e>0?e/(0+e)*100:0;return s>=80?"Â¡Excelente! MantÃ©n este nivel de precisiÃ³n.":s>=60?"Â¡Vas muy bien! MantÃ©n el ritmo esta semana.":s>=40?"Buen progreso. Â¡Sigue practicando!":"Empezando bien. Â¡Cada respuesta cuenta!"}return"Â¡Empieza tu aventura de aprendizaje!"})()]})]}),(0,s.jsxs)("div",{className:"mt-6 bg-gradient-to-r from-orange-50 to-red-50 rounded-xl p-4",children:[(0,s.jsx)("h3",{className:"font-bold text-orange-800 mb-3 text-center",children:"âš”ï¸ Tu PosiciÃ³n vs. Mejores"}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-center",children:[(0,s.jsxs)("div",{className:"bg-white rounded-lg p-3",children:[(0,s.jsx)("div",{className:"text-2xl",children:"ðŸ¥‡"}),(0,s.jsx)("div",{className:"text-xs text-gray-600",children:"1Âº Lugar"}),(0,s.jsx)("div",{className:"font-bold text-yellow-600",children:(v=E.map(e=>({...e,puntosTotales:e.respuestasAcertadas||0})).sort((e,s)=>s.puntosTotales-e.puntosTotales),v[0]?.puntosTotales||0)}),(0,s.jsx)("div",{className:"text-xs text-gray-500",children:(y=E.map(e=>({...e,puntosTotales:e.respuestasAcertadas||0})).sort((e,s)=>s.puntosTotales-e.puntosTotales),y[0]?.nick||"Nadie")})]}),(0,s.jsxs)("div",{className:"bg-gradient-to-r from-blue-100 to-purple-100 rounded-lg p-3 border-2 border-blue-300",children:[(0,s.jsx)("div",{className:"text-2xl",children:"ðŸ‘‘"}),(0,s.jsx)("div",{className:"text-xs text-blue-600 font-bold",children:"TÃš"}),(0,s.jsx)("div",{className:"font-bold text-blue-600",children:A&&A.respuestasAcertadas||0}),(0,s.jsx)("div",{className:"text-xs text-blue-500",children:(()=>{if(A){let e=E.map(e=>({...e,puntosTotales:e.respuestasAcertadas||0})).sort((e,s)=>s.puntosTotales-e.puntosTotales).findIndex(e=>e.nick===A.nick)+1;return e>0?`Posici\xf3n #${e}`:"Sin clasificar"}return"Sin clasificar"})()})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg p-3",children:[(0,s.jsx)("div",{className:"text-2xl",children:"ðŸŽ¯"}),(0,s.jsx)("div",{className:"text-xs text-gray-600",children:"Promedio"}),(0,s.jsx)("div",{className:"font-bold text-gray-600",children:Math.floor(E.reduce((e,s)=>e+(s.respuestasAcertadas||0),0)/E.length)}),(0,s.jsx)("div",{className:"text-xs text-gray-500",children:`${E.length} usuarios`})]})]}),(0,s.jsx)("div",{className:"mt-3 text-center text-sm",children:(()=>{if(A){let e=Math.floor(E.reduce((e,s)=>e+(s.respuestasAcertadas||0),0)/E.length),a=(A.respuestasAcertadas||0)-e;return a>0?(0,s.jsxs)("span",{className:"text-green-600",children:["ðŸ“ˆ +",a," puntos sobre el promedio"]}):a<0?(0,s.jsxs)("span",{className:"text-red-600",children:["ðŸ“‰ ",Math.abs(a)," puntos bajo el promedio"]}):(0,s.jsx)("span",{className:"text-blue-600",children:"ðŸŽ¯ Exactamente en el promedio"})}return(0,s.jsx)("span",{className:"text-gray-500",children:"Sin datos para comparar"})})()})]})]})})}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 max-w-5xl mx-auto mt-8",children:[(0,s.jsx)("h2",{className:"text-lg font-bold mb-4 text-center",children:"Mejores estadÃ­sticas"}),(0,s.jsxs)("ul",{className:"space-y-2 text-center",children:[(0,s.jsxs)("li",{children:[(0,s.jsx)("span",{className:"mr-2 text-xl",children:"ðŸ“–"}),(0,s.jsx)("b",{children:"Historia con mÃ¡s likes:"})," ",(()=>{if(0===U.length)return"-";let e=U.reduce((e,s)=>(s.likes||0)>(e.likes||0)?s:e,U[0]);return(0,s.jsxs)("span",{children:[(0,s.jsx)("b",{children:e.titulo})," por ",(0,s.jsx)("b",{children:(0,s.jsx)(l.UserLink,{nick:e.autor})})," ",(0,s.jsxs)("span",{className:"text-pink-600",children:["â¤ï¸ ",e.likes||0]})]})})()]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("span",{className:"mr-2 text-xl",children:"ðŸ’¬"}),(0,s.jsx)("b",{children:"Historia mÃ¡s comentada:"})," ",(()=>{if(0===U.length)return"-";let e=U.reduce((e,s)=>(s.comentarios?s.comentarios.length:0)>(e.comentarios?e.comentarios.length:0)?s:e,U[0]);return(0,s.jsxs)("span",{children:[(0,s.jsx)("b",{children:e.titulo})," por ",(0,s.jsx)("b",{children:(0,s.jsx)(l.UserLink,{nick:e.autor})})," ",(0,s.jsxs)("span",{className:"text-blue-600",children:["ðŸ’¬ ",e.comentarios?e.comentarios.length:0]})]})})()]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("span",{className:"mr-2 text-xl",children:"ðŸ«"}),(0,s.jsx)("b",{children:"Centro con mÃ¡s historias creadas:"})," ",(()=>{if(0===U.length||0===E.length)return"-";let e={};E.forEach(s=>{s.nick&&s.centro&&(e[s.nick]=s.centro)});let a={};U.forEach(s=>{let t=s.centro||e[s.autor]||null;t&&(a[t]=(a[t]||0)+1)});let t=Object.entries(a).sort((e,s)=>s[1]-e[1])[0];return t?(0,s.jsxs)("span",{children:[(0,s.jsx)("b",{children:t[0]})," ",(0,s.jsxs)("span",{className:"text-purple-600",children:["ðŸ« ",t[1]]})]}):"-"})()]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("span",{className:"mr-2 text-xl",children:"ðŸ«"}),(0,s.jsx)("b",{children:"Centro Escolar con mÃ¡s usuarios activos:"})," ",(()=>{if(0===E.length)return"-";let e={};E.forEach(s=>{s.centro&&(e[s.centro]=(e[s.centro]||0)+1)});let a=Object.entries(e).sort((e,s)=>s[1]-e[1])[0];return a?(0,s.jsxs)("span",{children:[(0,s.jsx)("b",{children:a[0]})," ",(0,s.jsxs)("span",{className:"text-blue-600",children:["ðŸ« ",a[1]]})]}):"-"})()]})]})]})]})}e.s(["default",()=>r])}]);