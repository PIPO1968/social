(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,i,a)=>{i.exports=e.r(76562)},85315,e=>{e.v([{id:101,titulo:"Historiador Premium",descripcion:"Tus primeras 35 historias.",imagen:"/premium1.jpg",criterio:"historiasCreadas >= 5",exclusivoPremium:!0,beneficio:"Badge especial de historiador"},{id:102,titulo:"Sabio Premium",descripcion:"100 preguntas acertadas en Aprende con Pipo siendo Premium",imagen:"/premium2.jpg",criterio:"preguntasAcertadas >= 100",exclusivoPremium:!0,beneficio:"Título de Sabio en perfil"},{id:103,titulo:"Amigo Premium",descripcion:"Conseguir 10 amigos siendo usuario Premium",imagen:"/premium3.jpg",criterio:"amigosPremium >= 10",exclusivoPremium:!0,beneficio:"Badge de amistad especial"},{id:104,titulo:"Espíritu Navideño Premium",descripcion:"Crear historias durante eventos especiales siendo Premium",imagen:"/premium4.jpg",criterio:"historiasEventos >= 3",exclusivoPremium:!0,beneficio:"Badge de celebración especial"},{id:105,titulo:"Verano Dorado Premium",descripcion:"Mantener racha de actividad durante vacaciones siendo Premium",imagen:"/premium5.jpg",criterio:"rachaVerano >= 15",exclusivoPremium:!0,beneficio:"Efecto de verano en perfil"},{id:106,titulo:"Veterano Dorado",descripcion:"6 meses consecutivos como usuario Premium",imagen:"/premium6.jpg",criterio:"mesesPremium >= 6",exclusivoPremium:!0,beneficio:"Crown dorada permanente"},{id:107,titulo:"Diseñador del Futuro",descripcion:"Crear el futuro logo de StoryUp con herramientas como Paint",imagen:"/premium7.png",criterio:"logoStoryUpCreado == true",exclusivoPremium:!0,beneficio:"Reconocimiento como diseñador oficial",otorgadoPorAdmin:!0},{id:108,titulo:"Escritor Premium",descripcion:"Crear 15+ historias siendo usuario Premium",imagen:"/premium8.png",criterio:"historiasCreadas >= 15",exclusivoPremium:!0,beneficio:"Badge de escritor prolífico"},{id:109,titulo:"Competidor Premium",descripcion:"Aparecer en Top 5 de cualquier ranking siendo Premium",imagen:"/premium9.jpg",criterio:"enTop5Rankings == true",exclusivoPremium:!0,beneficio:"Destacado en rankings"},{id:110,titulo:"Cerebro de Oro",descripcion:"1000+ preguntas acertadas siendo usuario Premium",imagen:"/premium10.jpg",criterio:"preguntasAcertadas >= 1000",exclusivoPremium:!0,beneficio:"Título de genio académico"},{id:111,titulo:"Perfeccionista Premium",descripcion:"Conseguir precisión de 80%+ en Aprende con Pipo siendo Premium",imagen:"/premium11.jpg",criterio:"precision >= 80",exclusivoPremium:!0,beneficio:"Badge de perfección académica"},{id:112,titulo:"Red Social Premium",descripcion:"Conseguir 50+ amigos siendo usuario Premium",imagen:"/premium12.jpg",criterio:"amigosPremium >= 50",exclusivoPremium:!0,beneficio:"Título de influencer social Premium"}])},90597,e=>{"use strict";var i=e.i(43476),a=e.i(71645);let r=e.i(85315).default.map(e=>({src:e.imagen,texto:`${e.titulo}
${e.descripcion}`,tipo:"manual"}));var o=e.i(88379),t=e.i(18566);e.s(["default",0,()=>{let e=(0,t.useRouter)(),[s,n]=(0,a.useState)(null),[c,u]=(0,a.useState)(!1),[l,d]=(0,a.useState)(""),[m,p]=(0,a.useState)(""),[h,g]=(0,a.useState)(""),[x,b]=(0,a.useState)(""),[f,j]=(0,a.useState)(""),[v,P]=(0,a.useState)(""),[S,y]=(0,a.useState)(""),[N,C]=(0,a.useState)(1),[w,k]=(0,a.useState)(""),[T,A]=(0,a.useState)([]),[D,E]=(0,a.useState)(""),[O,B]=(0,a.useState)(""),[q,R]=(0,a.useState)([]),[J,U]=(0,a.useState)(!1),[L,V]=(0,a.useState)(""),[F,G]=(0,a.useState)(""),[H,K]=(0,a.useState)(""),[M,$]=(0,a.useState)(""),[z,I]=(0,a.useState)(""),[Q,W]=(0,a.useState)(""),[X,Y]=(0,a.useState)(null),[Z,_]=(0,a.useState)(null),[ee,ei]=(0,a.useState)({trofeosDesbloqueados:[],trofeosBloqueados:[]}),[ea,er]=(0,a.useState)([]),[eo,et]=(0,a.useState)("1primaria"),[es,en]=(0,a.useState)("matematicas"),[ec,eu]=(0,a.useState)(""),[el,ed]=(0,a.useState)(""),{t:em}=(0,o.useTranslation)();(0,a.useEffect)(()=>{fetch("/api/auth/me").then(i=>i.ok?i.json():(e.push("/"),null)).then(i=>{i&&i.user?n(i.user):i&&!i.user&&e.push("/")}).catch(e=>{console.warn("Error comprobando sesión:",e)}),fetch("/api/concursos").then(e=>e.json()).then(e=>{er(e)}).catch(e=>{console.warn("No se pudo cargar la lista de concursos:",e)})},[]),(0,a.useEffect)(()=>{s&&s.nick&&fetch("/api/chat?nick="+s.nick).then(e=>e.json()).then(e=>{R(e)}).catch(e=>{console.warn("No se pudo cargar los mensajes del chat:",e)})},[s]);let ep=D&&X||{...s,trofeosDesbloqueados:ee.trofeosDesbloqueados,trofeosBloqueados:ee.trofeosBloqueados};(0,a.useEffect)(()=>{ep&&ep.nick&&(fetch("/api/premium/data?nick="+ep.nick).then(e=>e.json()).then(e=>_(e)).catch(e=>console.warn("No se pudo cargar datos premium:",e)),fetch("/api/trofeos/user-trofeos?nick="+ep.nick).then(e=>e.json()).then(e=>ei(e)).catch(e=>console.warn("No se pudo cargar trofeos:",e)))},[ep]);let eh=async()=>{if(z&&Q)try{await fetch("/api/concursos",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:z,ganador:Q})}),((e,i)=>{if(!e)return;let a=T.find(i=>i.nick===e)?.likes||0;fetch("/api/users/update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({nick:e,likes:a+10})}).then(e=>e.json()).then(i=>{A(T.map(a=>a.nick===e?i:a)),s&&s.nick===e&&n(i)}).catch(e=>console.error("Error updating likes:",e))})(Q,0),I(""),W(""),fetch("/api/concursos").then(e=>e.json()).then(er)}catch(e){console.error("Error asignando ganador:",e)}},eg=async()=>{if(ec.trim()&&el.trim())try{let e=await fetch("/api/add-question",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({curso:eo,asignatura:es,pregunta:ec.trim(),respuesta:el.trim()})});await e.json(),e.ok&&(eu(""),ed(""))}catch(e){console.error("Error al enviar pregunta:",e)}};return([...r],s)?(ep&&Z&&Z.activo,(0,i.jsx)("div",{className:"min-h-screen bg-green-100 flex flex-col pt-4",children:s.tipo&&"docente"===s.tipo.toLowerCase()&&(0,i.jsxs)("div",{className:"w-full max-w-6xl mx-auto mt-16 grid grid-cols-2 gap-12",children:[(0,i.jsxs)("form",{onSubmit:e=>{e.preventDefault(),fetch("/api/noticias",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({titulo:L,contenido:F,autorNick:s?s.nick:""})}).then(e=>e.json()).then(()=>{V(""),G(""),K("")}).catch(e=>{console.error("Error creando noticia:",e)})},className:"bg-white shadow rounded p-6 mb-8 flex flex-col gap-4",children:[(0,i.jsx)("h3",{className:"text-lg font-bold mb-2",children:"Crear noticia"}),(0,i.jsx)("input",{type:"text",value:L,onChange:e=>V(e.target.value),placeholder:"Título",className:"border p-2 rounded"}),(0,i.jsx)("textarea",{value:F,onChange:e=>G(e.target.value),placeholder:"Contenido",className:"border p-2 rounded"}),(0,i.jsx)("button",{type:"submit",className:"bg-blue-500 text-white px-4 py-2 rounded",children:"Publicar noticia"})]}),(0,i.jsxs)("form",{onSubmit:e=>{e.preventDefault(),fetch("/api/concursos",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({numero:N,titulo:h,texto:x,inicio:f,fin:v,autor:s?s.nick:"",ganador:S,fechaFinal:v})}).then(e=>e.json()).then(()=>{C(N+1),g(""),b(""),j(""),P(""),y(""),fetch("/api/concursos").then(e=>e.json()).then(er)}).catch(e=>{console.error("Error creando concurso:",e)})},className:"bg-white shadow rounded p-6 mb-8 flex flex-col gap-4",children:[(0,i.jsx)("h3",{className:"text-lg font-bold mb-2",children:"Crear concurso"}),(0,i.jsx)("input",{type:"text",value:h,onChange:e=>g(e.target.value),placeholder:"Título",className:"border p-2 rounded"}),(0,i.jsx)("textarea",{value:x,onChange:e=>b(e.target.value),placeholder:"Descripción",className:"border p-2 rounded"}),(0,i.jsx)("input",{type:"date",value:f,onChange:e=>j(e.target.value),className:"border p-2 rounded"}),(0,i.jsx)("input",{type:"date",value:v,onChange:e=>P(e.target.value),className:"border p-2 rounded"}),(0,i.jsx)("button",{type:"submit",className:"bg-green-500 text-white px-4 py-2 rounded",children:"Crear concurso"})]}),(0,i.jsxs)("div",{className:"bg-white shadow rounded p-6 mb-8 flex flex-col gap-4",children:[(0,i.jsx)("h3",{className:"text-lg font-bold mb-2",children:"Gestión de concursos finalizados"}),(0,i.jsxs)("select",{value:z,onChange:e=>I(e.target.value),className:"border p-2 rounded",children:[(0,i.jsx)("option",{value:"",children:"Selecciona concurso"}),ea.map(e=>(0,i.jsx)("option",{value:e.id,children:e.titulo},e.id))]}),(0,i.jsx)("input",{type:"text",value:Q,onChange:e=>W(e.target.value),placeholder:"Nick del ganador",className:"border p-2 rounded"}),(0,i.jsx)("button",{type:"button",onClick:eh,className:"bg-yellow-500 text-white px-4 py-2 rounded",children:"Asignar ganador"})]}),(0,i.jsxs)("form",{onSubmit:e=>{e.preventDefault(),eg()},className:"bg-white shadow rounded p-6 mb-8 flex flex-col gap-4",children:[(0,i.jsx)("h3",{className:"text-lg font-bold mb-2",children:"Agregar pregunta (Aprende con Pipo)"}),(0,i.jsxs)("select",{value:eo,onChange:e=>et(e.target.value),className:"border p-2 rounded",children:[(0,i.jsx)("option",{value:"1primaria",children:"1º Primaria"}),(0,i.jsx)("option",{value:"2primaria",children:"2º Primaria"}),(0,i.jsx)("option",{value:"3primaria",children:"3º Primaria"}),(0,i.jsx)("option",{value:"4primaria",children:"4º Primaria"}),(0,i.jsx)("option",{value:"5primaria",children:"5º Primaria"}),(0,i.jsx)("option",{value:"6primaria",children:"6º Primaria"})]}),(0,i.jsxs)("select",{value:es,onChange:e=>en(e.target.value),className:"border p-2 rounded",children:[(0,i.jsx)("option",{value:"matematicas",children:"Matemáticas"}),(0,i.jsx)("option",{value:"lenguaje",children:"Lenguaje"}),(0,i.jsx)("option",{value:"ciencias",children:"Ciencias"}),(0,i.jsx)("option",{value:"ingles",children:"Inglés"}),(0,i.jsx)("option",{value:"historia",children:"Historia"}),(0,i.jsx)("option",{value:"geografia",children:"Geografía"}),(0,i.jsx)("option",{value:"literatura",children:"Literatura"})]}),(0,i.jsx)("input",{type:"text",value:ec,onChange:e=>eu(e.target.value),placeholder:"Pregunta",className:"border p-2 rounded"}),(0,i.jsx)("input",{type:"text",value:el,onChange:e=>ed(e.target.value),placeholder:"Respuesta",className:"border p-2 rounded"}),(0,i.jsx)("button",{type:"submit",className:"bg-purple-500 text-white px-4 py-2 rounded",children:"Agregar pregunta"})]}),(0,i.jsxs)("div",{className:"bg-white shadow rounded p-6 mb-8 flex flex-col gap-4",children:[(0,i.jsx)("h3",{className:"text-lg font-bold mb-2",children:"Panel de administración y antibullying"}),(0,i.jsxs)("form",{onSubmit:e=>{e.preventDefault(),p("")},className:"flex gap-2 mb-2",children:[(0,i.jsx)("input",{type:"text",value:m,onChange:e=>p(e.target.value),placeholder:"Palabra prohibida",className:"border p-2 rounded"}),(0,i.jsx)("button",{type:"submit",className:"bg-red-500 text-white px-4 py-2 rounded",children:"Agregar palabra"})]}),(0,i.jsx)("button",{type:"button",onClick:()=>{u(!1),d("")},className:"bg-gray-500 text-white px-4 py-2 rounded",children:"Desactivar antibullying"}),c&&(0,i.jsxs)("div",{className:"text-red-600 font-bold",children:["Antibullying activo para: ",l]})]})]})})):(0,i.jsx)("div",{className:"min-h-screen bg-green-100 flex items-center justify-center",children:(0,i.jsxs)("div",{className:"max-w-md w-full bg-white shadow rounded p-6 text-center",children:[(0,i.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Perfil"}),(0,i.jsx)("p",{className:"text-gray-600",children:"No se ha iniciado sesión."})]})})}],90597)}]);