{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Desktop/social/src/app/api/user/profile/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server';\r\nimport { PrismaClient } from '@prisma/client';\r\nimport * as jwt from 'jsonwebtoken';\r\n\r\nconst prisma = new PrismaClient();\r\n\r\n// Definición de trofeos automáticos (copiada del cliente)\r\nconst TROFEOS_AUTO = [\r\n    { src: \"/trofeo25.jpg\", texto: \"Trofeo 1\", tipo: \"auto\", condicion: (user: any) => (user.likes || 0) >= 10 },\r\n    { src: \"/trofeo7.jpg\", texto: \"Trofeo 2\", tipo: \"auto\", condicion: (user: any) => (user.amigos || 0) >= 1 },\r\n    { src: \"/trofeo12.jpg\", texto: \"Trofeo 3\", tipo: \"auto\", condicion: (user: any) => (user.comentariosRecibidos || 0) >= 1 },\r\n    { src: \"/trofeo5.jpg\", texto: \"Trofeo 4\", tipo: \"auto\", condicion: (user: any) => (user.historias || 0) >= 1 },\r\n    { src: \"/trofeo13.png\", texto: \"Trofeo 5\", tipo: \"auto\", condicion: (user: any) => (user.respuestasAcertadas || 0) >= 20 },\r\n    { src: \"/trofeo17.jpg\", texto: \"Trofeo 6\", tipo: \"auto\", condicion: (user: any) => (user.competicionesSuperadas || 0) >= 1 },\r\n    {\r\n        src: \"/trofeo27.jpg\", texto: \"Trofeo 7\", tipo: \"auto\", condicion: (user: any) => {\r\n            return (user.likes || 0) > 0 || (user.amigos || 0) > 0 || (user.historias || 0) > 0 || (user.comentariosRecibidos || 0) > 0 || (user.concursosGanados || 0) > 0 || (user.competicionesSuperadas || 0) > 0;\r\n        }\r\n    },\r\n    { src: \"/trofeo10.jpg\", texto: \"Trofeo 8\", tipo: \"auto\", condicion: (user: any) => (user.concursosGanados || 0) >= 1 },\r\n    { src: \"/trofeo23.jpg\", texto: \"Trofeo 9\", tipo: \"auto\", condicion: (user: any) => (user.likes || 0) >= 100 },\r\n    { src: \"/trofeo15.jpg\", texto: \"Trofeo 10\", tipo: \"auto\", condicion: (user: any) => (user.amigos || 0) >= 10 },\r\n    { src: \"/trofeo26.jpg\", texto: \"Trofeo 11\", tipo: \"auto\", condicion: (user: any) => (user.historias || 0) >= 3 },\r\n    { src: \"/trofeo1.jpg\", texto: \"Trofeo 12\", tipo: \"auto\", condicion: (user: any) => (user.comentariosRecibidos || 0) >= 3 },\r\n    { src: \"/trofeo22.jpg\", texto: \"Trofeo 13\", tipo: \"auto\", condicion: (user: any) => user.enTablasCompeticion === true },\r\n    { src: \"/trofeo14.jpg\", texto: \"Trofeo 14\", tipo: \"auto\", condicion: (user: any) => (user.likes || 0) >= 500 },\r\n    { src: \"/trofeo20.jpg\", texto: \"Trofeo 15\", tipo: \"auto\", condicion: (user: any) => (user.amigos || 0) >= 30 },\r\n    { src: \"/trofeo11.jpg\", texto: \"Trofeo 16\", tipo: \"auto\", condicion: (user: any) => (user.comentariosRecibidos || 0) >= 10 },\r\n    { src: \"/trofeo24.jpg\", texto: \"Trofeo 17\", tipo: \"auto\", condicion: (user: any) => (user.historias || 0) >= 15 },\r\n    { src: \"/trofeo18.jpg\", texto: \"Trofeo 18\", tipo: \"auto\", condicion: (user: any) => (user.concursosGanados || 0) >= 3 },\r\n    { src: \"/trofeo19.jpg\", texto: \"Trofeo 19\", tipo: \"auto\", condicion: (user: any) => (user.respuestasAcertadas || 0) >= 1000 },\r\n    {\r\n        src: \"/trofeo15.jpg\", texto: \"Trofeo 20\", tipo: \"auto\", condicion: (user: any) => {\r\n            if (!user.fechaInscripcion) return false;\r\n            const fecha = new Date(user.fechaInscripcion);\r\n            const ahora = new Date();\r\n            const diff = ahora.getTime() - fecha.getTime();\r\n            return diff >= 365 * 24 * 60 * 60 * 1000;\r\n        }\r\n    },\r\n    { src: \"/trofeo9.jpg\", texto: \"Trofeo 21\", tipo: \"auto\", condicion: (user: any) => (user.historias || 0) >= 30 },\r\n    { src: \"/trofeo8.jpg\", texto: \"Trofeo 22\", tipo: \"auto\", condicion: (user: any) => (user.likes || 0) >= 1000 },\r\n    { src: \"/trofeo21.jpg\", texto: \"Trofeo 23\", tipo: \"auto\", condicion: (user: any) => (user.amigos || 0) >= 50 },\r\n    {\r\n        src: \"/trofeo16.jpg\", texto: \"Trofeo 24\", tipo: \"auto\", condicion: (user: any) => {\r\n            return (user.likes || 0) >= 500 &&\r\n                (user.amigos || 0) >= 10 &&\r\n                (user.historias || 0) >= 5 &&\r\n                (user.respuestasAcertadas || 0) >= 100;\r\n        }\r\n    }\r\n];\r\n\r\n// Función para obtener trofeos automáticos\r\nconst getAutoTrofeos = (user: any) => {\r\n    const userSync = {\r\n        ...user,\r\n        amigos: Array.isArray(user.amigos) ? user.amigos.length : (user.amigos || 0)\r\n    };\r\n\r\n    let autoTrofeos = TROFEOS_AUTO\r\n        .map((t, idx) => {\r\n            const conditionResult = typeof t.condicion === 'function' && t.condicion(userSync);\r\n            return conditionResult ? idx : null;\r\n        })\r\n        .filter(idx => idx !== null);\r\n\r\n    return autoTrofeos;\r\n};\r\n\r\n// Función para sincronizar trofeos\r\nconst syncAutoTrofeos = async (userData: any) => {\r\n    try {\r\n        const autoTrofeos = getAutoTrofeos(userData);\r\n\r\n        // Obtener trofeos actuales del usuario\r\n        const existingTrofeos = await prisma.userTrofeo.findMany({\r\n            where: { userId: userData.id }\r\n        });\r\n\r\n        const desbloqueados = existingTrofeos.filter(t => t.desbloqueado).map(t => t.trofeoId);\r\n\r\n        // Filtrar trofeos automáticos que no están ya desbloqueados\r\n        const nuevosAutoTrofeos = autoTrofeos.filter((idx: number) => !desbloqueados.includes(idx));\r\n\r\n        if (nuevosAutoTrofeos.length > 0) {\r\n            // Agregar los nuevos trofeos automáticos (uno por uno para manejar duplicados)\r\n            for (const idx of nuevosAutoTrofeos) {\r\n                try {\r\n                    await prisma.userTrofeo.create({\r\n                        data: {\r\n                            userId: userData.id,\r\n                            trofeoId: idx,\r\n                            desbloqueado: true\r\n                        }\r\n                    });\r\n                } catch (error) {\r\n                    // Ignorar si ya existe (duplicado)\r\n                }\r\n            }\r\n        }\r\n\r\n    } catch (error) {\r\n        console.error('Server: Error syncing auto trofeos:', error);\r\n    }\r\n};\r\n\r\nexport async function GET(request: NextRequest) {\r\n    try {\r\n        const { searchParams } = new URL(request.url);\r\n        const nick = searchParams.get('nick');\r\n\r\n        if (!nick) {\r\n            return NextResponse.json({ error: 'Nick parameter is required' }, { status: 400 });\r\n        }\r\n\r\n        // Buscar el usuario por nick\r\n        const user = await prisma.user.findUnique({\r\n            where: { nick: nick },\r\n            include: {\r\n                historias: {\r\n                    select: {\r\n                        id: true,\r\n                        titulo: true,\r\n                        likes: true\r\n                    }\r\n                },\r\n                amigosComoUser: {\r\n                    select: {\r\n                        id: true,\r\n                        amigo: {\r\n                            select: {\r\n                                nick: true,\r\n                                nombre: true\r\n                            }\r\n                        }\r\n                    }\r\n                },\r\n                amigosComoAmigo: {\r\n                    select: {\r\n                        id: true,\r\n                        user: {\r\n                            select: {\r\n                                nick: true,\r\n                                nombre: true\r\n                            }\r\n                        }\r\n                    }\r\n                },\r\n                stats: true\r\n            }\r\n        });\r\n\r\n        if (!user) {\r\n            return NextResponse.json({ error: 'User not found' }, { status: 404 });\r\n        }\r\n\r\n        // Calcular estadísticas adicionales\r\n        const totalLikesHistorias = user.historias.reduce((sum: number, historia: any) => sum + (historia.likes || 0), 0);\r\n        const totalAmigos = (user.amigosComoUser.length + user.amigosComoAmigo.length) / 2;\r\n\r\n        // Obtener likes de championship por separado\r\n        let totalLikesChampionship = 0;\r\n        try {\r\n            const championshipResults = await prisma.championshipResult.findMany({\r\n                where: { userId: user.id },\r\n                select: { likes: true }\r\n            });\r\n            totalLikesChampionship = championshipResults.reduce((sum, result) => sum + (result.likes || 0), 0);\r\n        } catch (error) {\r\n            console.error('Error obteniendo likes de championship:', error);\r\n            // Si falla, usar 0\r\n        }\r\n\r\n        const likesConcursos = (user.concursosGanados || 0) * 10;\r\n        const likesManuales = user.likes || 0;\r\n        const totalLikes = totalLikesHistorias + totalLikesChampionship + likesConcursos + likesManuales;\r\n\r\n        // Calcular años en StoryUp\r\n        const anosEnStoryUp = user.fechaInscripcion\r\n            ? Math.floor((new Date().getTime() - new Date(user.fechaInscripcion).getTime()) / (1000 * 60 * 60 * 24 * 365))\r\n            : 0;\r\n\r\n        // Verificar si el usuario aparece en las tablas de competición (en cualquier temporada)\r\n        let enTablasCompeticion = false;\r\n\r\n        try {\r\n            // Verificar en competición individual (en cualquier temporada)\r\n            const individualResult = await prisma.championshipResult.findFirst({\r\n                where: {\r\n                    userId: user.id,\r\n                    type: 'individual'\r\n                }\r\n            });\r\n\r\n            // Verificar en competición docentes (en cualquier temporada)\r\n            const docenteResult = await prisma.championshipResult.findFirst({\r\n                where: {\r\n                    userId: user.id,\r\n                    type: 'docentes'\r\n                }\r\n            });\r\n\r\n            enTablasCompeticion = !!(individualResult || docenteResult);\r\n        } catch (error) {\r\n            console.error('Error verificando tablas de competición:', error);\r\n            enTablasCompeticion = false;\r\n        }\r\n\r\n        // Formatear respuesta\r\n        const userProfile = {\r\n            id: user.id,\r\n            nick: user.nick,\r\n            nombre: user.nombre,\r\n            email: user.email,\r\n            centro: user.centro,\r\n            curso: user.curso,\r\n            tipo: user.tipo,\r\n            avatar: user.avatar,\r\n            premium: user.premium,\r\n            fechaInscripcion: user.fechaInscripcion,\r\n            likes: totalLikes,\r\n            respuestasAcertadas: user.respuestasAcertadas || 0,\r\n            preguntasFalladas: user.stats?.preguntasFalladas || 0,\r\n            competicionesSuperadas: user.competicionesSuperadas || 0,\r\n            concursosGanados: user.concursosGanados || 0,\r\n            amigos: totalAmigos,\r\n            historias: user.historias.length,\r\n            comentariosRecibidos: user.comentariosRecibidos || 0,\r\n            anosEnStoryUp: anosEnStoryUp,\r\n            enTablasCompeticion: enTablasCompeticion,\r\n            trofeos: [], // No hay relación directa con trofeos\r\n            regalosEnviados: 0, // No implementado aún\r\n            regalosRecibidos: 0, // No implementado aún\r\n            compras: 0, // No implementado aún\r\n            torneosGanados: 0 // No implementado aún\r\n        };\r\n\r\n        // Sincronizar trofeos automáticos\r\n        await syncAutoTrofeos(userProfile);\r\n\r\n        return NextResponse.json({ user: userProfile });\r\n\r\n    } catch (error) {\r\n        console.error('Error fetching user profile:', error);\r\n        return NextResponse.json({ error: 'Internal server error' }, { status: 500 });\r\n    }\r\n}"],"names":[],"mappings":"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","debugId":null}}]
}